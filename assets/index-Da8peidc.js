var Lg=m=>{throw TypeError(m)};var Zc=(m,t,i)=>t.has(m)||Lg("Cannot "+i);var Ft=(m,t,i)=>(Zc(m,t,"read from private field"),i?i.call(m):t.get(m)),vi=(m,t,i)=>t.has(m)?Lg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(m):t.set(m,i),Pe=(m,t,i,n)=>(Zc(m,t,"write to private field"),n?n.call(m,i):t.set(m,i),i),Ai=(m,t,i)=>(Zc(m,t,"access private method"),i);var kg=(m,t,i,n)=>({set _(r){Pe(m,t,r,i)},get _(){return Ft(m,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();var Wc={exports:{}},Ba={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function db(){if(zg)return Ba;zg=1;var m=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(n,r,o){var c=null;if(o!==void 0&&(c=""+o),r.key!==void 0&&(c=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:m,type:n,key:c,ref:r!==void 0?r:null,props:o}}return Ba.Fragment=t,Ba.jsx=i,Ba.jsxs=i,Ba}var Pg;function fb(){return Pg||(Pg=1,Wc.exports=db()),Wc.exports}var F=fb(),Jc={exports:{}},vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function gb(){if(Bg)return vt;Bg=1;var m=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.iterator;function y(C){return C===null||typeof C!="object"?null:(C=b&&C[b]||C["@@iterator"],typeof C=="function"?C:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function x(C,V,Q){this.props=C,this.context=V,this.refs=_,this.updater=Q||A}x.prototype.isReactComponent={},x.prototype.setState=function(C,V){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,V,"setState")},x.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function E(){}E.prototype=x.prototype;function O(C,V,Q){this.props=C,this.context=V,this.refs=_,this.updater=Q||A}var M=O.prototype=new E;M.constructor=O,w(M,x.prototype),M.isPureReactComponent=!0;var k=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function j(C,V,Q,Y,$,nt){return Q=nt.ref,{$$typeof:m,type:C,key:V,ref:Q!==void 0?Q:null,props:nt}}function K(C,V){return j(C.type,V,void 0,void 0,void 0,C.props)}function Z(C){return typeof C=="object"&&C!==null&&C.$$typeof===m}function tt(C){var V={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(Q){return V[Q]})}var W=/\/+/g;function ot(C,V){return typeof C=="object"&&C!==null&&C.key!=null?tt(""+C.key):V.toString(36)}function At(){}function gt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(At,At):(C.status="pending",C.then(function(V){C.status==="pending"&&(C.status="fulfilled",C.value=V)},function(V){C.status==="pending"&&(C.status="rejected",C.reason=V)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function dt(C,V,Q,Y,$){var nt=typeof C;(nt==="undefined"||nt==="boolean")&&(C=null);var st=!1;if(C===null)st=!0;else switch(nt){case"bigint":case"string":case"number":st=!0;break;case"object":switch(C.$$typeof){case m:case t:st=!0;break;case p:return st=C._init,dt(st(C._payload),V,Q,Y,$)}}if(st)return $=$(C),st=Y===""?"."+ot(C,0):Y,k($)?(Q="",st!=null&&(Q=st.replace(W,"$&/")+"/"),dt($,V,Q,"",function(jt){return jt})):$!=null&&(Z($)&&($=K($,Q+($.key==null||C&&C.key===$.key?"":(""+$.key).replace(W,"$&/")+"/")+st)),V.push($)),1;st=0;var pt=Y===""?".":Y+":";if(k(C))for(var yt=0;yt<C.length;yt++)Y=C[yt],nt=pt+ot(Y,yt),st+=dt(Y,V,Q,nt,$);else if(yt=y(C),typeof yt=="function")for(C=yt.call(C),yt=0;!(Y=C.next()).done;)Y=Y.value,nt=pt+ot(Y,yt++),st+=dt(Y,V,Q,nt,$);else if(nt==="object"){if(typeof C.then=="function")return dt(gt(C),V,Q,Y,$);throw V=String(C),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return st}function N(C,V,Q){if(C==null)return C;var Y=[],$=0;return dt(C,Y,"","",function(nt){return V.call(Q,nt,$++)}),Y}function U(C){if(C._status===-1){var V=C._result;V=V(),V.then(function(Q){(C._status===0||C._status===-1)&&(C._status=1,C._result=Q)},function(Q){(C._status===0||C._status===-1)&&(C._status=2,C._result=Q)}),C._status===-1&&(C._status=0,C._result=V)}if(C._status===1)return C._result.default;throw C._result}var et=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function St(){}return vt.Children={map:N,forEach:function(C,V,Q){N(C,function(){V.apply(this,arguments)},Q)},count:function(C){var V=0;return N(C,function(){V++}),V},toArray:function(C){return N(C,function(V){return V})||[]},only:function(C){if(!Z(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},vt.Component=x,vt.Fragment=i,vt.Profiler=r,vt.PureComponent=O,vt.StrictMode=n,vt.Suspense=d,vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,vt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return D.H.useMemoCache(C)}},vt.cache=function(C){return function(){return C.apply(null,arguments)}},vt.cloneElement=function(C,V,Q){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var Y=w({},C.props),$=C.key,nt=void 0;if(V!=null)for(st in V.ref!==void 0&&(nt=void 0),V.key!==void 0&&($=""+V.key),V)!I.call(V,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&V.ref===void 0||(Y[st]=V[st]);var st=arguments.length-2;if(st===1)Y.children=Q;else if(1<st){for(var pt=Array(st),yt=0;yt<st;yt++)pt[yt]=arguments[yt+2];Y.children=pt}return j(C.type,$,void 0,void 0,nt,Y)},vt.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:o,_context:C},C},vt.createElement=function(C,V,Q){var Y,$={},nt=null;if(V!=null)for(Y in V.key!==void 0&&(nt=""+V.key),V)I.call(V,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&($[Y]=V[Y]);var st=arguments.length-2;if(st===1)$.children=Q;else if(1<st){for(var pt=Array(st),yt=0;yt<st;yt++)pt[yt]=arguments[yt+2];$.children=pt}if(C&&C.defaultProps)for(Y in st=C.defaultProps,st)$[Y]===void 0&&($[Y]=st[Y]);return j(C,nt,void 0,void 0,null,$)},vt.createRef=function(){return{current:null}},vt.forwardRef=function(C){return{$$typeof:u,render:C}},vt.isValidElement=Z,vt.lazy=function(C){return{$$typeof:p,_payload:{_status:-1,_result:C},_init:U}},vt.memo=function(C,V){return{$$typeof:f,type:C,compare:V===void 0?null:V}},vt.startTransition=function(C){var V=D.T,Q={};D.T=Q;try{var Y=C(),$=D.S;$!==null&&$(Q,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(St,et)}catch(nt){et(nt)}finally{D.T=V}},vt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},vt.use=function(C){return D.H.use(C)},vt.useActionState=function(C,V,Q){return D.H.useActionState(C,V,Q)},vt.useCallback=function(C,V){return D.H.useCallback(C,V)},vt.useContext=function(C){return D.H.useContext(C)},vt.useDebugValue=function(){},vt.useDeferredValue=function(C,V){return D.H.useDeferredValue(C,V)},vt.useEffect=function(C,V,Q){var Y=D.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(C,V)},vt.useId=function(){return D.H.useId()},vt.useImperativeHandle=function(C,V,Q){return D.H.useImperativeHandle(C,V,Q)},vt.useInsertionEffect=function(C,V){return D.H.useInsertionEffect(C,V)},vt.useLayoutEffect=function(C,V){return D.H.useLayoutEffect(C,V)},vt.useMemo=function(C,V){return D.H.useMemo(C,V)},vt.useOptimistic=function(C,V){return D.H.useOptimistic(C,V)},vt.useReducer=function(C,V,Q){return D.H.useReducer(C,V,Q)},vt.useRef=function(C){return D.H.useRef(C)},vt.useState=function(C){return D.H.useState(C)},vt.useSyncExternalStore=function(C,V,Q){return D.H.useSyncExternalStore(C,V,Q)},vt.useTransition=function(){return D.H.useTransition()},vt.version="19.1.1",vt}var Hg;function wu(){return Hg||(Hg=1,Jc.exports=gb()),Jc.exports}var be=wu(),tu={exports:{}},Ha={},eu={exports:{}},iu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function pb(){return Ig||(Ig=1,function(m){function t(N,U){var et=N.length;N.push(U);t:for(;0<et;){var St=et-1>>>1,C=N[St];if(0<r(C,U))N[St]=U,N[et]=C,et=St;else break t}}function i(N){return N.length===0?null:N[0]}function n(N){if(N.length===0)return null;var U=N[0],et=N.pop();if(et!==U){N[0]=et;t:for(var St=0,C=N.length,V=C>>>1;St<V;){var Q=2*(St+1)-1,Y=N[Q],$=Q+1,nt=N[$];if(0>r(Y,et))$<C&&0>r(nt,Y)?(N[St]=nt,N[$]=et,St=$):(N[St]=Y,N[Q]=et,St=Q);else if($<C&&0>r(nt,et))N[St]=nt,N[$]=et,St=$;else break t}}return U}function r(N,U){var et=N.sortIndex-U.sortIndex;return et!==0?et:N.id-U.id}if(m.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;m.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();m.unstable_now=function(){return c.now()-u}}var d=[],f=[],p=1,b=null,y=3,A=!1,w=!1,_=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function k(N){for(var U=i(f);U!==null;){if(U.callback===null)n(f);else if(U.startTime<=N)n(f),U.sortIndex=U.expirationTime,t(d,U);else break;U=i(f)}}function D(N){if(_=!1,k(N),!w)if(i(d)!==null)w=!0,I||(I=!0,ot());else{var U=i(f);U!==null&&dt(D,U.startTime-N)}}var I=!1,j=-1,K=5,Z=-1;function tt(){return x?!0:!(m.unstable_now()-Z<K)}function W(){if(x=!1,I){var N=m.unstable_now();Z=N;var U=!0;try{t:{w=!1,_&&(_=!1,O(j),j=-1),A=!0;var et=y;try{e:{for(k(N),b=i(d);b!==null&&!(b.expirationTime>N&&tt());){var St=b.callback;if(typeof St=="function"){b.callback=null,y=b.priorityLevel;var C=St(b.expirationTime<=N);if(N=m.unstable_now(),typeof C=="function"){b.callback=C,k(N),U=!0;break e}b===i(d)&&n(d),k(N)}else n(d);b=i(d)}if(b!==null)U=!0;else{var V=i(f);V!==null&&dt(D,V.startTime-N),U=!1}}break t}finally{b=null,y=et,A=!1}U=void 0}}finally{U?ot():I=!1}}}var ot;if(typeof M=="function")ot=function(){M(W)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,gt=At.port2;At.port1.onmessage=W,ot=function(){gt.postMessage(null)}}else ot=function(){E(W,0)};function dt(N,U){j=E(function(){N(m.unstable_now())},U)}m.unstable_IdlePriority=5,m.unstable_ImmediatePriority=1,m.unstable_LowPriority=4,m.unstable_NormalPriority=3,m.unstable_Profiling=null,m.unstable_UserBlockingPriority=2,m.unstable_cancelCallback=function(N){N.callback=null},m.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<N?Math.floor(1e3/N):5},m.unstable_getCurrentPriorityLevel=function(){return y},m.unstable_next=function(N){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var et=y;y=U;try{return N()}finally{y=et}},m.unstable_requestPaint=function(){x=!0},m.unstable_runWithPriority=function(N,U){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var et=y;y=N;try{return U()}finally{y=et}},m.unstable_scheduleCallback=function(N,U,et){var St=m.unstable_now();switch(typeof et=="object"&&et!==null?(et=et.delay,et=typeof et=="number"&&0<et?St+et:St):et=St,N){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=et+C,N={id:p++,callback:U,priorityLevel:N,startTime:et,expirationTime:C,sortIndex:-1},et>St?(N.sortIndex=et,t(f,N),i(d)===null&&N===i(f)&&(_?(O(j),j=-1):_=!0,dt(D,et-St))):(N.sortIndex=C,t(d,N),w||A||(w=!0,I||(I=!0,ot()))),N},m.unstable_shouldYield=tt,m.unstable_wrapCallback=function(N){var U=y;return function(){var et=y;y=U;try{return N.apply(this,arguments)}finally{y=et}}}}(iu)),iu}var jg;function mb(){return jg||(jg=1,eu.exports=pb()),eu.exports}var su={exports:{}},we={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function bb(){if(Ug)return we;Ug=1;var m=wu();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:d,containerInfo:f,implementation:p}}var c=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return we.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,we.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,p)},we.flushSync=function(d){var f=c.T,p=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=p,n.d.f()}},we.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},we.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},we.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,b=u(p,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:y,fetchPriority:A}):p==="script"&&n.d.X(d,{crossOrigin:b,integrity:y,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},we.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},we.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,b=u(p,f.crossOrigin);n.d.L(d,p,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},we.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=u(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},we.requestFormReset=function(d){n.d.r(d)},we.unstable_batchedUpdates=function(d,f){return d(f)},we.useFormState=function(d,f,p){return c.H.useFormState(d,f,p)},we.useFormStatus=function(){return c.H.useHostTransitionStatus()},we.version="19.1.1",we}var Fg;function yb(){if(Fg)return su.exports;Fg=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(t){console.error(t)}}return m(),su.exports=bb(),su.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gg;function vb(){if(Gg)return Ha;Gg=1;var m=mb(),t=wu(),i=yb();function n(e){var s="https://react.dev/errors/"+e;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var s=e,a=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,(s.flags&4098)!==0&&(a=s.return),e=s.return;while(e)}return s.tag===3?a:null}function c(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function u(e){if(o(e)!==e)throw Error(n(188))}function d(e){var s=e.alternate;if(!s){if(s=o(e),s===null)throw Error(n(188));return s!==e?null:e}for(var a=e,l=s;;){var h=a.return;if(h===null)break;var g=h.alternate;if(g===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===a)return u(h),e;if(g===l)return u(h),s;g=g.sibling}throw Error(n(188))}if(a.return!==l.return)a=h,l=g;else{for(var v=!1,S=h.child;S;){if(S===a){v=!0,a=h,l=g;break}if(S===l){v=!0,l=h,a=g;break}S=S.sibling}if(!v){for(S=g.child;S;){if(S===a){v=!0,a=g,l=h;break}if(S===l){v=!0,l=g,a=h;break}S=S.sibling}if(!v)throw Error(n(189))}}if(a.alternate!==l)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?e:s}function f(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e;for(e=e.child;e!==null;){if(s=f(e),s!==null)return s;e=e.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ot(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var At=Symbol.for("react.client.reference");function gt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===At?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case x:return"Profiler";case _:return"StrictMode";case D:return"Suspense";case I:return"SuspenseList";case Z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case M:return(e.displayName||"Context")+".Provider";case O:return(e._context.displayName||"Context")+".Consumer";case k:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case j:return s=e.displayName||null,s!==null?s:gt(e.type)||"Memo";case K:s=e._payload,e=e._init;try{return gt(e(s))}catch{}}return null}var dt=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et={pending:!1,data:null,method:null,action:null},St=[],C=-1;function V(e){return{current:e}}function Q(e){0>C||(e.current=St[C],St[C]=null,C--)}function Y(e,s){C++,St[C]=e.current,e.current=s}var $=V(null),nt=V(null),st=V(null),pt=V(null);function yt(e,s){switch(Y(st,s),Y(nt,e),Y($,null),s.nodeType){case 9:case 11:e=(e=s.documentElement)&&(e=e.namespaceURI)?lg(e):0;break;default:if(e=s.tagName,s=s.namespaceURI)s=lg(s),e=og(s,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q($),Y($,e)}function jt(){Q($),Q(nt),Q(st)}function Wt(e){e.memoizedState!==null&&Y(pt,e);var s=$.current,a=og(s,e.type);s!==a&&(Y(nt,e),Y($,a))}function Jt(e){nt.current===e&&(Q($),Q(nt)),pt.current===e&&(Q(pt),Oa._currentValue=et)}var De=Object.prototype.hasOwnProperty,di=m.unstable_scheduleCallback,Ti=m.unstable_cancelCallback,fi=m.unstable_shouldYield,fe=m.unstable_requestPaint,Lt=m.unstable_now,Xp=m.unstable_getCurrentPriorityLevel,ju=m.unstable_ImmediatePriority,Uu=m.unstable_UserBlockingPriority,ir=m.unstable_NormalPriority,Yp=m.unstable_LowPriority,Fu=m.unstable_IdlePriority,$p=m.log,Kp=m.unstable_setDisableYieldValue,jn=null,Ie=null;function Vi(e){if(typeof $p=="function"&&Kp(e),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(jn,e)}catch{}}var je=Math.clz32?Math.clz32:Wp,Qp=Math.log,Zp=Math.LN2;function Wp(e){return e>>>=0,e===0?32:31-(Qp(e)/Zp|0)|0}var sr=256,nr=4194304;function vs(e){var s=e&42;if(s!==0)return s;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ar(e,s,a){var l=e.pendingLanes;if(l===0)return 0;var h=0,g=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var S=l&134217727;return S!==0?(l=S&~g,l!==0?h=vs(l):(v&=S,v!==0?h=vs(v):a||(a=S&~e,a!==0&&(h=vs(a))))):(S=l&~g,S!==0?h=vs(S):v!==0?h=vs(v):a||(a=l&~e,a!==0&&(h=vs(a)))),h===0?0:s!==0&&s!==h&&(s&g)===0&&(g=h&-h,a=s&-s,g>=a||g===32&&(a&4194048)!==0)?s:h}function Un(e,s){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&s)===0}function Jp(e,s){switch(e){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gu(){var e=sr;return sr<<=1,(sr&4194048)===0&&(sr=256),e}function qu(){var e=nr;return nr<<=1,(nr&62914560)===0&&(nr=4194304),e}function Il(e){for(var s=[],a=0;31>a;a++)s.push(e);return s}function Fn(e,s){e.pendingLanes|=s,s!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tm(e,s,a,l,h,g){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var S=e.entanglements,T=e.expirationTimes,P=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-je(a),X=1<<G;S[G]=0,T[G]=-1;var B=P[G];if(B!==null)for(P[G]=null,G=0;G<B.length;G++){var H=B[G];H!==null&&(H.lane&=-536870913)}a&=~X}l!==0&&Vu(e,l,0),g!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=g&~(v&~s))}function Vu(e,s,a){e.pendingLanes|=s,e.suspendedLanes&=~s;var l=31-je(s);e.entangledLanes|=s,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Xu(e,s){var a=e.entangledLanes|=s;for(e=e.entanglements;a;){var l=31-je(a),h=1<<l;h&s|e[l]&s&&(e[l]|=s),a&=~h}}function jl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ul(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Yu(){var e=U.p;return e!==0?e:(e=window.event,e===void 0?32:Cg(e.type))}function em(e,s){var a=U.p;try{return U.p=e,s()}finally{U.p=a}}var Xi=Math.random().toString(36).slice(2),Se="__reactFiber$"+Xi,Ne="__reactProps$"+Xi,Vs="__reactContainer$"+Xi,Fl="__reactEvents$"+Xi,im="__reactListeners$"+Xi,sm="__reactHandles$"+Xi,$u="__reactResources$"+Xi,Gn="__reactMarker$"+Xi;function Gl(e){delete e[Se],delete e[Ne],delete e[Fl],delete e[im],delete e[sm]}function Xs(e){var s=e[Se];if(s)return s;for(var a=e.parentNode;a;){if(s=a[Vs]||a[Se]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(e=dg(e);e!==null;){if(a=e[Se])return a;e=dg(e)}return s}e=a,a=e.parentNode}return null}function Ys(e){if(e=e[Se]||e[Vs]){var s=e.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return e}return null}function qn(e){var s=e.tag;if(s===5||s===26||s===27||s===6)return e.stateNode;throw Error(n(33))}function $s(e){var s=e[$u];return s||(s=e[$u]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ce(e){e[Gn]=!0}var Ku=new Set,Qu={};function As(e,s){Ks(e,s),Ks(e+"Capture",s)}function Ks(e,s){for(Qu[e]=s,e=0;e<s.length;e++)Ku.add(s[e])}var nm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zu={},Wu={};function am(e){return De.call(Wu,e)?!0:De.call(Zu,e)?!1:nm.test(e)?Wu[e]=!0:(Zu[e]=!0,!1)}function rr(e,s,a){if(am(s))if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(s);return}}e.setAttribute(s,""+a)}}function lr(e,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttribute(s,""+a)}}function Ci(e,s,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(s,a,""+l)}}var ql,Ju;function Qs(e){if(ql===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ql=s&&s[1]||"",Ju=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ql+e+Ju}var Vl=!1;function Xl(e,s){if(!e||Vl)return"";Vl=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(H){var B=H}Reflect.construct(e,[],X)}else{try{X.call()}catch(H){B=H}e.call(X.prototype)}}else{try{throw Error()}catch(H){B=H}(X=e())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(H){if(H&&B&&typeof H.stack=="string")return[H.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=l.DetermineComponentFrameRoot(),v=g[0],S=g[1];if(v&&S){var T=v.split(`
`),P=S.split(`
`);for(h=l=0;l<T.length&&!T[l].includes("DetermineComponentFrameRoot");)l++;for(;h<P.length&&!P[h].includes("DetermineComponentFrameRoot");)h++;if(l===T.length||h===P.length)for(l=T.length-1,h=P.length-1;1<=l&&0<=h&&T[l]!==P[h];)h--;for(;1<=l&&0<=h;l--,h--)if(T[l]!==P[h]){if(l!==1||h!==1)do if(l--,h--,0>h||T[l]!==P[h]){var G=`
`+T[l].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=l&&0<=h);break}}}finally{Vl=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Qs(a):""}function rm(e){switch(e.tag){case 26:case 27:case 5:return Qs(e.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 15:return Xl(e.type,!1);case 11:return Xl(e.type.render,!1);case 1:return Xl(e.type,!0);case 31:return Qs("Activity");default:return""}}function th(e){try{var s="";do s+=rm(e),e=e.return;while(e);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Qe(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eh(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function lm(e){var s=eh(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),l=""+e[s];if(!e.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,g=a.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,g.call(this,v)}}),Object.defineProperty(e,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function or(e){e._valueTracker||(e._valueTracker=lm(e))}function ih(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return e&&(l=eh(e)?e.checked?"true":"false":e.value),e=l,e!==a?(s.setValue(e),!0):!1}function cr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var om=/[\n"\\]/g;function Ze(e){return e.replace(om,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Yl(e,s,a,l,h,g,v,S){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),s!=null?v==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+Qe(s)):e.value!==""+Qe(s)&&(e.value=""+Qe(s)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),s!=null?$l(e,v,Qe(s)):a!=null?$l(e,v,Qe(a)):l!=null&&e.removeAttribute("value"),h==null&&g!=null&&(e.defaultChecked=!!g),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Qe(S):e.removeAttribute("name")}function sh(e,s,a,l,h,g,v,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),s!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;a=a!=null?""+Qe(a):"",s=s!=null?""+Qe(s):a,S||s===e.value||(e.value=s),e.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=S?e.checked:!!l,e.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function $l(e,s,a){s==="number"&&cr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Zs(e,s,a,l){if(e=e.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<e.length;a++)h=s.hasOwnProperty("$"+e[a].value),e[a].selected!==h&&(e[a].selected=h),h&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Qe(a),s=null,h=0;h<e.length;h++){if(e[h].value===a){e[h].selected=!0,l&&(e[h].defaultSelected=!0);return}s!==null||e[h].disabled||(s=e[h])}s!==null&&(s.selected=!0)}}function nh(e,s,a){if(s!=null&&(s=""+Qe(s),s!==e.value&&(e.value=s),a==null)){e.defaultValue!==s&&(e.defaultValue=s);return}e.defaultValue=a!=null?""+Qe(a):""}function ah(e,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(n(92));if(dt(l)){if(1<l.length)throw Error(n(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Qe(s),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Ws(e,s){if(s){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=s;return}}e.textContent=s}var cm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rh(e,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="":l?e.setProperty(s,a):typeof a!="number"||a===0||cm.has(s)?s==="float"?e.cssFloat=a:e[s]=(""+a).trim():e[s]=a+"px"}function lh(e,s,a){if(s!=null&&typeof s!="object")throw Error(n(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&rh(e,h,l)}else for(var g in s)s.hasOwnProperty(g)&&rh(e,g,s[g])}function Kl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var um=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ur(e){return hm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ql=null;function Zl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Js=null,tn=null;function oh(e){var s=Ys(e);if(s&&(e=s.stateNode)){var a=e[Ne]||null;t:switch(e=s.stateNode,s.type){case"input":if(Yl(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ze(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==e&&l.form===e.form){var h=l[Ne]||null;if(!h)throw Error(n(90));Yl(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===e.form&&ih(l)}break t;case"textarea":nh(e,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Zs(e,!!a.multiple,s,!1)}}}var Wl=!1;function ch(e,s,a){if(Wl)return e(s,a);Wl=!0;try{var l=e(s);return l}finally{if(Wl=!1,(Js!==null||tn!==null)&&(Kr(),Js&&(s=Js,e=tn,tn=Js=null,oh(s),e)))for(s=0;s<e.length;s++)oh(e[s])}}function Vn(e,s){var a=e.stateNode;if(a===null)return null;var l=a[Ne]||null;if(l===null)return null;a=l[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(n(231,s,typeof a));return a}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=!1;if(Mi)try{var Xn={};Object.defineProperty(Xn,"passive",{get:function(){Jl=!0}}),window.addEventListener("test",Xn,Xn),window.removeEventListener("test",Xn,Xn)}catch{Jl=!1}var Yi=null,to=null,hr=null;function uh(){if(hr)return hr;var e,s=to,a=s.length,l,h="value"in Yi?Yi.value:Yi.textContent,g=h.length;for(e=0;e<a&&s[e]===h[e];e++);var v=a-e;for(l=1;l<=v&&s[a-l]===h[g-l];l++);return hr=h.slice(e,1<l?1-l:void 0)}function dr(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function fr(){return!0}function hh(){return!1}function Oe(e){function s(a,l,h,g,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(a=e[S],this[S]=a?a(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?fr:hh,this.isPropagationStopped=hh,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),s}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gr=Oe(Ss),Yn=p({},Ss,{view:0,detail:0}),dm=Oe(Yn),eo,io,$n,pr=p({},Yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:no,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$n&&($n&&e.type==="mousemove"?(eo=e.screenX-$n.screenX,io=e.screenY-$n.screenY):io=eo=0,$n=e),eo)},movementY:function(e){return"movementY"in e?e.movementY:io}}),dh=Oe(pr),fm=p({},pr,{dataTransfer:0}),gm=Oe(fm),pm=p({},Yn,{relatedTarget:0}),so=Oe(pm),mm=p({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),bm=Oe(mm),ym=p({},Ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vm=Oe(ym),Am=p({},Ss,{data:0}),fh=Oe(Am),Sm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Em(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=wm[e])?!!s[e]:!1}function no(){return Em}var xm=p({},Yn,{key:function(e){if(e.key){var s=Sm[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=dr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_m[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:no,charCode:function(e){return e.type==="keypress"?dr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Tm=Oe(xm),Cm=p({},pr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gh=Oe(Cm),Mm=p({},Yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:no}),Rm=Oe(Mm),Dm=p({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nm=Oe(Dm),Om=p({},pr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lm=Oe(Om),km=p({},Ss,{newState:0,oldState:0}),zm=Oe(km),Pm=[9,13,27,32],ao=Mi&&"CompositionEvent"in window,Kn=null;Mi&&"documentMode"in document&&(Kn=document.documentMode);var Bm=Mi&&"TextEvent"in window&&!Kn,ph=Mi&&(!ao||Kn&&8<Kn&&11>=Kn),mh=" ",bh=!1;function yh(e,s){switch(e){case"keyup":return Pm.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var en=!1;function Hm(e,s){switch(e){case"compositionend":return vh(s);case"keypress":return s.which!==32?null:(bh=!0,mh);case"textInput":return e=s.data,e===mh&&bh?null:e;default:return null}}function Im(e,s){if(en)return e==="compositionend"||!ao&&yh(e,s)?(e=uh(),hr=to=Yi=null,en=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ph&&s.locale!=="ko"?null:s.data;default:return null}}var jm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ah(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!jm[e.type]:s==="textarea"}function Sh(e,s,a,l){Js?tn?tn.push(l):tn=[l]:Js=l,s=el(s,"onChange"),0<s.length&&(a=new gr("onChange","change",null,a,l),e.push({event:a,listeners:s}))}var Qn=null,Zn=null;function Um(e){ig(e,0)}function mr(e){var s=qn(e);if(ih(s))return e}function _h(e,s){if(e==="change")return s}var wh=!1;if(Mi){var ro;if(Mi){var lo="oninput"in document;if(!lo){var Eh=document.createElement("div");Eh.setAttribute("oninput","return;"),lo=typeof Eh.oninput=="function"}ro=lo}else ro=!1;wh=ro&&(!document.documentMode||9<document.documentMode)}function xh(){Qn&&(Qn.detachEvent("onpropertychange",Th),Zn=Qn=null)}function Th(e){if(e.propertyName==="value"&&mr(Zn)){var s=[];Sh(s,Zn,e,Zl(e)),ch(Um,s)}}function Fm(e,s,a){e==="focusin"?(xh(),Qn=s,Zn=a,Qn.attachEvent("onpropertychange",Th)):e==="focusout"&&xh()}function Gm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mr(Zn)}function qm(e,s){if(e==="click")return mr(s)}function Vm(e,s){if(e==="input"||e==="change")return mr(s)}function Xm(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var Ue=typeof Object.is=="function"?Object.is:Xm;function Wn(e,s){if(Ue(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var a=Object.keys(e),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!De.call(s,h)||!Ue(e[h],s[h]))return!1}return!0}function Ch(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mh(e,s){var a=Ch(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=s&&l>=s)return{node:a,offset:s-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Ch(a)}}function Rh(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Rh(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Dh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var s=cr(e.document);s instanceof e.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)e=s.contentWindow;else break;s=cr(e.document)}return s}function oo(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}var Ym=Mi&&"documentMode"in document&&11>=document.documentMode,sn=null,co=null,Jn=null,uo=!1;function Nh(e,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;uo||sn==null||sn!==cr(l)||(l=sn,"selectionStart"in l&&oo(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Jn&&Wn(Jn,l)||(Jn=l,l=el(co,"onSelect"),0<l.length&&(s=new gr("onSelect","select",null,s,a),e.push({event:s,listeners:l}),s.target=sn)))}function _s(e,s){var a={};return a[e.toLowerCase()]=s.toLowerCase(),a["Webkit"+e]="webkit"+s,a["Moz"+e]="moz"+s,a}var nn={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionrun:_s("Transition","TransitionRun"),transitionstart:_s("Transition","TransitionStart"),transitioncancel:_s("Transition","TransitionCancel"),transitionend:_s("Transition","TransitionEnd")},ho={},Oh={};Mi&&(Oh=document.createElement("div").style,"AnimationEvent"in window||(delete nn.animationend.animation,delete nn.animationiteration.animation,delete nn.animationstart.animation),"TransitionEvent"in window||delete nn.transitionend.transition);function ws(e){if(ho[e])return ho[e];if(!nn[e])return e;var s=nn[e],a;for(a in s)if(s.hasOwnProperty(a)&&a in Oh)return ho[e]=s[a];return e}var Lh=ws("animationend"),kh=ws("animationiteration"),zh=ws("animationstart"),$m=ws("transitionrun"),Km=ws("transitionstart"),Qm=ws("transitioncancel"),Ph=ws("transitionend"),Bh=new Map,fo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fo.push("scrollEnd");function oi(e,s){Bh.set(e,s),As(s,[e])}var Hh=new WeakMap;function We(e,s){if(typeof e=="object"&&e!==null){var a=Hh.get(e);return a!==void 0?a:(s={value:e,source:s,stack:th(s)},Hh.set(e,s),s)}return{value:e,source:s,stack:th(s)}}var Je=[],an=0,go=0;function br(){for(var e=an,s=go=an=0;s<e;){var a=Je[s];Je[s++]=null;var l=Je[s];Je[s++]=null;var h=Je[s];Je[s++]=null;var g=Je[s];if(Je[s++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}g!==0&&Ih(a,h,g)}}function yr(e,s,a,l){Je[an++]=e,Je[an++]=s,Je[an++]=a,Je[an++]=l,go|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function po(e,s,a,l){return yr(e,s,a,l),vr(e)}function rn(e,s){return yr(e,null,null,s),vr(e)}function Ih(e,s,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var h=!1,g=e.return;g!==null;)g.childLanes|=a,l=g.alternate,l!==null&&(l.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(h=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,h&&s!==null&&(h=31-je(a),e=g.hiddenUpdates,l=e[h],l===null?e[h]=[s]:l.push(s),s.lane=a|536870912),g):null}function vr(e){if(50<Ea)throw Ea=0,Sc=null,Error(n(185));for(var s=e.return;s!==null;)e=s,s=e.return;return e.tag===3?e.stateNode:null}var ln={};function Zm(e,s,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fe(e,s,a,l){return new Zm(e,s,a,l)}function mo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ri(e,s){var a=e.alternate;return a===null?(a=Fe(e.tag,s,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=s,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function jh(e,s){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=s,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,s=a.dependencies,e.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),e}function Ar(e,s,a,l,h,g){var v=0;if(l=e,typeof e=="function")mo(e)&&(v=1);else if(typeof e=="string")v=J0(e,a,$.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Z:return e=Fe(31,a,s,h),e.elementType=Z,e.lanes=g,e;case w:return Es(a.children,h,g,s);case _:v=8,h|=24;break;case x:return e=Fe(12,a,s,h|2),e.elementType=x,e.lanes=g,e;case D:return e=Fe(13,a,s,h),e.elementType=D,e.lanes=g,e;case I:return e=Fe(19,a,s,h),e.elementType=I,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case E:case M:v=10;break t;case O:v=9;break t;case k:v=11;break t;case j:v=14;break t;case K:v=16,l=null;break t}v=29,a=Error(n(130,e===null?"null":typeof e,"")),l=null}return s=Fe(v,a,s,h),s.elementType=e,s.type=l,s.lanes=g,s}function Es(e,s,a,l){return e=Fe(7,e,l,s),e.lanes=a,e}function bo(e,s,a){return e=Fe(6,e,null,s),e.lanes=a,e}function yo(e,s,a){return s=Fe(4,e.children!==null?e.children:[],e.key,s),s.lanes=a,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}var on=[],cn=0,Sr=null,_r=0,ti=[],ei=0,xs=null,Di=1,Ni="";function Ts(e,s){on[cn++]=_r,on[cn++]=Sr,Sr=e,_r=s}function Uh(e,s,a){ti[ei++]=Di,ti[ei++]=Ni,ti[ei++]=xs,xs=e;var l=Di;e=Ni;var h=32-je(l)-1;l&=~(1<<h),a+=1;var g=32-je(s)+h;if(30<g){var v=h-h%5;g=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Di=1<<32-je(s)+h|a<<h|l,Ni=g+e}else Di=1<<g|a<<h|l,Ni=e}function vo(e){e.return!==null&&(Ts(e,1),Uh(e,1,0))}function Ao(e){for(;e===Sr;)Sr=on[--cn],on[cn]=null,_r=on[--cn],on[cn]=null;for(;e===xs;)xs=ti[--ei],ti[ei]=null,Ni=ti[--ei],ti[ei]=null,Di=ti[--ei],ti[ei]=null}var xe=null,Xt=null,Dt=!1,Cs=null,gi=!1,So=Error(n(519));function Ms(e){var s=Error(n(418,""));throw ia(We(s,e)),So}function Fh(e){var s=e.stateNode,a=e.type,l=e.memoizedProps;switch(s[Se]=e,s[Ne]=l,a){case"dialog":Tt("cancel",s),Tt("close",s);break;case"iframe":case"object":case"embed":Tt("load",s);break;case"video":case"audio":for(a=0;a<Ta.length;a++)Tt(Ta[a],s);break;case"source":Tt("error",s);break;case"img":case"image":case"link":Tt("error",s),Tt("load",s);break;case"details":Tt("toggle",s);break;case"input":Tt("invalid",s),sh(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),or(s);break;case"select":Tt("invalid",s);break;case"textarea":Tt("invalid",s),ah(s,l.value,l.defaultValue,l.children),or(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||rg(s.textContent,a)?(l.popover!=null&&(Tt("beforetoggle",s),Tt("toggle",s)),l.onScroll!=null&&Tt("scroll",s),l.onScrollEnd!=null&&Tt("scrollend",s),l.onClick!=null&&(s.onclick=il),s=!0):s=!1,s||Ms(e)}function Gh(e){for(xe=e.return;xe;)switch(xe.tag){case 5:case 13:gi=!1;return;case 27:case 3:gi=!0;return;default:xe=xe.return}}function ta(e){if(e!==xe)return!1;if(!Dt)return Gh(e),Dt=!0,!1;var s=e.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Bc(e.type,e.memoizedProps)),a=!a),a&&Xt&&Ms(e),Gh(e),s===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));t:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(s===0){Xt=ui(e.nextSibling);break t}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;e=e.nextSibling}Xt=null}}else s===27?(s=Xt,cs(e.type)?(e=Uc,Uc=null,Xt=e):Xt=s):Xt=xe?ui(e.stateNode.nextSibling):null;return!0}function ea(){Xt=xe=null,Dt=!1}function qh(){var e=Cs;return e!==null&&(ze===null?ze=e:ze.push.apply(ze,e),Cs=null),e}function ia(e){Cs===null?Cs=[e]:Cs.push(e)}var _o=V(null),Rs=null,Oi=null;function $i(e,s,a){Y(_o,s._currentValue),s._currentValue=a}function Li(e){e._currentValue=_o.current,Q(_o)}function wo(e,s,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),e===a)break;e=e.return}}function Eo(e,s,a,l){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){var v=h.child;g=g.firstContext;t:for(;g!==null;){var S=g;g=h;for(var T=0;T<s.length;T++)if(S.context===s[T]){g.lanes|=a,S=g.alternate,S!==null&&(S.lanes|=a),wo(g.return,a,e),l||(v=null);break t}g=S.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(n(341));v.lanes|=a,g=v.alternate,g!==null&&(g.lanes|=a),wo(v,a,e),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===e){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function sa(e,s,a,l){e=null;for(var h=s,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(n(387));if(v=v.memoizedProps,v!==null){var S=h.type;Ue(h.pendingProps.value,v.value)||(e!==null?e.push(S):e=[S])}}else if(h===pt.current){if(v=h.alternate,v===null)throw Error(n(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Oa):e=[Oa])}h=h.return}e!==null&&Eo(s,e,a,l),s.flags|=262144}function wr(e){for(e=e.firstContext;e!==null;){if(!Ue(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ds(e){Rs=e,Oi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _e(e){return Vh(Rs,e)}function Er(e,s){return Rs===null&&Ds(e),Vh(e,s)}function Vh(e,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Oi===null){if(e===null)throw Error(n(308));Oi=s,e.dependencies={lanes:0,firstContext:s},e.flags|=524288}else Oi=Oi.next=s;return a}var Wm=typeof AbortController<"u"?AbortController:function(){var e=[],s=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){s.aborted=!0,e.forEach(function(a){return a()})}},Jm=m.unstable_scheduleCallback,t0=m.unstable_NormalPriority,re={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xo(){return{controller:new Wm,data:new Map,refCount:0}}function na(e){e.refCount--,e.refCount===0&&Jm(t0,function(){e.controller.abort()})}var aa=null,To=0,un=0,hn=null;function e0(e,s){if(aa===null){var a=aa=[];To=0,un=Mc(),hn={status:"pending",value:void 0,then:function(l){a.push(l)}}}return To++,s.then(Xh,Xh),s}function Xh(){if(--To===0&&aa!==null){hn!==null&&(hn.status="fulfilled");var e=aa;aa=null,un=0,hn=null;for(var s=0;s<e.length;s++)(0,e[s])()}}function i0(e,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return e.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Yh=N.S;N.S=function(e,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&e0(e,s),Yh!==null&&Yh(e,s)};var Ns=V(null);function Co(){var e=Ns.current;return e!==null?e:It.pooledCache}function xr(e,s){s===null?Y(Ns,Ns.current):Y(Ns,s.pool)}function $h(){var e=Co();return e===null?null:{parent:re._currentValue,pool:e}}var ra=Error(n(460)),Kh=Error(n(474)),Tr=Error(n(542)),Mo={then:function(){}};function Qh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Cr(){}function Zh(e,s,a){switch(a=e[a],a===void 0?e.push(s):a!==s&&(s.then(Cr,Cr),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Jh(e),e;default:if(typeof s.status=="string")s.then(Cr,Cr);else{if(e=It,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=s,e.status="pending",e.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw e=s.reason,Jh(e),e}throw la=s,ra}}var la=null;function Wh(){if(la===null)throw Error(n(459));var e=la;return la=null,e}function Jh(e){if(e===ra||e===Tr)throw Error(n(483))}var Ki=!1;function Ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Do(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Qi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Zi(e,s,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Nt&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=vr(e),Ih(e,null,a),s}return yr(e,l,s,a),vr(e)}function oa(e,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,Xu(e,a)}}function No(e,s){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?h=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?h=g=s:g=g.next=s}else h=g=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=s:e.next=s,a.lastBaseUpdate=s}var Oo=!1;function ca(){if(Oo){var e=hn;if(e!==null)throw e}}function ua(e,s,a,l){Oo=!1;var h=e.updateQueue;Ki=!1;var g=h.firstBaseUpdate,v=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var T=S,P=T.next;T.next=null,v===null?g=P:v.next=P,v=T;var G=e.alternate;G!==null&&(G=G.updateQueue,S=G.lastBaseUpdate,S!==v&&(S===null?G.firstBaseUpdate=P:S.next=P,G.lastBaseUpdate=T))}if(g!==null){var X=h.baseState;v=0,G=P=T=null,S=g;do{var B=S.lane&-536870913,H=B!==S.lane;if(H?(Mt&B)===B:(l&B)===B){B!==0&&B===un&&(Oo=!0),G!==null&&(G=G.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});t:{var ft=e,ct=S;B=s;var Pt=a;switch(ct.tag){case 1:if(ft=ct.payload,typeof ft=="function"){X=ft.call(Pt,X,B);break t}X=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=ct.payload,B=typeof ft=="function"?ft.call(Pt,X,B):ft,B==null)break t;X=p({},X,B);break t;case 2:Ki=!0}}B=S.callback,B!==null&&(e.flags|=64,H&&(e.flags|=8192),H=h.callbacks,H===null?h.callbacks=[B]:H.push(B))}else H={lane:B,tag:S.tag,payload:S.payload,callback:S.callback,next:null},G===null?(P=G=H,T=X):G=G.next=H,v|=B;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;H=S,S=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);G===null&&(T=X),h.baseState=T,h.firstBaseUpdate=P,h.lastBaseUpdate=G,g===null&&(h.shared.lanes=0),as|=v,e.lanes=v,e.memoizedState=X}}function td(e,s){if(typeof e!="function")throw Error(n(191,e));e.call(s)}function ed(e,s){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)td(a[e],s)}var dn=V(null),Mr=V(0);function id(e,s){e=ji,Y(Mr,e),Y(dn,s),ji=e|s.baseLanes}function Lo(){Y(Mr,ji),Y(dn,dn.current)}function ko(){ji=Mr.current,Q(dn),Q(Mr)}var Wi=0,_t=null,kt=null,te=null,Rr=!1,fn=!1,Os=!1,Dr=0,ha=0,gn=null,s0=0;function $t(){throw Error(n(321))}function zo(e,s){if(s===null)return!1;for(var a=0;a<s.length&&a<e.length;a++)if(!Ue(e[a],s[a]))return!1;return!0}function Po(e,s,a,l,h,g){return Wi=g,_t=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,N.H=e===null||e.memoizedState===null?Id:jd,Os=!1,g=a(l,h),Os=!1,fn&&(g=nd(s,a,l,h)),sd(e),g}function sd(e){N.H=Pr;var s=kt!==null&&kt.next!==null;if(Wi=0,te=kt=_t=null,Rr=!1,ha=0,gn=null,s)throw Error(n(300));e===null||ue||(e=e.dependencies,e!==null&&wr(e)&&(ue=!0))}function nd(e,s,a,l){_t=e;var h=0;do{if(fn&&(gn=null),ha=0,fn=!1,25<=h)throw Error(n(301));if(h+=1,te=kt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}N.H=u0,g=s(a,l)}while(fn);return g}function n0(){var e=N.H,s=e.useState()[0];return s=typeof s.then=="function"?da(s):s,e=e.useState()[0],(kt!==null?kt.memoizedState:null)!==e&&(_t.flags|=1024),s}function Bo(){var e=Dr!==0;return Dr=0,e}function Ho(e,s,a){s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~a}function Io(e){if(Rr){for(e=e.memoizedState;e!==null;){var s=e.queue;s!==null&&(s.pending=null),e=e.next}Rr=!1}Wi=0,te=kt=_t=null,fn=!1,ha=Dr=0,gn=null}function Le(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return te===null?_t.memoizedState=te=e:te=te.next=e,te}function ee(){if(kt===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=kt.next;var s=te===null?_t.memoizedState:te.next;if(s!==null)te=s,kt=e;else{if(e===null)throw _t.alternate===null?Error(n(467)):Error(n(310));kt=e,e={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},te===null?_t.memoizedState=te=e:te=te.next=e}return te}function jo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function da(e){var s=ha;return ha+=1,gn===null&&(gn=[]),e=Zh(gn,e,s),s=_t,(te===null?s.memoizedState:te.next)===null&&(s=s.alternate,N.H=s===null||s.memoizedState===null?Id:jd),e}function Nr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return da(e);if(e.$$typeof===M)return _e(e)}throw Error(n(438,String(e)))}function Uo(e){var s=null,a=_t.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=_t.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=jo(),_t.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(e),l=0;l<e;l++)a[l]=tt;return s.index++,a}function ki(e,s){return typeof s=="function"?s(e):s}function Or(e){var s=ee();return Fo(s,kt,e)}function Fo(e,s,a){var l=e.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var h=e.baseQueue,g=l.pending;if(g!==null){if(h!==null){var v=h.next;h.next=g.next,g.next=v}s.baseQueue=h=g,l.pending=null}if(g=e.baseState,h===null)e.memoizedState=g;else{s=h.next;var S=v=null,T=null,P=s,G=!1;do{var X=P.lane&-536870913;if(X!==P.lane?(Mt&X)===X:(Wi&X)===X){var B=P.revertLane;if(B===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),X===un&&(G=!0);else if((Wi&B)===B){P=P.next,B===un&&(G=!0);continue}else X={lane:0,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},T===null?(S=T=X,v=g):T=T.next=X,_t.lanes|=B,as|=B;X=P.action,Os&&a(g,X),g=P.hasEagerState?P.eagerState:a(g,X)}else B={lane:X,revertLane:P.revertLane,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},T===null?(S=T=B,v=g):T=T.next=B,_t.lanes|=X,as|=X;P=P.next}while(P!==null&&P!==s);if(T===null?v=g:T.next=S,!Ue(g,e.memoizedState)&&(ue=!0,G&&(a=hn,a!==null)))throw a;e.memoizedState=g,e.baseState=v,e.baseQueue=T,l.lastRenderedState=g}return h===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Go(e){var s=ee(),a=s.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=e;var l=a.dispatch,h=a.pending,g=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do g=e(g,v.action),v=v.next;while(v!==h);Ue(g,s.memoizedState)||(ue=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,l]}function ad(e,s,a){var l=_t,h=ee(),g=Dt;if(g){if(a===void 0)throw Error(n(407));a=a()}else a=s();var v=!Ue((kt||h).memoizedState,a);v&&(h.memoizedState=a,ue=!0),h=h.queue;var S=od.bind(null,l,h,e);if(fa(2048,8,S,[e]),h.getSnapshot!==s||v||te!==null&&te.memoizedState.tag&1){if(l.flags|=2048,pn(9,Lr(),ld.bind(null,l,h,a,s),null),It===null)throw Error(n(349));g||(Wi&124)!==0||rd(l,s,a)}return a}function rd(e,s,a){e.flags|=16384,e={getSnapshot:s,value:a},s=_t.updateQueue,s===null?(s=jo(),_t.updateQueue=s,s.stores=[e]):(a=s.stores,a===null?s.stores=[e]:a.push(e))}function ld(e,s,a,l){s.value=a,s.getSnapshot=l,cd(s)&&ud(e)}function od(e,s,a){return a(function(){cd(s)&&ud(e)})}function cd(e){var s=e.getSnapshot;e=e.value;try{var a=s();return!Ue(e,a)}catch{return!0}}function ud(e){var s=rn(e,2);s!==null&&Ye(s,e,2)}function qo(e){var s=Le();if(typeof e=="function"){var a=e;if(e=a(),Os){Vi(!0);try{a()}finally{Vi(!1)}}}return s.memoizedState=s.baseState=e,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:e},s}function hd(e,s,a,l){return e.baseState=a,Fo(e,kt,typeof l=="function"?l:ki)}function a0(e,s,a,l,h){if(zr(e))throw Error(n(485));if(e=s.action,e!==null){var g={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){g.listeners.push(v)}};N.T!==null?a(!0):g.isTransition=!1,l(g),a=s.pending,a===null?(g.next=s.pending=g,dd(s,g)):(g.next=a.next,s.pending=a.next=g)}}function dd(e,s){var a=s.action,l=s.payload,h=e.state;if(s.isTransition){var g=N.T,v={};N.T=v;try{var S=a(h,l),T=N.S;T!==null&&T(v,S),fd(e,s,S)}catch(P){Vo(e,s,P)}finally{N.T=g}}else try{g=a(h,l),fd(e,s,g)}catch(P){Vo(e,s,P)}}function fd(e,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){gd(e,s,l)},function(l){return Vo(e,s,l)}):gd(e,s,a)}function gd(e,s,a){s.status="fulfilled",s.value=a,pd(s),e.state=a,s=e.pending,s!==null&&(a=s.next,a===s?e.pending=null:(a=a.next,s.next=a,dd(e,a)))}function Vo(e,s,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,pd(s),s=s.next;while(s!==l)}e.action=null}function pd(e){e=e.listeners;for(var s=0;s<e.length;s++)(0,e[s])()}function md(e,s){return s}function bd(e,s){if(Dt){var a=It.formState;if(a!==null){t:{var l=_t;if(Dt){if(Xt){e:{for(var h=Xt,g=gi;h.nodeType!==8;){if(!g){h=null;break e}if(h=ui(h.nextSibling),h===null){h=null;break e}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){Xt=ui(h.nextSibling),l=h.data==="F!";break t}}Ms(l)}l=!1}l&&(s=a[0])}}return a=Le(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:md,lastRenderedState:s},a.queue=l,a=Pd.bind(null,_t,l),l.dispatch=a,l=qo(!1),g=Qo.bind(null,_t,!1,l.queue),l=Le(),h={state:s,dispatch:null,action:e,pending:null},l.queue=h,a=a0.bind(null,_t,h,g,a),h.dispatch=a,l.memoizedState=e,[s,a,!1]}function yd(e){var s=ee();return vd(s,kt,e)}function vd(e,s,a){if(s=Fo(e,s,md)[0],e=Or(ki)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=da(s)}catch(v){throw v===ra?Tr:v}else l=s;s=ee();var h=s.queue,g=h.dispatch;return a!==s.memoizedState&&(_t.flags|=2048,pn(9,Lr(),r0.bind(null,h,a),null)),[l,g,e]}function r0(e,s){e.action=s}function Ad(e){var s=ee(),a=kt;if(a!==null)return vd(s,a,e);ee(),s=s.memoizedState,a=ee();var l=a.queue.dispatch;return a.memoizedState=e,[s,l,!1]}function pn(e,s,a,l){return e={tag:e,create:a,deps:l,inst:s,next:null},s=_t.updateQueue,s===null&&(s=jo(),_t.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,s.lastEffect=e),e}function Lr(){return{destroy:void 0,resource:void 0}}function Sd(){return ee().memoizedState}function kr(e,s,a,l){var h=Le();l=l===void 0?null:l,_t.flags|=e,h.memoizedState=pn(1|s,Lr(),a,l)}function fa(e,s,a,l){var h=ee();l=l===void 0?null:l;var g=h.memoizedState.inst;kt!==null&&l!==null&&zo(l,kt.memoizedState.deps)?h.memoizedState=pn(s,g,a,l):(_t.flags|=e,h.memoizedState=pn(1|s,g,a,l))}function _d(e,s){kr(8390656,8,e,s)}function wd(e,s){fa(2048,8,e,s)}function Ed(e,s){return fa(4,2,e,s)}function xd(e,s){return fa(4,4,e,s)}function Td(e,s){if(typeof s=="function"){e=e();var a=s(e);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function Cd(e,s,a){a=a!=null?a.concat([e]):null,fa(4,4,Td.bind(null,s,e),a)}function Xo(){}function Md(e,s){var a=ee();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&zo(s,l[1])?l[0]:(a.memoizedState=[e,s],e)}function Rd(e,s){var a=ee();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&zo(s,l[1]))return l[0];if(l=e(),Os){Vi(!0);try{e()}finally{Vi(!1)}}return a.memoizedState=[l,s],l}function Yo(e,s,a){return a===void 0||(Wi&1073741824)!==0?e.memoizedState=s:(e.memoizedState=a,e=Lf(),_t.lanes|=e,as|=e,a)}function Dd(e,s,a,l){return Ue(a,s)?a:dn.current!==null?(e=Yo(e,a,l),Ue(e,s)||(ue=!0),e):(Wi&42)===0?(ue=!0,e.memoizedState=a):(e=Lf(),_t.lanes|=e,as|=e,s)}function Nd(e,s,a,l,h){var g=U.p;U.p=g!==0&&8>g?g:8;var v=N.T,S={};N.T=S,Qo(e,!1,s,a);try{var T=h(),P=N.S;if(P!==null&&P(S,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var G=i0(T,l);ga(e,s,G,Xe(e))}else ga(e,s,l,Xe(e))}catch(X){ga(e,s,{then:function(){},status:"rejected",reason:X},Xe())}finally{U.p=g,N.T=v}}function l0(){}function $o(e,s,a,l){if(e.tag!==5)throw Error(n(476));var h=Od(e).queue;Nd(e,h,s,et,a===null?l0:function(){return Ld(e),a(l)})}function Od(e){var s=e.memoizedState;if(s!==null)return s;s={memoizedState:et,baseState:et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:et},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:a},next:null},e.memoizedState=s,e=e.alternate,e!==null&&(e.memoizedState=s),s}function Ld(e){var s=Od(e).next.queue;ga(e,s,{},Xe())}function Ko(){return _e(Oa)}function kd(){return ee().memoizedState}function zd(){return ee().memoizedState}function o0(e){for(var s=e.return;s!==null;){switch(s.tag){case 24:case 3:var a=Xe();e=Qi(a);var l=Zi(s,e,a);l!==null&&(Ye(l,s,a),oa(l,s,a)),s={cache:xo()},e.payload=s;return}s=s.return}}function c0(e,s,a){var l=Xe();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},zr(e)?Bd(s,a):(a=po(e,s,a,l),a!==null&&(Ye(a,e,l),Hd(a,s,l)))}function Pd(e,s,a){var l=Xe();ga(e,s,a,l)}function ga(e,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(zr(e))Bd(s,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var v=s.lastRenderedState,S=g(v,a);if(h.hasEagerState=!0,h.eagerState=S,Ue(S,v))return yr(e,s,h,0),It===null&&br(),!1}catch{}finally{}if(a=po(e,s,h,l),a!==null)return Ye(a,e,l),Hd(a,s,l),!0}return!1}function Qo(e,s,a,l){if(l={lane:2,revertLane:Mc(),action:l,hasEagerState:!1,eagerState:null,next:null},zr(e)){if(s)throw Error(n(479))}else s=po(e,a,l,2),s!==null&&Ye(s,e,2)}function zr(e){var s=e.alternate;return e===_t||s!==null&&s===_t}function Bd(e,s){fn=Rr=!0;var a=e.pending;a===null?s.next=s:(s.next=a.next,a.next=s),e.pending=s}function Hd(e,s,a){if((a&4194048)!==0){var l=s.lanes;l&=e.pendingLanes,a|=l,s.lanes=a,Xu(e,a)}}var Pr={readContext:_e,use:Nr,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t},Id={readContext:_e,use:Nr,useCallback:function(e,s){return Le().memoizedState=[e,s===void 0?null:s],e},useContext:_e,useEffect:_d,useImperativeHandle:function(e,s,a){a=a!=null?a.concat([e]):null,kr(4194308,4,Td.bind(null,s,e),a)},useLayoutEffect:function(e,s){return kr(4194308,4,e,s)},useInsertionEffect:function(e,s){kr(4,2,e,s)},useMemo:function(e,s){var a=Le();s=s===void 0?null:s;var l=e();if(Os){Vi(!0);try{e()}finally{Vi(!1)}}return a.memoizedState=[l,s],l},useReducer:function(e,s,a){var l=Le();if(a!==void 0){var h=a(s);if(Os){Vi(!0);try{a(s)}finally{Vi(!1)}}}else h=s;return l.memoizedState=l.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},l.queue=e,e=e.dispatch=c0.bind(null,_t,e),[l.memoizedState,e]},useRef:function(e){var s=Le();return e={current:e},s.memoizedState=e},useState:function(e){e=qo(e);var s=e.queue,a=Pd.bind(null,_t,s);return s.dispatch=a,[e.memoizedState,a]},useDebugValue:Xo,useDeferredValue:function(e,s){var a=Le();return Yo(a,e,s)},useTransition:function(){var e=qo(!1);return e=Nd.bind(null,_t,e.queue,!0,!1),Le().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,s,a){var l=_t,h=Le();if(Dt){if(a===void 0)throw Error(n(407));a=a()}else{if(a=s(),It===null)throw Error(n(349));(Mt&124)!==0||rd(l,s,a)}h.memoizedState=a;var g={value:a,getSnapshot:s};return h.queue=g,_d(od.bind(null,l,g,e),[e]),l.flags|=2048,pn(9,Lr(),ld.bind(null,l,g,a,s),null),a},useId:function(){var e=Le(),s=It.identifierPrefix;if(Dt){var a=Ni,l=Di;a=(l&~(1<<32-je(l)-1)).toString(32)+a,s="«"+s+"R"+a,a=Dr++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=s0++,s="«"+s+"r"+a.toString(32)+"»";return e.memoizedState=s},useHostTransitionStatus:Ko,useFormState:bd,useActionState:bd,useOptimistic:function(e){var s=Le();s.memoizedState=s.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Qo.bind(null,_t,!0,a),a.dispatch=s,[e,s]},useMemoCache:Uo,useCacheRefresh:function(){return Le().memoizedState=o0.bind(null,_t)}},jd={readContext:_e,use:Nr,useCallback:Md,useContext:_e,useEffect:wd,useImperativeHandle:Cd,useInsertionEffect:Ed,useLayoutEffect:xd,useMemo:Rd,useReducer:Or,useRef:Sd,useState:function(){return Or(ki)},useDebugValue:Xo,useDeferredValue:function(e,s){var a=ee();return Dd(a,kt.memoizedState,e,s)},useTransition:function(){var e=Or(ki)[0],s=ee().memoizedState;return[typeof e=="boolean"?e:da(e),s]},useSyncExternalStore:ad,useId:kd,useHostTransitionStatus:Ko,useFormState:yd,useActionState:yd,useOptimistic:function(e,s){var a=ee();return hd(a,kt,e,s)},useMemoCache:Uo,useCacheRefresh:zd},u0={readContext:_e,use:Nr,useCallback:Md,useContext:_e,useEffect:wd,useImperativeHandle:Cd,useInsertionEffect:Ed,useLayoutEffect:xd,useMemo:Rd,useReducer:Go,useRef:Sd,useState:function(){return Go(ki)},useDebugValue:Xo,useDeferredValue:function(e,s){var a=ee();return kt===null?Yo(a,e,s):Dd(a,kt.memoizedState,e,s)},useTransition:function(){var e=Go(ki)[0],s=ee().memoizedState;return[typeof e=="boolean"?e:da(e),s]},useSyncExternalStore:ad,useId:kd,useHostTransitionStatus:Ko,useFormState:Ad,useActionState:Ad,useOptimistic:function(e,s){var a=ee();return kt!==null?hd(a,kt,e,s):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Uo,useCacheRefresh:zd},mn=null,pa=0;function Br(e){var s=pa;return pa+=1,mn===null&&(mn=[]),Zh(mn,e,s)}function ma(e,s){s=s.props.ref,e.ref=s!==void 0?s:null}function Hr(e,s){throw s.$$typeof===b?Error(n(525)):(e=Object.prototype.toString.call(s),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)))}function Ud(e){var s=e._init;return s(e._payload)}function Fd(e){function s(L,R){if(e){var z=L.deletions;z===null?(L.deletions=[R],L.flags|=16):z.push(R)}}function a(L,R){if(!e)return null;for(;R!==null;)s(L,R),R=R.sibling;return null}function l(L){for(var R=new Map;L!==null;)L.key!==null?R.set(L.key,L):R.set(L.index,L),L=L.sibling;return R}function h(L,R){return L=Ri(L,R),L.index=0,L.sibling=null,L}function g(L,R,z){return L.index=z,e?(z=L.alternate,z!==null?(z=z.index,z<R?(L.flags|=67108866,R):z):(L.flags|=67108866,R)):(L.flags|=1048576,R)}function v(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function S(L,R,z,q){return R===null||R.tag!==6?(R=bo(z,L.mode,q),R.return=L,R):(R=h(R,z),R.return=L,R)}function T(L,R,z,q){var it=z.type;return it===w?G(L,R,z.props.children,q,z.key):R!==null&&(R.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===K&&Ud(it)===R.type)?(R=h(R,z.props),ma(R,z),R.return=L,R):(R=Ar(z.type,z.key,z.props,null,L.mode,q),ma(R,z),R.return=L,R)}function P(L,R,z,q){return R===null||R.tag!==4||R.stateNode.containerInfo!==z.containerInfo||R.stateNode.implementation!==z.implementation?(R=yo(z,L.mode,q),R.return=L,R):(R=h(R,z.children||[]),R.return=L,R)}function G(L,R,z,q,it){return R===null||R.tag!==7?(R=Es(z,L.mode,q,it),R.return=L,R):(R=h(R,z),R.return=L,R)}function X(L,R,z){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=bo(""+R,L.mode,z),R.return=L,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case y:return z=Ar(R.type,R.key,R.props,null,L.mode,z),ma(z,R),z.return=L,z;case A:return R=yo(R,L.mode,z),R.return=L,R;case K:var q=R._init;return R=q(R._payload),X(L,R,z)}if(dt(R)||ot(R))return R=Es(R,L.mode,z,null),R.return=L,R;if(typeof R.then=="function")return X(L,Br(R),z);if(R.$$typeof===M)return X(L,Er(L,R),z);Hr(L,R)}return null}function B(L,R,z,q){var it=R!==null?R.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return it!==null?null:S(L,R,""+z,q);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case y:return z.key===it?T(L,R,z,q):null;case A:return z.key===it?P(L,R,z,q):null;case K:return it=z._init,z=it(z._payload),B(L,R,z,q)}if(dt(z)||ot(z))return it!==null?null:G(L,R,z,q,null);if(typeof z.then=="function")return B(L,R,Br(z),q);if(z.$$typeof===M)return B(L,R,Er(L,z),q);Hr(L,z)}return null}function H(L,R,z,q,it){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return L=L.get(z)||null,S(R,L,""+q,it);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case y:return L=L.get(q.key===null?z:q.key)||null,T(R,L,q,it);case A:return L=L.get(q.key===null?z:q.key)||null,P(R,L,q,it);case K:var wt=q._init;return q=wt(q._payload),H(L,R,z,q,it)}if(dt(q)||ot(q))return L=L.get(z)||null,G(R,L,q,it,null);if(typeof q.then=="function")return H(L,R,z,Br(q),it);if(q.$$typeof===M)return H(L,R,z,Er(R,q),it);Hr(R,q)}return null}function ft(L,R,z,q){for(var it=null,wt=null,at=R,ut=R=0,de=null;at!==null&&ut<z.length;ut++){at.index>ut?(de=at,at=null):de=at.sibling;var Rt=B(L,at,z[ut],q);if(Rt===null){at===null&&(at=de);break}e&&at&&Rt.alternate===null&&s(L,at),R=g(Rt,R,ut),wt===null?it=Rt:wt.sibling=Rt,wt=Rt,at=de}if(ut===z.length)return a(L,at),Dt&&Ts(L,ut),it;if(at===null){for(;ut<z.length;ut++)at=X(L,z[ut],q),at!==null&&(R=g(at,R,ut),wt===null?it=at:wt.sibling=at,wt=at);return Dt&&Ts(L,ut),it}for(at=l(at);ut<z.length;ut++)de=H(at,L,ut,z[ut],q),de!==null&&(e&&de.alternate!==null&&at.delete(de.key===null?ut:de.key),R=g(de,R,ut),wt===null?it=de:wt.sibling=de,wt=de);return e&&at.forEach(function(gs){return s(L,gs)}),Dt&&Ts(L,ut),it}function ct(L,R,z,q){if(z==null)throw Error(n(151));for(var it=null,wt=null,at=R,ut=R=0,de=null,Rt=z.next();at!==null&&!Rt.done;ut++,Rt=z.next()){at.index>ut?(de=at,at=null):de=at.sibling;var gs=B(L,at,Rt.value,q);if(gs===null){at===null&&(at=de);break}e&&at&&gs.alternate===null&&s(L,at),R=g(gs,R,ut),wt===null?it=gs:wt.sibling=gs,wt=gs,at=de}if(Rt.done)return a(L,at),Dt&&Ts(L,ut),it;if(at===null){for(;!Rt.done;ut++,Rt=z.next())Rt=X(L,Rt.value,q),Rt!==null&&(R=g(Rt,R,ut),wt===null?it=Rt:wt.sibling=Rt,wt=Rt);return Dt&&Ts(L,ut),it}for(at=l(at);!Rt.done;ut++,Rt=z.next())Rt=H(at,L,ut,Rt.value,q),Rt!==null&&(e&&Rt.alternate!==null&&at.delete(Rt.key===null?ut:Rt.key),R=g(Rt,R,ut),wt===null?it=Rt:wt.sibling=Rt,wt=Rt);return e&&at.forEach(function(hb){return s(L,hb)}),Dt&&Ts(L,ut),it}function Pt(L,R,z,q){if(typeof z=="object"&&z!==null&&z.type===w&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case y:t:{for(var it=z.key;R!==null;){if(R.key===it){if(it=z.type,it===w){if(R.tag===7){a(L,R.sibling),q=h(R,z.props.children),q.return=L,L=q;break t}}else if(R.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===K&&Ud(it)===R.type){a(L,R.sibling),q=h(R,z.props),ma(q,z),q.return=L,L=q;break t}a(L,R);break}else s(L,R);R=R.sibling}z.type===w?(q=Es(z.props.children,L.mode,q,z.key),q.return=L,L=q):(q=Ar(z.type,z.key,z.props,null,L.mode,q),ma(q,z),q.return=L,L=q)}return v(L);case A:t:{for(it=z.key;R!==null;){if(R.key===it)if(R.tag===4&&R.stateNode.containerInfo===z.containerInfo&&R.stateNode.implementation===z.implementation){a(L,R.sibling),q=h(R,z.children||[]),q.return=L,L=q;break t}else{a(L,R);break}else s(L,R);R=R.sibling}q=yo(z,L.mode,q),q.return=L,L=q}return v(L);case K:return it=z._init,z=it(z._payload),Pt(L,R,z,q)}if(dt(z))return ft(L,R,z,q);if(ot(z)){if(it=ot(z),typeof it!="function")throw Error(n(150));return z=it.call(z),ct(L,R,z,q)}if(typeof z.then=="function")return Pt(L,R,Br(z),q);if(z.$$typeof===M)return Pt(L,R,Er(L,z),q);Hr(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,R!==null&&R.tag===6?(a(L,R.sibling),q=h(R,z),q.return=L,L=q):(a(L,R),q=bo(z,L.mode,q),q.return=L,L=q),v(L)):a(L,R)}return function(L,R,z,q){try{pa=0;var it=Pt(L,R,z,q);return mn=null,it}catch(at){if(at===ra||at===Tr)throw at;var wt=Fe(29,at,null,L.mode);return wt.lanes=q,wt.return=L,wt}finally{}}}var bn=Fd(!0),Gd=Fd(!1),ii=V(null),pi=null;function Ji(e){var s=e.alternate;Y(le,le.current&1),Y(ii,e),pi===null&&(s===null||dn.current!==null||s.memoizedState!==null)&&(pi=e)}function qd(e){if(e.tag===22){if(Y(le,le.current),Y(ii,e),pi===null){var s=e.alternate;s!==null&&s.memoizedState!==null&&(pi=e)}}else ts()}function ts(){Y(le,le.current),Y(ii,ii.current)}function zi(e){Q(ii),pi===e&&(pi=null),Q(le)}var le=V(0);function Ir(e){for(var s=e;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||jc(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Zo(e,s,a,l){s=e.memoizedState,a=a(l,s),a=a==null?s:p({},s,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Wo={enqueueSetState:function(e,s,a){e=e._reactInternals;var l=Xe(),h=Qi(l);h.payload=s,a!=null&&(h.callback=a),s=Zi(e,h,l),s!==null&&(Ye(s,e,l),oa(s,e,l))},enqueueReplaceState:function(e,s,a){e=e._reactInternals;var l=Xe(),h=Qi(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Zi(e,h,l),s!==null&&(Ye(s,e,l),oa(s,e,l))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var a=Xe(),l=Qi(a);l.tag=2,s!=null&&(l.callback=s),s=Zi(e,l,a),s!==null&&(Ye(s,e,a),oa(s,e,a))}};function Vd(e,s,a,l,h,g,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,g,v):s.prototype&&s.prototype.isPureReactComponent?!Wn(a,l)||!Wn(h,g):!0}function Xd(e,s,a,l){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==e&&Wo.enqueueReplaceState(s,s.state,null)}function Ls(e,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(e=e.defaultProps){a===s&&(a=p({},a));for(var h in e)a[h]===void 0&&(a[h]=e[h])}return a}var jr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Yd(e){jr(e)}function $d(e){console.error(e)}function Kd(e){jr(e)}function Ur(e,s){try{var a=e.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Qd(e,s,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Jo(e,s,a){return a=Qi(a),a.tag=3,a.payload={element:null},a.callback=function(){Ur(e,s)},a}function Zd(e){return e=Qi(e),e.tag=3,e}function Wd(e,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var g=l.value;e.payload=function(){return h(g)},e.callback=function(){Qd(s,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Qd(s,a,l),typeof h!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function h0(e,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&sa(s,a,h,!0),a=ii.current,a!==null){switch(a.tag){case 13:return pi===null?wc():a.alternate===null&&Yt===0&&(Yt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Mo?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),xc(e,l,h)),!1;case 22:return a.flags|=65536,l===Mo?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),xc(e,l,h)),!1}throw Error(n(435,a.tag))}return xc(e,l,h),wc(),!1}if(Dt)return s=ii.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==So&&(e=Error(n(422),{cause:l}),ia(We(e,a)))):(l!==So&&(s=Error(n(423),{cause:l}),ia(We(s,a))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,l=We(l,a),h=Jo(e.stateNode,l,h),No(e,h),Yt!==4&&(Yt=2)),!1;var g=Error(n(520),{cause:l});if(g=We(g,a),wa===null?wa=[g]:wa.push(g),Yt!==4&&(Yt=2),s===null)return!0;l=We(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,e=h&-h,a.lanes|=e,e=Jo(a.stateNode,l,e),No(a,e),!1;case 1:if(s=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(rs===null||!rs.has(g))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Zd(h),Wd(h,e,a,l),No(a,h),!1}a=a.return}while(a!==null);return!1}var Jd=Error(n(461)),ue=!1;function ge(e,s,a,l){s.child=e===null?Gd(s,null,a,l):bn(s,e.child,a,l)}function tf(e,s,a,l,h){a=a.render;var g=s.ref;if("ref"in l){var v={};for(var S in l)S!=="ref"&&(v[S]=l[S])}else v=l;return Ds(s),l=Po(e,s,a,v,g,h),S=Bo(),e!==null&&!ue?(Ho(e,s,h),Pi(e,s,h)):(Dt&&S&&vo(s),s.flags|=1,ge(e,s,l,h),s.child)}function ef(e,s,a,l,h){if(e===null){var g=a.type;return typeof g=="function"&&!mo(g)&&g.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=g,sf(e,s,g,l,h)):(e=Ar(a.type,null,l,s,s.mode,h),e.ref=s.ref,e.return=s,s.child=e)}if(g=e.child,!lc(e,h)){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:Wn,a(v,l)&&e.ref===s.ref)return Pi(e,s,h)}return s.flags|=1,e=Ri(g,l),e.ref=s.ref,e.return=s,s.child=e}function sf(e,s,a,l,h){if(e!==null){var g=e.memoizedProps;if(Wn(g,l)&&e.ref===s.ref)if(ue=!1,s.pendingProps=l=g,lc(e,h))(e.flags&131072)!==0&&(ue=!0);else return s.lanes=e.lanes,Pi(e,s,h)}return tc(e,s,a,l,h)}function nf(e,s,a){var l=s.pendingProps,h=l.children,g=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=g!==null?g.baseLanes|a:a,e!==null){for(h=s.child=e.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;s.childLanes=g&~l}else s.childLanes=0,s.child=null;return af(e,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},e!==null&&xr(s,g!==null?g.cachePool:null),g!==null?id(s,g):Lo(),qd(s);else return s.lanes=s.childLanes=536870912,af(e,s,g!==null?g.baseLanes|a:a,a)}else g!==null?(xr(s,g.cachePool),id(s,g),ts(),s.memoizedState=null):(e!==null&&xr(s,null),Lo(),ts());return ge(e,s,h,a),s.child}function af(e,s,a,l){var h=Co();return h=h===null?null:{parent:re._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},e!==null&&xr(s,null),Lo(),qd(s),e!==null&&sa(e,s,l,!0),null}function Fr(e,s){var a=s.ref;if(a===null)e!==null&&e.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(n(284));(e===null||e.ref!==a)&&(s.flags|=4194816)}}function tc(e,s,a,l,h){return Ds(s),a=Po(e,s,a,l,void 0,h),l=Bo(),e!==null&&!ue?(Ho(e,s,h),Pi(e,s,h)):(Dt&&l&&vo(s),s.flags|=1,ge(e,s,a,h),s.child)}function rf(e,s,a,l,h,g){return Ds(s),s.updateQueue=null,a=nd(s,l,a,h),sd(e),l=Bo(),e!==null&&!ue?(Ho(e,s,g),Pi(e,s,g)):(Dt&&l&&vo(s),s.flags|=1,ge(e,s,a,g),s.child)}function lf(e,s,a,l,h){if(Ds(s),s.stateNode===null){var g=ln,v=a.contextType;typeof v=="object"&&v!==null&&(g=_e(v)),g=new a(l,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Wo,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=l,g.state=s.memoizedState,g.refs={},Ro(s),v=a.contextType,g.context=typeof v=="object"&&v!==null?_e(v):ln,g.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Zo(s,a,v,l),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(v=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),v!==g.state&&Wo.enqueueReplaceState(g,g.state,null),ua(s,l,g,h),ca(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(e===null){g=s.stateNode;var S=s.memoizedProps,T=Ls(a,S);g.props=T;var P=g.context,G=a.contextType;v=ln,typeof G=="object"&&G!==null&&(v=_e(G));var X=a.getDerivedStateFromProps;G=typeof X=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,G||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||P!==v)&&Xd(s,g,l,v),Ki=!1;var B=s.memoizedState;g.state=B,ua(s,l,g,h),ca(),P=s.memoizedState,S||B!==P||Ki?(typeof X=="function"&&(Zo(s,a,X,l),P=s.memoizedState),(T=Ki||Vd(s,a,T,l,B,P,v))?(G||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=P),g.props=l,g.state=P,g.context=v,l=T):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{g=s.stateNode,Do(e,s),v=s.memoizedProps,G=Ls(a,v),g.props=G,X=s.pendingProps,B=g.context,P=a.contextType,T=ln,typeof P=="object"&&P!==null&&(T=_e(P)),S=a.getDerivedStateFromProps,(P=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==X||B!==T)&&Xd(s,g,l,T),Ki=!1,B=s.memoizedState,g.state=B,ua(s,l,g,h),ca();var H=s.memoizedState;v!==X||B!==H||Ki||e!==null&&e.dependencies!==null&&wr(e.dependencies)?(typeof S=="function"&&(Zo(s,a,S,l),H=s.memoizedState),(G=Ki||Vd(s,a,G,l,B,H,T)||e!==null&&e.dependencies!==null&&wr(e.dependencies))?(P||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,H,T),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,H,T)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=H),g.props=l,g.state=H,g.context=T,l=G):(typeof g.componentDidUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&B===e.memoizedState||(s.flags|=1024),l=!1)}return g=l,Fr(e,s),l=(s.flags&128)!==0,g||l?(g=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,e!==null&&l?(s.child=bn(s,e.child,null,h),s.child=bn(s,null,a,h)):ge(e,s,a,h),s.memoizedState=g.state,e=s.child):e=Pi(e,s,h),e}function of(e,s,a,l){return ea(),s.flags|=256,ge(e,s,a,l),s.child}var ec={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ic(e){return{baseLanes:e,cachePool:$h()}}function sc(e,s,a){return e=e!==null?e.childLanes&~a:0,s&&(e|=si),e}function cf(e,s,a){var l=s.pendingProps,h=!1,g=(s.flags&128)!==0,v;if((v=g)||(v=e!==null&&e.memoizedState===null?!1:(le.current&2)!==0),v&&(h=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,e===null){if(Dt){if(h?Ji(s):ts(),Dt){var S=Xt,T;if(T=S){t:{for(T=S,S=gi;T.nodeType!==8;){if(!S){S=null;break t}if(T=ui(T.nextSibling),T===null){S=null;break t}}S=T}S!==null?(s.memoizedState={dehydrated:S,treeContext:xs!==null?{id:Di,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},T=Fe(18,null,null,0),T.stateNode=S,T.return=s,s.child=T,xe=s,Xt=null,T=!0):T=!1}T||Ms(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return jc(S)?s.lanes=32:s.lanes=536870912,null;zi(s)}return S=l.children,l=l.fallback,h?(ts(),h=s.mode,S=Gr({mode:"hidden",children:S},h),l=Es(l,h,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,h=s.child,h.memoizedState=ic(a),h.childLanes=sc(e,v,a),s.memoizedState=ec,l):(Ji(s),nc(s,S))}if(T=e.memoizedState,T!==null&&(S=T.dehydrated,S!==null)){if(g)s.flags&256?(Ji(s),s.flags&=-257,s=ac(e,s,a)):s.memoizedState!==null?(ts(),s.child=e.child,s.flags|=128,s=null):(ts(),h=l.fallback,S=s.mode,l=Gr({mode:"visible",children:l.children},S),h=Es(h,S,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,bn(s,e.child,null,a),l=s.child,l.memoizedState=ic(a),l.childLanes=sc(e,v,a),s.memoizedState=ec,s=h);else if(Ji(s),jc(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var P=v.dgst;v=P,l=Error(n(419)),l.stack="",l.digest=v,ia({value:l,source:null,stack:null}),s=ac(e,s,a)}else if(ue||sa(e,s,a,!1),v=(a&e.childLanes)!==0,ue||v){if(v=It,v!==null&&(l=a&-a,l=(l&42)!==0?1:jl(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==T.retryLane))throw T.retryLane=l,rn(e,l),Ye(v,e,l),Jd;S.data==="$?"||wc(),s=ac(e,s,a)}else S.data==="$?"?(s.flags|=192,s.child=e.child,s=null):(e=T.treeContext,Xt=ui(S.nextSibling),xe=s,Dt=!0,Cs=null,gi=!1,e!==null&&(ti[ei++]=Di,ti[ei++]=Ni,ti[ei++]=xs,Di=e.id,Ni=e.overflow,xs=s),s=nc(s,l.children),s.flags|=4096);return s}return h?(ts(),h=l.fallback,S=s.mode,T=e.child,P=T.sibling,l=Ri(T,{mode:"hidden",children:l.children}),l.subtreeFlags=T.subtreeFlags&65011712,P!==null?h=Ri(P,h):(h=Es(h,S,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,S=e.child.memoizedState,S===null?S=ic(a):(T=S.cachePool,T!==null?(P=re._currentValue,T=T.parent!==P?{parent:P,pool:P}:T):T=$h(),S={baseLanes:S.baseLanes|a,cachePool:T}),h.memoizedState=S,h.childLanes=sc(e,v,a),s.memoizedState=ec,l):(Ji(s),a=e.child,e=a.sibling,a=Ri(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,e!==null&&(v=s.deletions,v===null?(s.deletions=[e],s.flags|=16):v.push(e)),s.child=a,s.memoizedState=null,a)}function nc(e,s){return s=Gr({mode:"visible",children:s},e.mode),s.return=e,e.child=s}function Gr(e,s){return e=Fe(22,e,null,s),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function ac(e,s,a){return bn(s,e.child,null,a),e=nc(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function uf(e,s,a){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s),wo(e.return,s,a)}function rc(e,s,a,l,h){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=a,g.tailMode=h)}function hf(e,s,a){var l=s.pendingProps,h=l.revealOrder,g=l.tail;if(ge(e,s,l.children,a),l=le.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uf(e,a,s);else if(e.tag===19)uf(e,a,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break t;for(;e.sibling===null;){if(e.return===null||e.return===s)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(Y(le,l),h){case"forwards":for(a=s.child,h=null;a!==null;)e=a.alternate,e!==null&&Ir(e)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),rc(s,!1,h,a,g);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(e=h.alternate,e!==null&&Ir(e)===null){s.child=h;break}e=h.sibling,h.sibling=a,a=h,h=e}rc(s,!0,a,null,g);break;case"together":rc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pi(e,s,a){if(e!==null&&(s.dependencies=e.dependencies),as|=s.lanes,(a&s.childLanes)===0)if(e!==null){if(sa(e,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(e!==null&&s.child!==e.child)throw Error(n(153));if(s.child!==null){for(e=s.child,a=Ri(e,e.pendingProps),s.child=a,a.return=s;e.sibling!==null;)e=e.sibling,a=a.sibling=Ri(e,e.pendingProps),a.return=s;a.sibling=null}return s.child}function lc(e,s){return(e.lanes&s)!==0?!0:(e=e.dependencies,!!(e!==null&&wr(e)))}function d0(e,s,a){switch(s.tag){case 3:yt(s,s.stateNode.containerInfo),$i(s,re,e.memoizedState.cache),ea();break;case 27:case 5:Wt(s);break;case 4:yt(s,s.stateNode.containerInfo);break;case 10:$i(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ji(s),s.flags|=128,null):(a&s.child.childLanes)!==0?cf(e,s,a):(Ji(s),e=Pi(e,s,a),e!==null?e.sibling:null);Ji(s);break;case 19:var h=(e.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(sa(e,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return hf(e,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Y(le,le.current),l)break;return null;case 22:case 23:return s.lanes=0,nf(e,s,a);case 24:$i(s,re,e.memoizedState.cache)}return Pi(e,s,a)}function df(e,s,a){if(e!==null)if(e.memoizedProps!==s.pendingProps)ue=!0;else{if(!lc(e,a)&&(s.flags&128)===0)return ue=!1,d0(e,s,a);ue=(e.flags&131072)!==0}else ue=!1,Dt&&(s.flags&1048576)!==0&&Uh(s,_r,s.index);switch(s.lanes=0,s.tag){case 16:t:{e=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")mo(l)?(e=Ls(l,e),s.tag=1,s=lf(null,s,l,e,a)):(s.tag=0,s=tc(null,s,l,e,a));else{if(l!=null){if(h=l.$$typeof,h===k){s.tag=11,s=tf(null,s,l,e,a);break t}else if(h===j){s.tag=14,s=ef(null,s,l,e,a);break t}}throw s=gt(l)||l,Error(n(306,s,""))}}return s;case 0:return tc(e,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Ls(l,s.pendingProps),lf(e,s,l,h,a);case 3:t:{if(yt(s,s.stateNode.containerInfo),e===null)throw Error(n(387));l=s.pendingProps;var g=s.memoizedState;h=g.element,Do(e,s),ua(s,l,null,a);var v=s.memoizedState;if(l=v.cache,$i(s,re,l),l!==g.cache&&Eo(s,[re],a,!0),ca(),l=v.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=of(e,s,l,a);break t}else if(l!==h){h=We(Error(n(424)),s),ia(h),s=of(e,s,l,a);break t}else{switch(e=s.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Xt=ui(e.firstChild),xe=s,Dt=!0,Cs=null,gi=!0,a=Gd(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ea(),l===h){s=Pi(e,s,a);break t}ge(e,s,l,a)}s=s.child}return s;case 26:return Fr(e,s),e===null?(a=mg(s.type,null,s.pendingProps,null))?s.memoizedState=a:Dt||(a=s.type,e=s.pendingProps,l=sl(st.current).createElement(a),l[Se]=s,l[Ne]=e,me(l,a,e),ce(l),s.stateNode=l):s.memoizedState=mg(s.type,e.memoizedProps,s.pendingProps,e.memoizedState),null;case 27:return Wt(s),e===null&&Dt&&(l=s.stateNode=fg(s.type,s.pendingProps,st.current),xe=s,gi=!0,h=Xt,cs(s.type)?(Uc=h,Xt=ui(l.firstChild)):Xt=h),ge(e,s,s.pendingProps.children,a),Fr(e,s),e===null&&(s.flags|=4194304),s.child;case 5:return e===null&&Dt&&((h=l=Xt)&&(l=j0(l,s.type,s.pendingProps,gi),l!==null?(s.stateNode=l,xe=s,Xt=ui(l.firstChild),gi=!1,h=!0):h=!1),h||Ms(s)),Wt(s),h=s.type,g=s.pendingProps,v=e!==null?e.memoizedProps:null,l=g.children,Bc(h,g)?l=null:v!==null&&Bc(h,v)&&(s.flags|=32),s.memoizedState!==null&&(h=Po(e,s,n0,null,null,a),Oa._currentValue=h),Fr(e,s),ge(e,s,l,a),s.child;case 6:return e===null&&Dt&&((e=a=Xt)&&(a=U0(a,s.pendingProps,gi),a!==null?(s.stateNode=a,xe=s,Xt=null,e=!0):e=!1),e||Ms(s)),null;case 13:return cf(e,s,a);case 4:return yt(s,s.stateNode.containerInfo),l=s.pendingProps,e===null?s.child=bn(s,null,l,a):ge(e,s,l,a),s.child;case 11:return tf(e,s,s.type,s.pendingProps,a);case 7:return ge(e,s,s.pendingProps,a),s.child;case 8:return ge(e,s,s.pendingProps.children,a),s.child;case 12:return ge(e,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,$i(s,s.type,l.value),ge(e,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,Ds(s),h=_e(h),l=l(h),s.flags|=1,ge(e,s,l,a),s.child;case 14:return ef(e,s,s.type,s.pendingProps,a);case 15:return sf(e,s,s.type,s.pendingProps,a);case 19:return hf(e,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},e===null?(a=Gr(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Ri(e.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return nf(e,s,a);case 24:return Ds(s),l=_e(re),e===null?(h=Co(),h===null&&(h=It,g=xo(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=a),h=g),s.memoizedState={parent:l,cache:h},Ro(s),$i(s,re,h)):((e.lanes&a)!==0&&(Do(e,s),ua(s,null,null,a),ca()),h=e.memoizedState,g=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),$i(s,re,l)):(l=g.cache,$i(s,re,l),l!==h.cache&&Eo(s,[re],a,!0))),ge(e,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Bi(e){e.flags|=4}function ff(e,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Sg(s)){if(s=ii.current,s!==null&&((Mt&4194048)===Mt?pi!==null:(Mt&62914560)!==Mt&&(Mt&536870912)===0||s!==pi))throw la=Mo,Kh;e.flags|=8192}}function qr(e,s){s!==null&&(e.flags|=4),e.flags&16384&&(s=e.tag!==22?qu():536870912,e.lanes|=s,Sn|=s)}function ba(e,s){if(!Dt)switch(e.tailMode){case"hidden":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qt(e){var s=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(s)for(var h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=l,e.childLanes=a,s}function f0(e,s,a){var l=s.pendingProps;switch(Ao(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(s),null;case 1:return qt(s),null;case 3:return a=s.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Li(re),jt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ta(s)?Bi(s):e===null||e.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,qh())),qt(s),null;case 26:return a=s.memoizedState,e===null?(Bi(s),a!==null?(qt(s),ff(s,a)):(qt(s),s.flags&=-16777217)):a?a!==e.memoizedState?(Bi(s),qt(s),ff(s,a)):(qt(s),s.flags&=-16777217):(e.memoizedProps!==l&&Bi(s),qt(s),s.flags&=-16777217),null;case 27:Jt(s),a=st.current;var h=s.type;if(e!==null&&s.stateNode!=null)e.memoizedProps!==l&&Bi(s);else{if(!l){if(s.stateNode===null)throw Error(n(166));return qt(s),null}e=$.current,ta(s)?Fh(s):(e=fg(h,l,a),s.stateNode=e,Bi(s))}return qt(s),null;case 5:if(Jt(s),a=s.type,e!==null&&s.stateNode!=null)e.memoizedProps!==l&&Bi(s);else{if(!l){if(s.stateNode===null)throw Error(n(166));return qt(s),null}if(e=$.current,ta(s))Fh(s);else{switch(h=sl(st.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}e[Se]=s,e[Ne]=l;t:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break t;for(;h.sibling===null;){if(h.return===null||h.return===s)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=e;t:switch(me(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Bi(s)}}return qt(s),s.flags&=-16777217,null;case 6:if(e&&s.stateNode!=null)e.memoizedProps!==l&&Bi(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(n(166));if(e=st.current,ta(s)){if(e=s.stateNode,a=s.memoizedProps,l=null,h=xe,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}e[Se]=s,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||rg(e.nodeValue,a)),e||Ms(s)}else e=sl(e).createTextNode(l),e[Se]=s,s.stateNode=e}return qt(s),null;case 13:if(l=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=ta(s),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(n(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));h[Se]=s}else ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qt(s),h=!1}else h=qh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(zi(s),s):(zi(s),null)}if(zi(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var g=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==h&&(l.flags|=2048)}return a!==e&&a&&(s.child.flags|=8192),qr(s,s.updateQueue),qt(s),null;case 4:return jt(),e===null&&Oc(s.stateNode.containerInfo),qt(s),null;case 10:return Li(s.type),qt(s),null;case 19:if(Q(le),h=s.memoizedState,h===null)return qt(s),null;if(l=(s.flags&128)!==0,g=h.rendering,g===null)if(l)ba(h,!1);else{if(Yt!==0||e!==null&&(e.flags&128)!==0)for(e=s.child;e!==null;){if(g=Ir(e),g!==null){for(s.flags|=128,ba(h,!1),e=g.updateQueue,s.updateQueue=e,qr(s,e),s.subtreeFlags=0,e=a,a=s.child;a!==null;)jh(a,e),a=a.sibling;return Y(le,le.current&1|2),s.child}e=e.sibling}h.tail!==null&&Lt()>Yr&&(s.flags|=128,l=!0,ba(h,!1),s.lanes=4194304)}else{if(!l)if(e=Ir(g),e!==null){if(s.flags|=128,l=!0,e=e.updateQueue,s.updateQueue=e,qr(s,e),ba(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!Dt)return qt(s),null}else 2*Lt()-h.renderingStartTime>Yr&&a!==536870912&&(s.flags|=128,l=!0,ba(h,!1),s.lanes=4194304);h.isBackwards?(g.sibling=s.child,s.child=g):(e=h.last,e!==null?e.sibling=g:s.child=g,h.last=g)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=Lt(),s.sibling=null,e=le.current,Y(le,l?e&1|2:e&1),s):(qt(s),null);case 22:case 23:return zi(s),ko(),l=s.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(qt(s),s.subtreeFlags&6&&(s.flags|=8192)):qt(s),a=s.updateQueue,a!==null&&qr(s,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),e!==null&&Q(Ns),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Li(re),qt(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function g0(e,s){switch(Ao(s),s.tag){case 1:return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return Li(re),jt(),e=s.flags,(e&65536)!==0&&(e&128)===0?(s.flags=e&-65537|128,s):null;case 26:case 27:case 5:return Jt(s),null;case 13:if(zi(s),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(n(340));ea()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return Q(le),null;case 4:return jt(),null;case 10:return Li(s.type),null;case 22:case 23:return zi(s),ko(),e!==null&&Q(Ns),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 24:return Li(re),null;case 25:return null;default:return null}}function gf(e,s){switch(Ao(s),s.tag){case 3:Li(re),jt();break;case 26:case 27:case 5:Jt(s);break;case 4:jt();break;case 13:zi(s);break;case 19:Q(le);break;case 10:Li(s.type);break;case 22:case 23:zi(s),ko(),e!==null&&Q(Ns);break;case 24:Li(re)}}function ya(e,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&e)===e){l=void 0;var g=a.create,v=a.inst;l=g(),v.destroy=l}a=a.next}while(a!==h)}}catch(S){Ht(s,s.return,S)}}function es(e,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&e)===e){var v=l.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,h=s;var T=a,P=S;try{P()}catch(G){Ht(h,T,G)}}}l=l.next}while(l!==g)}}catch(G){Ht(s,s.return,G)}}function pf(e){var s=e.updateQueue;if(s!==null){var a=e.stateNode;try{ed(s,a)}catch(l){Ht(e,e.return,l)}}}function mf(e,s,a){a.props=Ls(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Ht(e,s,l)}}function va(e,s){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(h){Ht(e,s,h)}}function mi(e,s){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Ht(e,s,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ht(e,s,h)}else a.current=null}function bf(e){var s=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Ht(e,e.return,h)}}function oc(e,s,a){try{var l=e.stateNode;z0(l,e.type,a,s),l[Ne]=s}catch(h){Ht(e,e.return,h)}}function yf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&cs(e.type)||e.tag===4}function cc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||yf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&cs(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uc(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(e),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=il));else if(l!==4&&(l===27&&cs(e.type)&&(a=e.stateNode,s=null),e=e.child,e!==null))for(uc(e,s,a),e=e.sibling;e!==null;)uc(e,s,a),e=e.sibling}function Vr(e,s,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,s?a.insertBefore(e,s):a.appendChild(e);else if(l!==4&&(l===27&&cs(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Vr(e,s,a),e=e.sibling;e!==null;)Vr(e,s,a),e=e.sibling}function vf(e){var s=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);me(s,l,a),s[Se]=e,s[Ne]=a}catch(g){Ht(e,e.return,g)}}var Hi=!1,Kt=!1,hc=!1,Af=typeof WeakSet=="function"?WeakSet:Set,he=null;function p0(e,s){if(e=e.containerInfo,zc=cl,e=Dh(e),oo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break t}var v=0,S=-1,T=-1,P=0,G=0,X=e,B=null;e:for(;;){for(var H;X!==a||h!==0&&X.nodeType!==3||(S=v+h),X!==g||l!==0&&X.nodeType!==3||(T=v+l),X.nodeType===3&&(v+=X.nodeValue.length),(H=X.firstChild)!==null;)B=X,X=H;for(;;){if(X===e)break e;if(B===a&&++P===h&&(S=v),B===g&&++G===l&&(T=v),(H=X.nextSibling)!==null)break;X=B,B=X.parentNode}X=H}a=S===-1||T===-1?null:{start:S,end:T}}else a=null}a=a||{start:0,end:0}}else a=null;for(Pc={focusedElem:e,selectionRange:a},cl=!1,he=s;he!==null;)if(s=he,e=s.child,(s.subtreeFlags&1024)!==0&&e!==null)e.return=s,he=e;else for(;he!==null;){switch(s=he,g=s.alternate,e=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=s,h=g.memoizedProps,g=g.memoizedState,l=a.stateNode;try{var ft=Ls(a.type,h,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(ft,g),l.__reactInternalSnapshotBeforeUpdate=e}catch(ct){Ht(a,a.return,ct)}}break;case 3:if((e&1024)!==0){if(e=s.stateNode.containerInfo,a=e.nodeType,a===9)Ic(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ic(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=s.sibling,e!==null){e.return=s.return,he=e;break}he=s.return}}function Sf(e,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:is(e,a),l&4&&ya(5,a);break;case 1:if(is(e,a),l&4)if(e=a.stateNode,s===null)try{e.componentDidMount()}catch(v){Ht(a,a.return,v)}else{var h=Ls(a.type,s.memoizedProps);s=s.memoizedState;try{e.componentDidUpdate(h,s,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Ht(a,a.return,v)}}l&64&&pf(a),l&512&&va(a,a.return);break;case 3:if(is(e,a),l&64&&(e=a.updateQueue,e!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{ed(e,s)}catch(v){Ht(a,a.return,v)}}break;case 27:s===null&&l&4&&vf(a);case 26:case 5:is(e,a),s===null&&l&4&&bf(a),l&512&&va(a,a.return);break;case 12:is(e,a);break;case 13:is(e,a),l&4&&Ef(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=E0.bind(null,a),F0(e,a))));break;case 22:if(l=a.memoizedState!==null||Hi,!l){s=s!==null&&s.memoizedState!==null||Kt,h=Hi;var g=Kt;Hi=l,(Kt=s)&&!g?ss(e,a,(a.subtreeFlags&8772)!==0):is(e,a),Hi=h,Kt=g}break;case 30:break;default:is(e,a)}}function _f(e){var s=e.alternate;s!==null&&(e.alternate=null,_f(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&Gl(s)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ut=null,ke=!1;function Ii(e,s,a){for(a=a.child;a!==null;)wf(e,s,a),a=a.sibling}function wf(e,s,a){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(jn,a)}catch{}switch(a.tag){case 26:Kt||mi(a,s),Ii(e,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Kt||mi(a,s);var l=Ut,h=ke;cs(a.type)&&(Ut=a.stateNode,ke=!1),Ii(e,s,a),Ma(a.stateNode),Ut=l,ke=h;break;case 5:Kt||mi(a,s);case 6:if(l=Ut,h=ke,Ut=null,Ii(e,s,a),Ut=l,ke=h,Ut!==null)if(ke)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(a.stateNode)}catch(g){Ht(a,s,g)}else try{Ut.removeChild(a.stateNode)}catch(g){Ht(a,s,g)}break;case 18:Ut!==null&&(ke?(e=Ut,hg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Pa(e)):hg(Ut,a.stateNode));break;case 4:l=Ut,h=ke,Ut=a.stateNode.containerInfo,ke=!0,Ii(e,s,a),Ut=l,ke=h;break;case 0:case 11:case 14:case 15:Kt||es(2,a,s),Kt||es(4,a,s),Ii(e,s,a);break;case 1:Kt||(mi(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&mf(a,s,l)),Ii(e,s,a);break;case 21:Ii(e,s,a);break;case 22:Kt=(l=Kt)||a.memoizedState!==null,Ii(e,s,a),Kt=l;break;default:Ii(e,s,a)}}function Ef(e,s){if(s.memoizedState===null&&(e=s.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pa(e)}catch(a){Ht(s,s.return,a)}}function m0(e){switch(e.tag){case 13:case 19:var s=e.stateNode;return s===null&&(s=e.stateNode=new Af),s;case 22:return e=e.stateNode,s=e._retryCache,s===null&&(s=e._retryCache=new Af),s;default:throw Error(n(435,e.tag))}}function dc(e,s){var a=m0(e);s.forEach(function(l){var h=x0.bind(null,e,l);a.has(l)||(a.add(l),l.then(h,h))})}function Ge(e,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],g=e,v=s,S=v;t:for(;S!==null;){switch(S.tag){case 27:if(cs(S.type)){Ut=S.stateNode,ke=!1;break t}break;case 5:Ut=S.stateNode,ke=!1;break t;case 3:case 4:Ut=S.stateNode.containerInfo,ke=!0;break t}S=S.return}if(Ut===null)throw Error(n(160));wf(g,v,h),Ut=null,ke=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)xf(s,e),s=s.sibling}var ci=null;function xf(e,s){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ge(s,e),qe(e),l&4&&(es(3,e,e.return),ya(3,e),es(5,e,e.return));break;case 1:Ge(s,e),qe(e),l&512&&(Kt||a===null||mi(a,a.return)),l&64&&Hi&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ci;if(Ge(s,e),qe(e),l&512&&(Kt||a===null||mi(a,a.return)),l&4){var g=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,h=h.ownerDocument||h;e:switch(l){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Gn]||g[Se]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(l),h.head.insertBefore(g,h.querySelector("head > title"))),me(g,l,a),g[Se]=e,ce(g),l=g;break t;case"link":var v=vg("link","href",h).get(l+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(g=v[S],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break e}}g=h.createElement(l),me(g,l,a),h.head.appendChild(g);break;case"meta":if(v=vg("meta","content",h).get(l+(a.content||""))){for(S=0;S<v.length;S++)if(g=v[S],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break e}}g=h.createElement(l),me(g,l,a),h.head.appendChild(g);break;default:throw Error(n(468,l))}g[Se]=e,ce(g),l=g}e.stateNode=l}else Ag(h,e.type,e.stateNode);else e.stateNode=yg(h,l,e.memoizedProps);else g!==l?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,l===null?Ag(h,e.type,e.stateNode):yg(h,l,e.memoizedProps)):l===null&&e.stateNode!==null&&oc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ge(s,e),qe(e),l&512&&(Kt||a===null||mi(a,a.return)),a!==null&&l&4&&oc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ge(s,e),qe(e),l&512&&(Kt||a===null||mi(a,a.return)),e.flags&32){h=e.stateNode;try{Ws(h,"")}catch(H){Ht(e,e.return,H)}}l&4&&e.stateNode!=null&&(h=e.memoizedProps,oc(e,h,a!==null?a.memoizedProps:h)),l&1024&&(hc=!0);break;case 6:if(Ge(s,e),qe(e),l&4){if(e.stateNode===null)throw Error(n(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(H){Ht(e,e.return,H)}}break;case 3:if(rl=null,h=ci,ci=nl(s.containerInfo),Ge(s,e),ci=h,qe(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Pa(s.containerInfo)}catch(H){Ht(e,e.return,H)}hc&&(hc=!1,Tf(e));break;case 4:l=ci,ci=nl(e.stateNode.containerInfo),Ge(s,e),qe(e),ci=l;break;case 12:Ge(s,e),qe(e);break;case 13:Ge(s,e),qe(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(yc=Lt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,dc(e,l)));break;case 22:h=e.memoizedState!==null;var T=a!==null&&a.memoizedState!==null,P=Hi,G=Kt;if(Hi=P||h,Kt=G||T,Ge(s,e),Kt=G,Hi=P,qe(e),l&8192)t:for(s=e.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||T||Hi||Kt||ks(e)),a=null,s=e;;){if(s.tag===5||s.tag===26){if(a===null){T=a=s;try{if(g=T.stateNode,h)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=T.stateNode;var X=T.memoizedProps.style,B=X!=null&&X.hasOwnProperty("display")?X.display:null;S.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(H){Ht(T,T.return,H)}}}else if(s.tag===6){if(a===null){T=s;try{T.stateNode.nodeValue=h?"":T.memoizedProps}catch(H){Ht(T,T.return,H)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===e)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break t;for(;s.sibling===null;){if(s.return===null||s.return===e)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,dc(e,a))));break;case 19:Ge(s,e),qe(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,dc(e,l)));break;case 30:break;case 21:break;default:Ge(s,e),qe(e)}}function qe(e){var s=e.flags;if(s&2){try{for(var a,l=e.return;l!==null;){if(yf(l)){a=l;break}l=l.return}if(a==null)throw Error(n(160));switch(a.tag){case 27:var h=a.stateNode,g=cc(e);Vr(e,g,h);break;case 5:var v=a.stateNode;a.flags&32&&(Ws(v,""),a.flags&=-33);var S=cc(e);Vr(e,S,v);break;case 3:case 4:var T=a.stateNode.containerInfo,P=cc(e);uc(e,P,T);break;default:throw Error(n(161))}}catch(G){Ht(e,e.return,G)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function Tf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var s=e;Tf(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),e=e.sibling}}function is(e,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Sf(e,s.alternate,s),s=s.sibling}function ks(e){for(e=e.child;e!==null;){var s=e;switch(s.tag){case 0:case 11:case 14:case 15:es(4,s,s.return),ks(s);break;case 1:mi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&mf(s,s.return,a),ks(s);break;case 27:Ma(s.stateNode);case 26:case 5:mi(s,s.return),ks(s);break;case 22:s.memoizedState===null&&ks(s);break;case 30:ks(s);break;default:ks(s)}e=e.sibling}}function ss(e,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=e,g=s,v=g.flags;switch(g.tag){case 0:case 11:case 15:ss(h,g,a),ya(4,g);break;case 1:if(ss(h,g,a),l=g,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(P){Ht(l,l.return,P)}if(l=g,h=l.updateQueue,h!==null){var S=l.stateNode;try{var T=h.shared.hiddenCallbacks;if(T!==null)for(h.shared.hiddenCallbacks=null,h=0;h<T.length;h++)td(T[h],S)}catch(P){Ht(l,l.return,P)}}a&&v&64&&pf(g),va(g,g.return);break;case 27:vf(g);case 26:case 5:ss(h,g,a),a&&l===null&&v&4&&bf(g),va(g,g.return);break;case 12:ss(h,g,a);break;case 13:ss(h,g,a),a&&v&4&&Ef(h,g);break;case 22:g.memoizedState===null&&ss(h,g,a),va(g,g.return);break;case 30:break;default:ss(h,g,a)}s=s.sibling}}function fc(e,s){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(e=s.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&na(a))}function gc(e,s){e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&na(e))}function bi(e,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Cf(e,s,a,l),s=s.sibling}function Cf(e,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:bi(e,s,a,l),h&2048&&ya(9,s);break;case 1:bi(e,s,a,l);break;case 3:bi(e,s,a,l),h&2048&&(e=null,s.alternate!==null&&(e=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==e&&(s.refCount++,e!=null&&na(e)));break;case 12:if(h&2048){bi(e,s,a,l),e=s.stateNode;try{var g=s.memoizedProps,v=g.id,S=g.onPostCommit;typeof S=="function"&&S(v,s.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Ht(s,s.return,T)}}else bi(e,s,a,l);break;case 13:bi(e,s,a,l);break;case 23:break;case 22:g=s.stateNode,v=s.alternate,s.memoizedState!==null?g._visibility&2?bi(e,s,a,l):Aa(e,s):g._visibility&2?bi(e,s,a,l):(g._visibility|=2,yn(e,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&fc(v,s);break;case 24:bi(e,s,a,l),h&2048&&gc(s.alternate,s);break;default:bi(e,s,a,l)}}function yn(e,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=e,v=s,S=a,T=l,P=v.flags;switch(v.tag){case 0:case 11:case 15:yn(g,v,S,T,h),ya(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?yn(g,v,S,T,h):Aa(g,v):(G._visibility|=2,yn(g,v,S,T,h)),h&&P&2048&&fc(v.alternate,v);break;case 24:yn(g,v,S,T,h),h&&P&2048&&gc(v.alternate,v);break;default:yn(g,v,S,T,h)}s=s.sibling}}function Aa(e,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=e,l=s,h=l.flags;switch(l.tag){case 22:Aa(a,l),h&2048&&fc(l.alternate,l);break;case 24:Aa(a,l),h&2048&&gc(l.alternate,l);break;default:Aa(a,l)}s=s.sibling}}var Sa=8192;function vn(e){if(e.subtreeFlags&Sa)for(e=e.child;e!==null;)Mf(e),e=e.sibling}function Mf(e){switch(e.tag){case 26:vn(e),e.flags&Sa&&e.memoizedState!==null&&eb(ci,e.memoizedState,e.memoizedProps);break;case 5:vn(e);break;case 3:case 4:var s=ci;ci=nl(e.stateNode.containerInfo),vn(e),ci=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Sa,Sa=16777216,vn(e),Sa=s):vn(e));break;default:vn(e)}}function Rf(e){var s=e.alternate;if(s!==null&&(e=s.child,e!==null)){s.child=null;do s=e.sibling,e.sibling=null,e=s;while(e!==null)}}function _a(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];he=l,Nf(l,e)}Rf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Df(e),e=e.sibling}function Df(e){switch(e.tag){case 0:case 11:case 15:_a(e),e.flags&2048&&es(9,e,e.return);break;case 3:_a(e);break;case 12:_a(e);break;case 22:var s=e.stateNode;e.memoizedState!==null&&s._visibility&2&&(e.return===null||e.return.tag!==13)?(s._visibility&=-3,Xr(e)):_a(e);break;default:_a(e)}}function Xr(e){var s=e.deletions;if((e.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];he=l,Nf(l,e)}Rf(e)}for(e=e.child;e!==null;){switch(s=e,s.tag){case 0:case 11:case 15:es(8,s,s.return),Xr(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Xr(s));break;default:Xr(s)}e=e.sibling}}function Nf(e,s){for(;he!==null;){var a=he;switch(a.tag){case 0:case 11:case 15:es(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:na(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,he=l;else t:for(a=e;he!==null;){l=he;var h=l.sibling,g=l.return;if(_f(l),l===a){he=null;break t}if(h!==null){h.return=g,he=h;break t}he=g}}}var b0={getCacheForType:function(e){var s=_e(re),a=s.data.get(e);return a===void 0&&(a=e(),s.data.set(e,a)),a}},y0=typeof WeakMap=="function"?WeakMap:Map,Nt=0,It=null,xt=null,Mt=0,Ot=0,Ve=null,ns=!1,An=!1,pc=!1,ji=0,Yt=0,as=0,zs=0,mc=0,si=0,Sn=0,wa=null,ze=null,bc=!1,yc=0,Yr=1/0,$r=null,rs=null,pe=0,ls=null,_n=null,wn=0,vc=0,Ac=null,Of=null,Ea=0,Sc=null;function Xe(){if((Nt&2)!==0&&Mt!==0)return Mt&-Mt;if(N.T!==null){var e=un;return e!==0?e:Mc()}return Yu()}function Lf(){si===0&&(si=(Mt&536870912)===0||Dt?Gu():536870912);var e=ii.current;return e!==null&&(e.flags|=32),si}function Ye(e,s,a){(e===It&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)&&(En(e,0),os(e,Mt,si,!1)),Fn(e,a),((Nt&2)===0||e!==It)&&(e===It&&((Nt&2)===0&&(zs|=a),Yt===4&&os(e,Mt,si,!1)),yi(e))}function kf(e,s,a){if((Nt&6)!==0)throw Error(n(327));var l=!a&&(s&124)===0&&(s&e.expiredLanes)===0||Un(e,s),h=l?S0(e,s):Ec(e,s,!0),g=l;do{if(h===0){An&&!l&&os(e,s,0,!1);break}else{if(a=e.current.alternate,g&&!v0(a)){h=Ec(e,s,!1),g=!1;continue}if(h===2){if(g=s,e.errorRecoveryDisabledLanes&g)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;t:{var S=e;h=wa;var T=S.current.memoizedState.isDehydrated;if(T&&(En(S,v).flags|=256),v=Ec(S,v,!1),v!==2){if(pc&&!T){S.errorRecoveryDisabledLanes|=g,zs|=g,h=4;break t}g=ze,ze=h,g!==null&&(ze===null?ze=g:ze.push.apply(ze,g))}h=v}if(g=!1,h!==2)continue}}if(h===1){En(e,0),os(e,s,0,!0);break}t:{switch(l=e,g=h,g){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:os(l,s,si,!ns);break t;case 2:ze=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(h=yc+300-Lt(),10<h)){if(os(l,s,si,!ns),ar(l,0,!0)!==0)break t;l.timeoutHandle=cg(zf.bind(null,l,a,ze,$r,bc,s,si,zs,Sn,ns,g,2,-0,0),h);break t}zf(l,a,ze,$r,bc,s,si,zs,Sn,ns,g,0,-0,0)}}break}while(!0);yi(e)}function zf(e,s,a,l,h,g,v,S,T,P,G,X,B,H){if(e.timeoutHandle=-1,X=s.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(Na={stylesheets:null,count:0,unsuspend:tb},Mf(s),X=ib(),X!==null)){e.cancelPendingCommit=X(Ff.bind(null,e,s,g,a,l,h,v,S,T,G,1,B,H)),os(e,g,v,!P);return}Ff(e,s,g,a,l,h,v,S,T)}function v0(e){for(var s=e;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],g=h.getSnapshot;h=h.value;try{if(!Ue(g(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function os(e,s,a,l){s&=~mc,s&=~zs,e.suspendedLanes|=s,e.pingedLanes&=~s,l&&(e.warmLanes|=s),l=e.expirationTimes;for(var h=s;0<h;){var g=31-je(h),v=1<<g;l[g]=-1,h&=~v}a!==0&&Vu(e,a,s)}function Kr(){return(Nt&6)===0?(xa(0),!1):!0}function _c(){if(xt!==null){if(Ot===0)var e=xt.return;else e=xt,Oi=Rs=null,Io(e),mn=null,pa=0,e=xt;for(;e!==null;)gf(e.alternate,e),e=e.return;xt=null}}function En(e,s){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,B0(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),_c(),It=e,xt=a=Ri(e.current,null),Mt=s,Ot=0,Ve=null,ns=!1,An=Un(e,s),pc=!1,Sn=si=mc=zs=as=Yt=0,ze=wa=null,bc=!1,(s&8)!==0&&(s|=s&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=s;0<l;){var h=31-je(l),g=1<<h;s|=e[h],l&=~g}return ji=s,br(),a}function Pf(e,s){_t=null,N.H=Pr,s===ra||s===Tr?(s=Wh(),Ot=3):s===Kh?(s=Wh(),Ot=4):Ot=s===Jd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ve=s,xt===null&&(Yt=1,Ur(e,We(s,e.current)))}function Bf(){var e=N.H;return N.H=Pr,e===null?Pr:e}function Hf(){var e=N.A;return N.A=b0,e}function wc(){Yt=4,ns||(Mt&4194048)!==Mt&&ii.current!==null||(An=!0),(as&134217727)===0&&(zs&134217727)===0||It===null||os(It,Mt,si,!1)}function Ec(e,s,a){var l=Nt;Nt|=2;var h=Bf(),g=Hf();(It!==e||Mt!==s)&&($r=null,En(e,s)),s=!1;var v=Yt;t:do try{if(Ot!==0&&xt!==null){var S=xt,T=Ve;switch(Ot){case 8:_c(),v=6;break t;case 3:case 2:case 9:case 6:ii.current===null&&(s=!0);var P=Ot;if(Ot=0,Ve=null,xn(e,S,T,P),a&&An){v=0;break t}break;default:P=Ot,Ot=0,Ve=null,xn(e,S,T,P)}}A0(),v=Yt;break}catch(G){Pf(e,G)}while(!0);return s&&e.shellSuspendCounter++,Oi=Rs=null,Nt=l,N.H=h,N.A=g,xt===null&&(It=null,Mt=0,br()),v}function A0(){for(;xt!==null;)If(xt)}function S0(e,s){var a=Nt;Nt|=2;var l=Bf(),h=Hf();It!==e||Mt!==s?($r=null,Yr=Lt()+500,En(e,s)):An=Un(e,s);t:do try{if(Ot!==0&&xt!==null){s=xt;var g=Ve;e:switch(Ot){case 1:Ot=0,Ve=null,xn(e,s,g,1);break;case 2:case 9:if(Qh(g)){Ot=0,Ve=null,jf(s);break}s=function(){Ot!==2&&Ot!==9||It!==e||(Ot=7),yi(e)},g.then(s,s);break t;case 3:Ot=7;break t;case 4:Ot=5;break t;case 7:Qh(g)?(Ot=0,Ve=null,jf(s)):(Ot=0,Ve=null,xn(e,s,g,7));break;case 5:var v=null;switch(xt.tag){case 26:v=xt.memoizedState;case 5:case 27:var S=xt;if(!v||Sg(v)){Ot=0,Ve=null;var T=S.sibling;if(T!==null)xt=T;else{var P=S.return;P!==null?(xt=P,Qr(P)):xt=null}break e}}Ot=0,Ve=null,xn(e,s,g,5);break;case 6:Ot=0,Ve=null,xn(e,s,g,6);break;case 8:_c(),Yt=6;break t;default:throw Error(n(462))}}_0();break}catch(G){Pf(e,G)}while(!0);return Oi=Rs=null,N.H=l,N.A=h,Nt=a,xt!==null?0:(It=null,Mt=0,br(),Yt)}function _0(){for(;xt!==null&&!fi();)If(xt)}function If(e){var s=df(e.alternate,e,ji);e.memoizedProps=e.pendingProps,s===null?Qr(e):xt=s}function jf(e){var s=e,a=s.alternate;switch(s.tag){case 15:case 0:s=rf(a,s,s.pendingProps,s.type,void 0,Mt);break;case 11:s=rf(a,s,s.pendingProps,s.type.render,s.ref,Mt);break;case 5:Io(s);default:gf(a,s),s=xt=jh(s,ji),s=df(a,s,ji)}e.memoizedProps=e.pendingProps,s===null?Qr(e):xt=s}function xn(e,s,a,l){Oi=Rs=null,Io(s),mn=null,pa=0;var h=s.return;try{if(h0(e,h,s,a,Mt)){Yt=1,Ur(e,We(a,e.current)),xt=null;return}}catch(g){if(h!==null)throw xt=h,g;Yt=1,Ur(e,We(a,e.current)),xt=null;return}s.flags&32768?(Dt||l===1?e=!0:An||(Mt&536870912)!==0?e=!1:(ns=e=!0,(l===2||l===9||l===3||l===6)&&(l=ii.current,l!==null&&l.tag===13&&(l.flags|=16384))),Uf(s,e)):Qr(s)}function Qr(e){var s=e;do{if((s.flags&32768)!==0){Uf(s,ns);return}e=s.return;var a=f0(s.alternate,s,ji);if(a!==null){xt=a;return}if(s=s.sibling,s!==null){xt=s;return}xt=s=e}while(s!==null);Yt===0&&(Yt=5)}function Uf(e,s){do{var a=g0(e.alternate,e);if(a!==null){a.flags&=32767,xt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(e=e.sibling,e!==null)){xt=e;return}xt=e=a}while(e!==null);Yt=6,xt=null}function Ff(e,s,a,l,h,g,v,S,T){e.cancelPendingCommit=null;do Zr();while(pe!==0);if((Nt&6)!==0)throw Error(n(327));if(s!==null){if(s===e.current)throw Error(n(177));if(g=s.lanes|s.childLanes,g|=go,tm(e,a,g,v,S,T),e===It&&(xt=It=null,Mt=0),_n=s,ls=e,wn=a,vc=g,Ac=h,Of=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,T0(ir,function(){return Yf(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=N.T,N.T=null,h=U.p,U.p=2,v=Nt,Nt|=4;try{p0(e,s,a)}finally{Nt=v,U.p=h,N.T=l}}pe=1,Gf(),qf(),Vf()}}function Gf(){if(pe===1){pe=0;var e=ls,s=_n,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=N.T,N.T=null;var l=U.p;U.p=2;var h=Nt;Nt|=4;try{xf(s,e);var g=Pc,v=Dh(e.containerInfo),S=g.focusedElem,T=g.selectionRange;if(v!==S&&S&&S.ownerDocument&&Rh(S.ownerDocument.documentElement,S)){if(T!==null&&oo(S)){var P=T.start,G=T.end;if(G===void 0&&(G=P),"selectionStart"in S)S.selectionStart=P,S.selectionEnd=Math.min(G,S.value.length);else{var X=S.ownerDocument||document,B=X&&X.defaultView||window;if(B.getSelection){var H=B.getSelection(),ft=S.textContent.length,ct=Math.min(T.start,ft),Pt=T.end===void 0?ct:Math.min(T.end,ft);!H.extend&&ct>Pt&&(v=Pt,Pt=ct,ct=v);var L=Mh(S,ct),R=Mh(S,Pt);if(L&&R&&(H.rangeCount!==1||H.anchorNode!==L.node||H.anchorOffset!==L.offset||H.focusNode!==R.node||H.focusOffset!==R.offset)){var z=X.createRange();z.setStart(L.node,L.offset),H.removeAllRanges(),ct>Pt?(H.addRange(z),H.extend(R.node,R.offset)):(z.setEnd(R.node,R.offset),H.addRange(z))}}}}for(X=[],H=S;H=H.parentNode;)H.nodeType===1&&X.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<X.length;S++){var q=X[S];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}cl=!!zc,Pc=zc=null}finally{Nt=h,U.p=l,N.T=a}}e.current=s,pe=2}}function qf(){if(pe===2){pe=0;var e=ls,s=_n,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=N.T,N.T=null;var l=U.p;U.p=2;var h=Nt;Nt|=4;try{Sf(e,s.alternate,s)}finally{Nt=h,U.p=l,N.T=a}}pe=3}}function Vf(){if(pe===4||pe===3){pe=0,fe();var e=ls,s=_n,a=wn,l=Of;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?pe=5:(pe=0,_n=ls=null,Xf(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(rs=null),Ul(a),s=s.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(jn,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=N.T,h=U.p,U.p=2,N.T=null;try{for(var g=e.onRecoverableError,v=0;v<l.length;v++){var S=l[v];g(S.value,{componentStack:S.stack})}}finally{N.T=s,U.p=h}}(wn&3)!==0&&Zr(),yi(e),h=e.pendingLanes,(a&4194090)!==0&&(h&42)!==0?e===Sc?Ea++:(Ea=0,Sc=e):Ea=0,xa(0)}}function Xf(e,s){(e.pooledCacheLanes&=s)===0&&(s=e.pooledCache,s!=null&&(e.pooledCache=null,na(s)))}function Zr(e){return Gf(),qf(),Vf(),Yf()}function Yf(){if(pe!==5)return!1;var e=ls,s=vc;vc=0;var a=Ul(wn),l=N.T,h=U.p;try{U.p=32>a?32:a,N.T=null,a=Ac,Ac=null;var g=ls,v=wn;if(pe=0,_n=ls=null,wn=0,(Nt&6)!==0)throw Error(n(331));var S=Nt;if(Nt|=4,Df(g.current),Cf(g,g.current,v,a),Nt=S,xa(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(jn,g)}catch{}return!0}finally{U.p=h,N.T=l,Xf(e,s)}}function $f(e,s,a){s=We(a,s),s=Jo(e.stateNode,s,2),e=Zi(e,s,2),e!==null&&(Fn(e,2),yi(e))}function Ht(e,s,a){if(e.tag===3)$f(e,e,a);else for(;s!==null;){if(s.tag===3){$f(s,e,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(rs===null||!rs.has(l))){e=We(a,e),a=Zd(2),l=Zi(s,a,2),l!==null&&(Wd(a,l,s,e),Fn(l,2),yi(l));break}}s=s.return}}function xc(e,s,a){var l=e.pingCache;if(l===null){l=e.pingCache=new y0;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(pc=!0,h.add(a),e=w0.bind(null,e,s,a),s.then(e,e))}function w0(e,s,a){var l=e.pingCache;l!==null&&l.delete(s),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,It===e&&(Mt&a)===a&&(Yt===4||Yt===3&&(Mt&62914560)===Mt&&300>Lt()-yc?(Nt&2)===0&&En(e,0):mc|=a,Sn===Mt&&(Sn=0)),yi(e)}function Kf(e,s){s===0&&(s=qu()),e=rn(e,s),e!==null&&(Fn(e,s),yi(e))}function E0(e){var s=e.memoizedState,a=0;s!==null&&(a=s.retryLane),Kf(e,a)}function x0(e,s){var a=0;switch(e.tag){case 13:var l=e.stateNode,h=e.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(n(314))}l!==null&&l.delete(s),Kf(e,a)}function T0(e,s){return di(e,s)}var Wr=null,Tn=null,Tc=!1,Jr=!1,Cc=!1,Ps=0;function yi(e){e!==Tn&&e.next===null&&(Tn===null?Wr=Tn=e:Tn=Tn.next=e),Jr=!0,Tc||(Tc=!0,M0())}function xa(e,s){if(!Cc&&Jr){Cc=!0;do for(var a=!1,l=Wr;l!==null;){if(e!==0){var h=l.pendingLanes;if(h===0)var g=0;else{var v=l.suspendedLanes,S=l.pingedLanes;g=(1<<31-je(42|e)+1)-1,g&=h&~(v&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,Jf(l,g))}else g=Mt,g=ar(l,l===It?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(g&3)===0||Un(l,g)||(a=!0,Jf(l,g));l=l.next}while(a);Cc=!1}}function C0(){Qf()}function Qf(){Jr=Tc=!1;var e=0;Ps!==0&&(P0()&&(e=Ps),Ps=0);for(var s=Lt(),a=null,l=Wr;l!==null;){var h=l.next,g=Zf(l,s);g===0?(l.next=null,a===null?Wr=h:a.next=h,h===null&&(Tn=a)):(a=l,(e!==0||(g&3)!==0)&&(Jr=!0)),l=h}xa(e)}function Zf(e,s){for(var a=e.suspendedLanes,l=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var v=31-je(g),S=1<<v,T=h[v];T===-1?((S&a)===0||(S&l)!==0)&&(h[v]=Jp(S,s)):T<=s&&(e.expiredLanes|=S),g&=~S}if(s=It,a=Mt,a=ar(e,e===s?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===s&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ti(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Un(e,a)){if(s=a&-a,s===e.callbackPriority)return s;switch(l!==null&&Ti(l),Ul(a)){case 2:case 8:a=Uu;break;case 32:a=ir;break;case 268435456:a=Fu;break;default:a=ir}return l=Wf.bind(null,e),a=di(a,l),e.callbackPriority=s,e.callbackNode=a,s}return l!==null&&l!==null&&Ti(l),e.callbackPriority=2,e.callbackNode=null,2}function Wf(e,s){if(pe!==0&&pe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Zr()&&e.callbackNode!==a)return null;var l=Mt;return l=ar(e,e===It?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(kf(e,l,s),Zf(e,Lt()),e.callbackNode!=null&&e.callbackNode===a?Wf.bind(null,e):null)}function Jf(e,s){if(Zr())return null;kf(e,s,!0)}function M0(){H0(function(){(Nt&6)!==0?di(ju,C0):Qf()})}function Mc(){return Ps===0&&(Ps=Gu()),Ps}function tg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ur(""+e)}function eg(e,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,e.id&&a.setAttribute("form",e.id),s.parentNode.insertBefore(a,s),e=new FormData(e),a.parentNode.removeChild(a),e}function R0(e,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var g=tg((h[Ne]||null).action),v=l.submitter;v&&(s=(s=v[Ne]||null)?tg(s.formAction):v.getAttribute("formAction"),s!==null&&(g=s,v=null));var S=new gr("action","action",null,l,h);e.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ps!==0){var T=v?eg(h,v):new FormData(h);$o(a,{pending:!0,data:T,method:h.method,action:g},null,T)}}else typeof g=="function"&&(S.preventDefault(),T=v?eg(h,v):new FormData(h),$o(a,{pending:!0,data:T,method:h.method,action:g},g,T))},currentTarget:h}]})}}for(var Rc=0;Rc<fo.length;Rc++){var Dc=fo[Rc],D0=Dc.toLowerCase(),N0=Dc[0].toUpperCase()+Dc.slice(1);oi(D0,"on"+N0)}oi(Lh,"onAnimationEnd"),oi(kh,"onAnimationIteration"),oi(zh,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi($m,"onTransitionRun"),oi(Km,"onTransitionStart"),oi(Qm,"onTransitionCancel"),oi(Ph,"onTransitionEnd"),Ks("onMouseEnter",["mouseout","mouseover"]),Ks("onMouseLeave",["mouseout","mouseover"]),Ks("onPointerEnter",["pointerout","pointerover"]),Ks("onPointerLeave",["pointerout","pointerover"]),As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),As("onBeforeInput",["compositionend","keypress","textInput","paste"]),As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ta));function ig(e,s){s=(s&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],h=l.event;l=l.listeners;t:{var g=void 0;if(s)for(var v=l.length-1;0<=v;v--){var S=l[v],T=S.instance,P=S.currentTarget;if(S=S.listener,T!==g&&h.isPropagationStopped())break t;g=S,h.currentTarget=P;try{g(h)}catch(G){jr(G)}h.currentTarget=null,g=T}else for(v=0;v<l.length;v++){if(S=l[v],T=S.instance,P=S.currentTarget,S=S.listener,T!==g&&h.isPropagationStopped())break t;g=S,h.currentTarget=P;try{g(h)}catch(G){jr(G)}h.currentTarget=null,g=T}}}}function Tt(e,s){var a=s[Fl];a===void 0&&(a=s[Fl]=new Set);var l=e+"__bubble";a.has(l)||(sg(s,e,2,!1),a.add(l))}function Nc(e,s,a){var l=0;s&&(l|=4),sg(a,e,l,s)}var tl="_reactListening"+Math.random().toString(36).slice(2);function Oc(e){if(!e[tl]){e[tl]=!0,Ku.forEach(function(a){a!=="selectionchange"&&(O0.has(a)||Nc(a,!1,e),Nc(a,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[tl]||(s[tl]=!0,Nc("selectionchange",!1,s))}}function sg(e,s,a,l){switch(Cg(s)){case 2:var h=ab;break;case 8:h=rb;break;default:h=Xc}a=h.bind(null,s,a,e),h=void 0,!Jl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?e.addEventListener(s,a,{capture:!0,passive:h}):e.addEventListener(s,a,!0):h!==void 0?e.addEventListener(s,a,{passive:h}):e.addEventListener(s,a,!1)}function Lc(e,s,a,l,h){var g=l;if((s&1)===0&&(s&2)===0&&l!==null)t:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===h)break;if(v===4)for(v=l.return;v!==null;){var T=v.tag;if((T===3||T===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;S!==null;){if(v=Xs(S),v===null)return;if(T=v.tag,T===5||T===6||T===26||T===27){l=g=v;continue t}S=S.parentNode}}l=l.return}ch(function(){var P=g,G=Zl(a),X=[];t:{var B=Bh.get(e);if(B!==void 0){var H=gr,ft=e;switch(e){case"keypress":if(dr(a)===0)break t;case"keydown":case"keyup":H=Tm;break;case"focusin":ft="focus",H=so;break;case"focusout":ft="blur",H=so;break;case"beforeblur":case"afterblur":H=so;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=gm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Rm;break;case Lh:case kh:case zh:H=bm;break;case Ph:H=Nm;break;case"scroll":case"scrollend":H=dm;break;case"wheel":H=Lm;break;case"copy":case"cut":case"paste":H=vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=gh;break;case"toggle":case"beforetoggle":H=zm}var ct=(s&4)!==0,Pt=!ct&&(e==="scroll"||e==="scrollend"),L=ct?B!==null?B+"Capture":null:B;ct=[];for(var R=P,z;R!==null;){var q=R;if(z=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||z===null||L===null||(q=Vn(R,L),q!=null&&ct.push(Ca(R,q,z))),Pt)break;R=R.return}0<ct.length&&(B=new H(B,ft,null,a,G),X.push({event:B,listeners:ct}))}}if((s&7)===0){t:{if(B=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",B&&a!==Ql&&(ft=a.relatedTarget||a.fromElement)&&(Xs(ft)||ft[Vs]))break t;if((H||B)&&(B=G.window===G?G:(B=G.ownerDocument)?B.defaultView||B.parentWindow:window,H?(ft=a.relatedTarget||a.toElement,H=P,ft=ft?Xs(ft):null,ft!==null&&(Pt=o(ft),ct=ft.tag,ft!==Pt||ct!==5&&ct!==27&&ct!==6)&&(ft=null)):(H=null,ft=P),H!==ft)){if(ct=dh,q="onMouseLeave",L="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(ct=gh,q="onPointerLeave",L="onPointerEnter",R="pointer"),Pt=H==null?B:qn(H),z=ft==null?B:qn(ft),B=new ct(q,R+"leave",H,a,G),B.target=Pt,B.relatedTarget=z,q=null,Xs(G)===P&&(ct=new ct(L,R+"enter",ft,a,G),ct.target=z,ct.relatedTarget=Pt,q=ct),Pt=q,H&&ft)e:{for(ct=H,L=ft,R=0,z=ct;z;z=Cn(z))R++;for(z=0,q=L;q;q=Cn(q))z++;for(;0<R-z;)ct=Cn(ct),R--;for(;0<z-R;)L=Cn(L),z--;for(;R--;){if(ct===L||L!==null&&ct===L.alternate)break e;ct=Cn(ct),L=Cn(L)}ct=null}else ct=null;H!==null&&ng(X,B,H,ct,!1),ft!==null&&Pt!==null&&ng(X,Pt,ft,ct,!0)}}t:{if(B=P?qn(P):window,H=B.nodeName&&B.nodeName.toLowerCase(),H==="select"||H==="input"&&B.type==="file")var it=_h;else if(Ah(B))if(wh)it=Vm;else{it=Gm;var wt=Fm}else H=B.nodeName,!H||H.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?P&&Kl(P.elementType)&&(it=_h):it=qm;if(it&&(it=it(e,P))){Sh(X,it,a,G);break t}wt&&wt(e,B,P),e==="focusout"&&P&&B.type==="number"&&P.memoizedProps.value!=null&&$l(B,"number",B.value)}switch(wt=P?qn(P):window,e){case"focusin":(Ah(wt)||wt.contentEditable==="true")&&(sn=wt,co=P,Jn=null);break;case"focusout":Jn=co=sn=null;break;case"mousedown":uo=!0;break;case"contextmenu":case"mouseup":case"dragend":uo=!1,Nh(X,a,G);break;case"selectionchange":if(Ym)break;case"keydown":case"keyup":Nh(X,a,G)}var at;if(ao)t:{switch(e){case"compositionstart":var ut="onCompositionStart";break t;case"compositionend":ut="onCompositionEnd";break t;case"compositionupdate":ut="onCompositionUpdate";break t}ut=void 0}else en?yh(e,a)&&(ut="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ut="onCompositionStart");ut&&(ph&&a.locale!=="ko"&&(en||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&en&&(at=uh()):(Yi=G,to="value"in Yi?Yi.value:Yi.textContent,en=!0)),wt=el(P,ut),0<wt.length&&(ut=new fh(ut,e,null,a,G),X.push({event:ut,listeners:wt}),at?ut.data=at:(at=vh(a),at!==null&&(ut.data=at)))),(at=Bm?Hm(e,a):Im(e,a))&&(ut=el(P,"onBeforeInput"),0<ut.length&&(wt=new fh("onBeforeInput","beforeinput",null,a,G),X.push({event:wt,listeners:ut}),wt.data=at)),R0(X,e,P,a,G)}ig(X,s)})}function Ca(e,s,a){return{instance:e,listener:s,currentTarget:a}}function el(e,s){for(var a=s+"Capture",l=[];e!==null;){var h=e,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=Vn(e,a),h!=null&&l.unshift(Ca(e,h,g)),h=Vn(e,s),h!=null&&l.push(Ca(e,h,g))),e.tag===3)return l;e=e.return}return[]}function Cn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ng(e,s,a,l,h){for(var g=s._reactName,v=[];a!==null&&a!==l;){var S=a,T=S.alternate,P=S.stateNode;if(S=S.tag,T!==null&&T===l)break;S!==5&&S!==26&&S!==27||P===null||(T=P,h?(P=Vn(a,g),P!=null&&v.unshift(Ca(a,P,T))):h||(P=Vn(a,g),P!=null&&v.push(Ca(a,P,T)))),a=a.return}v.length!==0&&e.push({event:s,listeners:v})}var L0=/\r\n?/g,k0=/\u0000|\uFFFD/g;function ag(e){return(typeof e=="string"?e:""+e).replace(L0,`
`).replace(k0,"")}function rg(e,s){return s=ag(s),ag(e)===s}function il(){}function zt(e,s,a,l,h,g){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Ws(e,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Ws(e,""+l);break;case"className":lr(e,"class",l);break;case"tabIndex":lr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(e,a,l);break;case"style":lh(e,l,g);break;case"data":if(s!=="object"){lr(e,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ur(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(s!=="input"&&zt(e,s,"name",h.name,h,null),zt(e,s,"formEncType",h.formEncType,h,null),zt(e,s,"formMethod",h.formMethod,h,null),zt(e,s,"formTarget",h.formTarget,h,null)):(zt(e,s,"encType",h.encType,h,null),zt(e,s,"method",h.method,h,null),zt(e,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=ur(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=il);break;case"onScroll":l!=null&&Tt("scroll",e);break;case"onScrollEnd":l!=null&&Tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(n(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=ur(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":Tt("beforetoggle",e),Tt("toggle",e),rr(e,"popover",l);break;case"xlinkActuate":Ci(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ci(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ci(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ci(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ci(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ci(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ci(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ci(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ci(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":rr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=um.get(a)||a,rr(e,a,l))}}function kc(e,s,a,l,h,g){switch(a){case"style":lh(e,l,g);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(n(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Ws(e,l):(typeof l=="number"||typeof l=="bigint")&&Ws(e,""+l);break;case"onScroll":l!=null&&Tt("scroll",e);break;case"onScrollEnd":l!=null&&Tt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=il);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qu.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),g=e[Ne]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(s,g,h),typeof l=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(s,l,h);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):rr(e,a,l)}}}function me(e,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Tt("error",e),Tt("load",e);var l=!1,h=!1,g;for(g in a)if(a.hasOwnProperty(g)){var v=a[g];if(v!=null)switch(g){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:zt(e,s,g,v,a,null)}}h&&zt(e,s,"srcSet",a.srcSet,a,null),l&&zt(e,s,"src",a.src,a,null);return;case"input":Tt("invalid",e);var S=g=v=h=null,T=null,P=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":h=G;break;case"type":v=G;break;case"checked":T=G;break;case"defaultChecked":P=G;break;case"value":g=G;break;case"defaultValue":S=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(137,s));break;default:zt(e,s,l,G,a,null)}}sh(e,g,S,T,P,v,h,!1),or(e);return;case"select":Tt("invalid",e),l=v=g=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":g=S;break;case"defaultValue":v=S;break;case"multiple":l=S;default:zt(e,s,h,S,a,null)}s=g,a=v,e.multiple=!!l,s!=null?Zs(e,!!l,s,!1):a!=null&&Zs(e,!!l,a,!0);return;case"textarea":Tt("invalid",e),g=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":l=S;break;case"defaultValue":h=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:zt(e,s,v,S,a,null)}ah(e,l,h,g),or(e);return;case"option":for(T in a)if(a.hasOwnProperty(T)&&(l=a[T],l!=null))switch(T){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:zt(e,s,T,l,a,null)}return;case"dialog":Tt("beforetoggle",e),Tt("toggle",e),Tt("cancel",e),Tt("close",e);break;case"iframe":case"object":Tt("load",e);break;case"video":case"audio":for(l=0;l<Ta.length;l++)Tt(Ta[l],e);break;case"image":Tt("error",e),Tt("load",e);break;case"details":Tt("toggle",e);break;case"embed":case"source":case"link":Tt("error",e),Tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in a)if(a.hasOwnProperty(P)&&(l=a[P],l!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:zt(e,s,P,l,a,null)}return;default:if(Kl(s)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&kc(e,s,G,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&zt(e,s,S,l,a,null))}function z0(e,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,v=null,S=null,T=null,P=null,G=null;for(H in a){var X=a[H];if(a.hasOwnProperty(H)&&X!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":T=X;default:l.hasOwnProperty(H)||zt(e,s,H,null,l,X)}}for(var B in l){var H=l[B];if(X=a[B],l.hasOwnProperty(B)&&(H!=null||X!=null))switch(B){case"type":g=H;break;case"name":h=H;break;case"checked":P=H;break;case"defaultChecked":G=H;break;case"value":v=H;break;case"defaultValue":S=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(137,s));break;default:H!==X&&zt(e,s,B,H,l,X)}}Yl(e,v,S,T,P,G,g,h);return;case"select":H=v=S=B=null;for(g in a)if(T=a[g],a.hasOwnProperty(g)&&T!=null)switch(g){case"value":break;case"multiple":H=T;default:l.hasOwnProperty(g)||zt(e,s,g,null,l,T)}for(h in l)if(g=l[h],T=a[h],l.hasOwnProperty(h)&&(g!=null||T!=null))switch(h){case"value":B=g;break;case"defaultValue":S=g;break;case"multiple":v=g;default:g!==T&&zt(e,s,h,g,l,T)}s=S,a=v,l=H,B!=null?Zs(e,!!a,B,!1):!!l!=!!a&&(s!=null?Zs(e,!!a,s,!0):Zs(e,!!a,a?[]:"",!1));return;case"textarea":H=B=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:zt(e,s,S,null,l,h)}for(v in l)if(h=l[v],g=a[v],l.hasOwnProperty(v)&&(h!=null||g!=null))switch(v){case"value":B=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(n(91));break;default:h!==g&&zt(e,s,v,h,l,g)}nh(e,B,H);return;case"option":for(var ft in a)if(B=a[ft],a.hasOwnProperty(ft)&&B!=null&&!l.hasOwnProperty(ft))switch(ft){case"selected":e.selected=!1;break;default:zt(e,s,ft,null,l,B)}for(T in l)if(B=l[T],H=a[T],l.hasOwnProperty(T)&&B!==H&&(B!=null||H!=null))switch(T){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:zt(e,s,T,B,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in a)B=a[ct],a.hasOwnProperty(ct)&&B!=null&&!l.hasOwnProperty(ct)&&zt(e,s,ct,null,l,B);for(P in l)if(B=l[P],H=a[P],l.hasOwnProperty(P)&&B!==H&&(B!=null||H!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(n(137,s));break;default:zt(e,s,P,B,l,H)}return;default:if(Kl(s)){for(var Pt in a)B=a[Pt],a.hasOwnProperty(Pt)&&B!==void 0&&!l.hasOwnProperty(Pt)&&kc(e,s,Pt,void 0,l,B);for(G in l)B=l[G],H=a[G],!l.hasOwnProperty(G)||B===H||B===void 0&&H===void 0||kc(e,s,G,B,l,H);return}}for(var L in a)B=a[L],a.hasOwnProperty(L)&&B!=null&&!l.hasOwnProperty(L)&&zt(e,s,L,null,l,B);for(X in l)B=l[X],H=a[X],!l.hasOwnProperty(X)||B===H||B==null&&H==null||zt(e,s,X,B,l,H)}var zc=null,Pc=null;function sl(e){return e.nodeType===9?e:e.ownerDocument}function lg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function og(e,s){if(e===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&s==="foreignObject"?0:e}function Bc(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Hc=null;function P0(){var e=window.event;return e&&e.type==="popstate"?e===Hc?!1:(Hc=e,!0):(Hc=null,!1)}var cg=typeof setTimeout=="function"?setTimeout:void 0,B0=typeof clearTimeout=="function"?clearTimeout:void 0,ug=typeof Promise=="function"?Promise:void 0,H0=typeof queueMicrotask=="function"?queueMicrotask:typeof ug<"u"?function(e){return ug.resolve(null).then(e).catch(I0)}:cg;function I0(e){setTimeout(function(){throw e})}function cs(e){return e==="head"}function hg(e,s){var a=s,l=0,h=0;do{var g=a.nextSibling;if(e.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<l&&8>l){a=l;var v=e.ownerDocument;if(a&1&&Ma(v.documentElement),a&2&&Ma(v.body),a&4)for(a=v.head,Ma(a),v=a.firstChild;v;){var S=v.nextSibling,T=v.nodeName;v[Gn]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}if(h===0){e.removeChild(g),Pa(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=g}while(a);Pa(s)}function Ic(e){var s=e.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ic(a),Gl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function j0(e,s,a,l){for(;e.nodeType===1;){var h=a;if(e.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Gn])switch(s){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(s==="input"&&e.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=ui(e.nextSibling),e===null)break}return null}function U0(e,s,a){if(s==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ui(e.nextSibling),e===null))return null;return e}function jc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function F0(e,s){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ui(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return e}var Uc=null;function dg(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return e;s--}else a==="/$"&&s++}e=e.previousSibling}return null}function fg(e,s,a){switch(s=sl(a),e){case"html":if(e=s.documentElement,!e)throw Error(n(452));return e;case"head":if(e=s.head,!e)throw Error(n(453));return e;case"body":if(e=s.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function Ma(e){for(var s=e.attributes;s.length;)e.removeAttributeNode(s[0]);Gl(e)}var ni=new Map,gg=new Set;function nl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ui=U.d;U.d={f:G0,r:q0,D:V0,C:X0,L:Y0,m:$0,X:Q0,S:K0,M:Z0};function G0(){var e=Ui.f(),s=Kr();return e||s}function q0(e){var s=Ys(e);s!==null&&s.tag===5&&s.type==="form"?Ld(s):Ui.r(e)}var Mn=typeof document>"u"?null:document;function pg(e,s,a){var l=Mn;if(l&&typeof s=="string"&&s){var h=Ze(s);h='link[rel="'+e+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),gg.has(h)||(gg.add(h),e={rel:e,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),me(s,"link",e),ce(s),l.head.appendChild(s)))}}function V0(e){Ui.D(e),pg("dns-prefetch",e,null)}function X0(e,s){Ui.C(e,s),pg("preconnect",e,s)}function Y0(e,s,a){Ui.L(e,s,a);var l=Mn;if(l&&e&&s){var h='link[rel="preload"][as="'+Ze(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Ze(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Ze(a.imageSizes)+'"]')):h+='[href="'+Ze(e)+'"]';var g=h;switch(s){case"style":g=Rn(e);break;case"script":g=Dn(e)}ni.has(g)||(e=p({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:e,as:s},a),ni.set(g,e),l.querySelector(h)!==null||s==="style"&&l.querySelector(Ra(g))||s==="script"&&l.querySelector(Da(g))||(s=l.createElement("link"),me(s,"link",e),ce(s),l.head.appendChild(s)))}}function $0(e,s){Ui.m(e,s);var a=Mn;if(a&&e){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Ze(l)+'"][href="'+Ze(e)+'"]',g=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Dn(e)}if(!ni.has(g)&&(e=p({rel:"modulepreload",href:e},s),ni.set(g,e),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Da(g)))return}l=a.createElement("link"),me(l,"link",e),ce(l),a.head.appendChild(l)}}}function K0(e,s,a){Ui.S(e,s,a);var l=Mn;if(l&&e){var h=$s(l).hoistableStyles,g=Rn(e);s=s||"default";var v=h.get(g);if(!v){var S={loading:0,preload:null};if(v=l.querySelector(Ra(g)))S.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":s},a),(a=ni.get(g))&&Fc(e,a);var T=v=l.createElement("link");ce(T),me(T,"link",e),T._p=new Promise(function(P,G){T.onload=P,T.onerror=G}),T.addEventListener("load",function(){S.loading|=1}),T.addEventListener("error",function(){S.loading|=2}),S.loading|=4,al(v,s,l)}v={type:"stylesheet",instance:v,count:1,state:S},h.set(g,v)}}}function Q0(e,s){Ui.X(e,s);var a=Mn;if(a&&e){var l=$s(a).hoistableScripts,h=Dn(e),g=l.get(h);g||(g=a.querySelector(Da(h)),g||(e=p({src:e,async:!0},s),(s=ni.get(h))&&Gc(e,s),g=a.createElement("script"),ce(g),me(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(h,g))}}function Z0(e,s){Ui.M(e,s);var a=Mn;if(a&&e){var l=$s(a).hoistableScripts,h=Dn(e),g=l.get(h);g||(g=a.querySelector(Da(h)),g||(e=p({src:e,async:!0,type:"module"},s),(s=ni.get(h))&&Gc(e,s),g=a.createElement("script"),ce(g),me(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(h,g))}}function mg(e,s,a,l){var h=(h=st.current)?nl(h):null;if(!h)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Rn(a.href),a=$s(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Rn(a.href);var g=$s(h).hoistableStyles,v=g.get(e);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,v),(g=h.querySelector(Ra(e)))&&!g._p&&(v.instance=g,v.state.loading=5),ni.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ni.set(e,a),g||W0(h,e,a,v.state))),s&&l===null)throw Error(n(528,""));return v}if(s&&l!==null)throw Error(n(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Dn(a),a=$s(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function Rn(e){return'href="'+Ze(e)+'"'}function Ra(e){return'link[rel="stylesheet"]['+e+"]"}function bg(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function W0(e,s,a,l){e.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=e.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),me(s,"link",a),ce(s),e.head.appendChild(s))}function Dn(e){return'[src="'+Ze(e)+'"]'}function Da(e){return"script[async]"+e}function yg(e,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=e.querySelector('style[data-href~="'+Ze(a.href)+'"]');if(l)return s.instance=l,ce(l),l;var h=p({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ce(l),me(l,"style",h),al(l,a.precedence,e),s.instance=l;case"stylesheet":h=Rn(a.href);var g=e.querySelector(Ra(h));if(g)return s.state.loading|=4,s.instance=g,ce(g),g;l=bg(a),(h=ni.get(h))&&Fc(l,h),g=(e.ownerDocument||e).createElement("link"),ce(g);var v=g;return v._p=new Promise(function(S,T){v.onload=S,v.onerror=T}),me(g,"link",l),s.state.loading|=4,al(g,a.precedence,e),s.instance=g;case"script":return g=Dn(a.src),(h=e.querySelector(Da(g)))?(s.instance=h,ce(h),h):(l=a,(h=ni.get(g))&&(l=p({},a),Gc(l,h)),e=e.ownerDocument||e,h=e.createElement("script"),ce(h),me(h,"link",l),e.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,al(l,a.precedence,e));return s.instance}function al(e,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,g=h,v=0;v<l.length;v++){var S=l[v];if(S.dataset.precedence===s)g=S;else if(g!==h)break}g?g.parentNode.insertBefore(e,g.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(e,s.firstChild))}function Fc(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.title==null&&(e.title=s.title)}function Gc(e,s){e.crossOrigin==null&&(e.crossOrigin=s.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=s.referrerPolicy),e.integrity==null&&(e.integrity=s.integrity)}var rl=null;function vg(e,s,a){if(rl===null){var l=new Map,h=rl=new Map;h.set(a,l)}else h=rl,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),h=0;h<a.length;h++){var g=a[h];if(!(g[Gn]||g[Se]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var v=g.getAttribute(s)||"";v=e+v;var S=l.get(v);S?S.push(g):l.set(v,[g])}}return l}function Ag(e,s,a){e=e.ownerDocument||e,e.head.insertBefore(a,s==="title"?e.querySelector("head > title"):null)}function J0(e,s,a){if(a===1||s.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return e=s.disabled,typeof s.precedence=="string"&&e==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Sg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Na=null;function tb(){}function eb(e,s,a){if(Na===null)throw Error(n(475));var l=Na;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=Rn(a.href),g=e.querySelector(Ra(h));if(g){e=g._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=ll.bind(l),e.then(l,l)),s.state.loading|=4,s.instance=g,ce(g);return}g=e.ownerDocument||e,a=bg(a),(h=ni.get(h))&&Fc(a,h),g=g.createElement("link"),ce(g);var v=g;v._p=new Promise(function(S,T){v.onload=S,v.onerror=T}),me(g,"link",a),s.instance=g}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,e),(e=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=ll.bind(l),e.addEventListener("load",s),e.addEventListener("error",s))}}function ib(){if(Na===null)throw Error(n(475));var e=Na;return e.stylesheets&&e.count===0&&qc(e,e.stylesheets),0<e.count?function(s){var a=setTimeout(function(){if(e.stylesheets&&qc(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a)}}:null}function ll(){if(this.count--,this.count===0){if(this.stylesheets)qc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ol=null;function qc(e,s){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ol=new Map,s.forEach(sb,e),ol=null,ll.call(e))}function sb(e,s){if(!(s.state.loading&4)){var a=ol.get(e);if(a)var l=a.get(null);else{a=new Map,ol.set(e,a);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var v=h[g];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=s.instance,v=h.getAttribute("data-precedence"),g=a.get(v)||l,g===l&&a.set(null,h),a.set(v,h),this.count++,l=ll.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),g?g.parentNode.insertBefore(h,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),s.state.loading|=4}}var Oa={$$typeof:M,Provider:null,Consumer:null,_currentValue:et,_currentValue2:et,_threadCount:0};function nb(e,s,a,l,h,g,v,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Il(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.hiddenUpdates=Il(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function _g(e,s,a,l,h,g,v,S,T,P,G,X){return e=new nb(e,s,a,v,S,T,P,X),s=1,g===!0&&(s|=24),g=Fe(3,null,null,s),e.current=g,g.stateNode=e,s=xo(),s.refCount++,e.pooledCache=s,s.refCount++,g.memoizedState={element:l,isDehydrated:a,cache:s},Ro(g),e}function wg(e){return e?(e=ln,e):ln}function Eg(e,s,a,l,h,g){h=wg(h),l.context===null?l.context=h:l.pendingContext=h,l=Qi(s),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),a=Zi(e,l,s),a!==null&&(Ye(a,e,s),oa(a,e,s))}function xg(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<s?a:s}}function Vc(e,s){xg(e,s),(e=e.alternate)&&xg(e,s)}function Tg(e){if(e.tag===13){var s=rn(e,67108864);s!==null&&Ye(s,e,67108864),Vc(e,67108864)}}var cl=!0;function ab(e,s,a,l){var h=N.T;N.T=null;var g=U.p;try{U.p=2,Xc(e,s,a,l)}finally{U.p=g,N.T=h}}function rb(e,s,a,l){var h=N.T;N.T=null;var g=U.p;try{U.p=8,Xc(e,s,a,l)}finally{U.p=g,N.T=h}}function Xc(e,s,a,l){if(cl){var h=Yc(l);if(h===null)Lc(e,s,l,ul,a),Mg(e,l);else if(ob(h,e,s,a,l))l.stopPropagation();else if(Mg(e,l),s&4&&-1<lb.indexOf(e)){for(;h!==null;){var g=Ys(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var v=vs(g.pendingLanes);if(v!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var T=1<<31-je(v);S.entanglements[1]|=T,v&=~T}yi(g),(Nt&6)===0&&(Yr=Lt()+500,xa(0))}}break;case 13:S=rn(g,2),S!==null&&Ye(S,g,2),Kr(),Vc(g,2)}if(g=Yc(l),g===null&&Lc(e,s,l,ul,a),g===h)break;h=g}h!==null&&l.stopPropagation()}else Lc(e,s,l,null,a)}}function Yc(e){return e=Zl(e),$c(e)}var ul=null;function $c(e){if(ul=null,e=Xs(e),e!==null){var s=o(e);if(s===null)e=null;else{var a=s.tag;if(a===13){if(e=c(s),e!==null)return e;e=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null)}}return ul=e,null}function Cg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xp()){case ju:return 2;case Uu:return 8;case ir:case Yp:return 32;case Fu:return 268435456;default:return 32}default:return 32}}var Kc=!1,us=null,hs=null,ds=null,La=new Map,ka=new Map,fs=[],lb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mg(e,s){switch(e){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":La.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(s.pointerId)}}function za(e,s,a,l,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:g,targetContainers:[h]},s!==null&&(s=Ys(s),s!==null&&Tg(s)),e):(e.eventSystemFlags|=l,s=e.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),e)}function ob(e,s,a,l,h){switch(s){case"focusin":return us=za(us,e,s,a,l,h),!0;case"dragenter":return hs=za(hs,e,s,a,l,h),!0;case"mouseover":return ds=za(ds,e,s,a,l,h),!0;case"pointerover":var g=h.pointerId;return La.set(g,za(La.get(g)||null,e,s,a,l,h)),!0;case"gotpointercapture":return g=h.pointerId,ka.set(g,za(ka.get(g)||null,e,s,a,l,h)),!0}return!1}function Rg(e){var s=Xs(e.target);if(s!==null){var a=o(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){e.blockedOn=s,em(e.priority,function(){if(a.tag===13){var l=Xe();l=jl(l);var h=rn(a,l);h!==null&&Ye(h,a,l),Vc(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hl(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var a=Yc(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Ql=l,a.target.dispatchEvent(l),Ql=null}else return s=Ys(a),s!==null&&Tg(s),e.blockedOn=a,!1;s.shift()}return!0}function Dg(e,s,a){hl(e)&&a.delete(s)}function cb(){Kc=!1,us!==null&&hl(us)&&(us=null),hs!==null&&hl(hs)&&(hs=null),ds!==null&&hl(ds)&&(ds=null),La.forEach(Dg),ka.forEach(Dg)}function dl(e,s){e.blockedOn===s&&(e.blockedOn=null,Kc||(Kc=!0,m.unstable_scheduleCallback(m.unstable_NormalPriority,cb)))}var fl=null;function Ng(e){fl!==e&&(fl=e,m.unstable_scheduleCallback(m.unstable_NormalPriority,function(){fl===e&&(fl=null);for(var s=0;s<e.length;s+=3){var a=e[s],l=e[s+1],h=e[s+2];if(typeof l!="function"){if($c(l||a)===null)continue;break}var g=Ys(a);g!==null&&(e.splice(s,3),s-=3,$o(g,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Pa(e){function s(T){return dl(T,e)}us!==null&&dl(us,e),hs!==null&&dl(hs,e),ds!==null&&dl(ds,e),La.forEach(s),ka.forEach(s);for(var a=0;a<fs.length;a++){var l=fs[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<fs.length&&(a=fs[0],a.blockedOn===null);)Rg(a),a.blockedOn===null&&fs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],g=a[l+1],v=h[Ne]||null;if(typeof g=="function")v||Ng(a);else if(v){var S=null;if(g&&g.hasAttribute("formAction")){if(h=g,v=g[Ne]||null)S=v.formAction;else if($c(h)!==null)continue}else S=v.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),Ng(a)}}}function Qc(e){this._internalRoot=e}gl.prototype.render=Qc.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(n(409));var a=s.current,l=Xe();Eg(a,l,e,s,null,null)},gl.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Eg(e.current,2,null,e,null,null),Kr(),s[Vs]=null}};function gl(e){this._internalRoot=e}gl.prototype.unstable_scheduleHydration=function(e){if(e){var s=Yu();e={blockedOn:null,target:e,priority:s};for(var a=0;a<fs.length&&s!==0&&s<fs[a].priority;a++);fs.splice(a,0,e),a===0&&Rg(e)}};var Og=t.version;if(Og!=="19.1.1")throw Error(n(527,Og,"19.1.1"));U.findDOMNode=function(e){var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=d(s),e=e!==null?f(e):null,e=e===null?null:e.stateNode,e};var ub={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{jn=pl.inject(ub),Ie=pl}catch{}}return Ha.createRoot=function(e,s){if(!r(e))throw Error(n(299));var a=!1,l="",h=Yd,g=$d,v=Kd,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=_g(e,1,!1,null,null,a,l,h,g,v,S,null),e[Vs]=s.current,Oc(e),new Qc(s)},Ha.hydrateRoot=function(e,s,a){if(!r(e))throw Error(n(299));var l=!1,h="",g=Yd,v=$d,S=Kd,T=null,P=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(T=a.unstable_transitionCallbacks),a.formState!==void 0&&(P=a.formState)),s=_g(e,1,!0,s,a??null,l,h,g,v,S,T,P),s.context=wg(null),a=s.current,l=Xe(),l=jl(l),h=Qi(l),h.callback=null,Zi(a,h,l),a=l,s.current.lanes=a,Fn(s,a),yi(s),e[Vs]=s.current,Oc(e),new gl(s)},Ha.version="19.1.1",Ha}var qg;function Ab(){if(qg)return tu.exports;qg=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(t){console.error(t)}}return m(),tu.exports=vb(),tu.exports}var Sb=Ab();const Ce=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),du=[.001,0,0,.001,0,0],nu=1.35,$e={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ps={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},dp="pdfjs_internal_editor_",mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},_b={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ee={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},El={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},se={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Nn={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Nl={ERRORS:0,WARNINGS:1,INFOS:5},Cl={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ml={moveTo:0,lineTo:1,curveTo:2,closePath:3},wb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ol=Nl.WARNINGS;function Eb(m){Number.isInteger(m)&&(Ol=m)}function xb(){return Ol}function Ll(m){Ol>=Nl.INFOS&&console.log(`Info: ${m}`)}function bt(m){Ol>=Nl.WARNINGS&&console.log(`Warning: ${m}`)}function Bt(m){throw new Error(m)}function ae(m,t){m||Bt(t)}function Tb(m){switch(m?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fp(m,t=null,i=null){if(!m)return null;if(i&&typeof m=="string"&&(i.addDefaultProtocol&&m.startsWith("www.")&&m.match(/\./g)?.length>=2&&(m=`http://${m}`),i.tryConvertEncoding))try{m=Nb(m)}catch{}const n=t?URL.parse(m,t):URL.parse(m);return Tb(n)?n:null}function gp(m,t,i=!1){const n=URL.parse(m);return n?(n.hash=t,n.href):i&&fp(m,"http://example.com")?m.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Et(m,t,i,n=!1){return Object.defineProperty(m,t,{value:i,enumerable:!n,configurable:!0,writable:!1}),i}const Gs=function(){function t(i,n){this.message=i,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class Vg extends Gs{constructor(t,i){super(t,"PasswordException"),this.code=i}}class au extends Gs{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class fu extends Gs{constructor(t){super(t,"InvalidPDFException")}}class Ml extends Gs{constructor(t,i,n){super(t,"ResponseException"),this.status=i,this.missing=n}}class Cb extends Gs{constructor(t){super(t,"FormatError")}}class bs extends Gs{constructor(t){super(t,"AbortException")}}function pp(m){(typeof m!="object"||m?.length===void 0)&&Bt("Invalid argument for bytesToString");const t=m.length,i=8192;if(t<i)return String.fromCharCode.apply(null,m);const n=[];for(let r=0;r<t;r+=i){const o=Math.min(r+i,t),c=m.subarray(r,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function Qa(m){typeof m!="string"&&Bt("Invalid argument for stringToBytes");const t=m.length,i=new Uint8Array(t);for(let n=0;n<t;++n)i[n]=m.charCodeAt(n)&255;return i}function Mb(m){return String.fromCharCode(m>>24&255,m>>16&255,m>>8&255,m&255)}function Rb(){const m=new Uint8Array(4);return m[0]=1,new Uint32Array(m.buffer,0,1)[0]===1}function Db(){try{return new Function(""),!0}catch{return!1}}class Ae{static get isLittleEndian(){return Et(this,"isLittleEndian",Rb())}static get isEvalSupported(){return Et(this,"isEvalSupported",Db())}static get isOffscreenCanvasSupported(){return Et(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Et(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return Et(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return Et(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ru=Array.from(Array(256).keys(),m=>m.toString(16).padStart(2,"0"));class rt{static makeHexColor(t,i,n){return`#${ru[t]}${ru[i]}${ru[n]}`}static scaleMinMax(t,i){let n;t[0]?(t[0]<0&&(n=i[0],i[0]=i[2],i[2]=n),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(n=i[1],i[1]=i[3],i[3]=n),i[1]*=t[3],i[3]*=t[3]):(n=i[0],i[0]=i[1],i[1]=n,n=i[2],i[2]=i[3],i[3]=n,t[1]<0&&(n=i[1],i[1]=i[3],i[3]=n),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(n=i[0],i[0]=i[2],i[2]=n),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static applyTransform(t,i,n=0){const r=t[n],o=t[n+1];t[n]=r*i[0]+o*i[2]+i[4],t[n+1]=r*i[1]+o*i[3]+i[5]}static applyTransformToBezier(t,i,n=0){const r=i[0],o=i[1],c=i[2],u=i[3],d=i[4],f=i[5];for(let p=0;p<6;p+=2){const b=t[n+p],y=t[n+p+1];t[n+p]=b*r+y*c+d,t[n+p+1]=b*o+y*u+f}}static applyInverseTransform(t,i){const n=t[0],r=t[1],o=i[0]*i[3]-i[1]*i[2];t[0]=(n*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/o,t[1]=(-n*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/o}static axialAlignedBoundingBox(t,i,n){const r=i[0],o=i[1],c=i[2],u=i[3],d=i[4],f=i[5],p=t[0],b=t[1],y=t[2],A=t[3];let w=r*p+d,_=w,x=r*y+d,E=x,O=u*b+f,M=O,k=u*A+f,D=k;if(o!==0||c!==0){const I=o*p,j=o*y,K=c*b,Z=c*A;w+=K,E+=K,x+=Z,_+=Z,O+=I,D+=I,k+=j,M+=j}n[0]=Math.min(n[0],w,x,_,E),n[1]=Math.min(n[1],O,k,M,D),n[2]=Math.max(n[2],w,x,_,E),n[3]=Math.max(n[3],O,k,M,D)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const n=t[0],r=t[1],o=t[2],c=t[3],u=n**2+r**2,d=n*o+r*c,f=o**2+c**2,p=(u+f)/2,b=Math.sqrt(p**2-(u*f-d**2));i[0]=Math.sqrt(p+b||1),i[1]=Math.sqrt(p-b||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const n=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(n>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return o>c?null:[n,o,r,c]}static pointBoundingBox(t,i,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],i),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],i)}static rectBoundingBox(t,i,n,r,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],i,r),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],i,r)}static#t(t,i,n,r,o,c,u,d,f,p){if(f<=0||f>=1)return;const b=1-f,y=f*f,A=y*f,w=b*(b*(b*t+3*f*i)+3*y*n)+A*r,_=b*(b*(b*o+3*f*c)+3*y*u)+A*d;p[0]=Math.min(p[0],w),p[1]=Math.min(p[1],_),p[2]=Math.max(p[2],w),p[3]=Math.max(p[3],_)}static#e(t,i,n,r,o,c,u,d,f,p,b,y){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,i,n,r,o,c,u,d,-b/p,y);return}const A=p**2-4*b*f;if(A<0)return;const w=Math.sqrt(A),_=2*f;this.#t(t,i,n,r,o,c,u,d,(-p+w)/_,y),this.#t(t,i,n,r,o,c,u,d,(-p-w)/_,y)}static bezierBoundingBox(t,i,n,r,o,c,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],i,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],i,d),this.#e(t,n,o,u,i,r,c,d,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),this.#e(t,n,o,u,i,r,c,d,3*(-i+3*(r-c)+d),6*(i-2*r+c),3*(r-i),f)}}function Nb(m){return decodeURIComponent(escape(m))}let lu=null,Xg=null;function Ob(m){return lu||(lu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Xg=new Map([["ﬅ","ſt"]])),m.replaceAll(lu,(t,i,n)=>i?i.normalize("NFKC"):Xg.get(n))}function mp(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const m=new Uint8Array(32);return crypto.getRandomValues(m),pp(m)}const Eu="pdfjs_internal_id_";function Lb(m,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[n,r,...o]=i;if(!m(n)&&!Number.isInteger(n)||!t(r))return!1;const c=o.length;let u=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Me(m,t,i){return Math.min(Math.max(m,t),i)}function bp(m){return Uint8Array.prototype.toBase64?m.toBase64():btoa(pp(m))}function kb(m){return Uint8Array.fromBase64?Uint8Array.fromBase64(m):Qa(atob(m))}typeof Promise.try!="function"&&(Promise.try=function(m,...t){return new Promise(i=>{i(m(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(m){return m.reduce((t,i)=>t+i,0)});const Fi="http://www.w3.org/2000/svg";class In{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Za(m,t="text"){if(Ga(m,document.baseURI)){const i=await fetch(m);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,n)=>{const r=new XMLHttpRequest;r.open("GET",m,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Wa{constructor({viewBox:t,userUnit:i,scale:n,rotation:r,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=n,this.rotation=r,this.offsetX=o,this.offsetY=c,n*=i;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,b,y,A;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,b=0,y=0,A=1;break;case 90:p=0,b=1,y=1,A=0;break;case 270:p=0,b=-1,y=-1,A=0;break;case 0:p=1,b=0,y=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,A=-A);let w,_,x,E;p===0?(w=Math.abs(f-t[1])*n+o,_=Math.abs(d-t[0])*n+c,x=(t[3]-t[1])*n,E=(t[2]-t[0])*n):(w=Math.abs(d-t[0])*n+o,_=Math.abs(f-t[1])*n+c,x=(t[2]-t[0])*n,E=(t[3]-t[1])*n),this.transform=[p*n,b*n,y*n,A*n,w-p*n*d-y*n*f,_-b*n*d-A*n*f],this.width=x,this.height=E}get rawDims(){const t=this.viewBox;return Et(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Wa({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:n,offsetY:r,dontFlip:o})}convertToViewportPoint(t,i){const n=[t,i];return rt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const i=[t[0],t[1]];rt.applyTransform(i,this.transform);const n=[t[2],t[3]];return rt.applyTransform(n,this.transform),[i[0],i[1],n[0],n[1]]}convertToPdfPoint(t,i){const n=[t,i];return rt.applyInverseTransform(n,this.transform),n}}class xu extends Gs{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function kl(m){const t=m.length;let i=0;for(;i<t&&m[i].trim()==="";)i++;return m.substring(i,i+5).toLowerCase()==="data:"}function Tu(m){return typeof m=="string"&&/\.pdf$/i.test(m)}function zb(m){return[m]=m.split(/[#?]/,1),m.substring(m.lastIndexOf("/")+1)}function Pb(m,t="document.pdf"){if(typeof m!="string")return t;if(kl(m))return bt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(m);if(!n)return t;const r=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,c=n.pathname.split("/").at(-1);if(o.test(c))return r(c);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(o.test(f))return r(f);const d=Array.from(n.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return r(f)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return r(d[0])}return t}class Yg{started=Object.create(null);times=[];time(t){t in this.started&&bt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||bt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:n}of this.times)i=Math.max(n.length,i);for(const{name:n,start:r,end:o}of this.times)t.push(`${n.padEnd(i)} ${o-r}ms
`);return t.join("")}}function Ga(m,t){const i=t?URL.parse(m,t):URL.parse(m);return i?.protocol==="http:"||i?.protocol==="https:"}function li(m){m.preventDefault()}function ne(m){m.preventDefault(),m.stopPropagation()}function Bb(m){console.log("Deprecated API usage: "+m)}class gu{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const n=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(i[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(i[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(i[6],10);d=d>=0&&d<=59?d:0;const f=i[7]||"Z";let p=parseInt(i[8],10);p=p>=0&&p<=23?p:0;let b=parseInt(i[9],10)||0;return b=b>=0&&b<=59?b:0,f==="-"?(c+=p,u+=b):f==="+"&&(c-=p,u-=b),new Date(Date.UTC(n,r,o,c,u,d))}}function Hb(m,{scale:t=1,rotation:i=0}){const{width:n,height:r}=m.attributes.style,o=[0,0,parseInt(n),parseInt(r)];return new Wa({viewBox:o,userUnit:1,scale:t,rotation:i})}function zl(m){if(m.startsWith("#")){const t=parseInt(m.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return m.startsWith("rgb(")?m.slice(4,-1).split(",").map(t=>parseInt(t)):m.startsWith("rgba(")?m.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(bt(`Not a valid color format: "${m}"`),[0,0,0])}function Ib(m){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of m.keys()){t.style.color=i;const n=window.getComputedStyle(t).color;m.set(i,zl(n))}t.remove()}function Vt(m){const{a:t,b:i,c:n,d:r,e:o,f:c}=m.getTransform();return[t,i,n,r,o,c]}function Si(m){const{a:t,b:i,c:n,d:r,e:o,f:c}=m.getTransform().invertSelf();return[t,i,n,r,o,c]}function Us(m,t,i=!1,n=!0){if(t instanceof Wa){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:c}=m,u=Ae.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,b=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!i||t.rotation%180===0?(c.width=p,c.height=b):(c.width=b,c.height=p)}n&&m.setAttribute("data-main-rotation",t.rotation)}class xi{constructor(){const{pixelRatio:t}=xi;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,n,r,o=-1){let c=1/0,u=1/0,d=1/0;n=xi.capPixels(n,o),n>0&&(c=Math.sqrt(n/(t*i))),r!==-1&&(u=r/t,d=r/i);const f=Math.min(c,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,n):n}return t}}const pu=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Xa{#t=null;#e=null;#i;#s=null;#a=null;#n=null;#r=null;static#l=null;constructor(t){this.#i=t,Xa.#l||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#i._uiManager._signal;t.addEventListener("contextmenu",li,{signal:i}),t.addEventListener("pointerdown",Xa.#u,{signal:i});const n=this.#s=document.createElement("div");n.className="buttons",t.append(n);const r=this.#i.toolbarPosition;if(r){const{style:o}=t,c=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#u(t){t.stopPropagation()}#c(t){this.#i._focusEventsAllowed=!1,ne(t)}#d(t){this.#i._focusEventsAllowed=!0,ne(t)}#o(t){const i=this.#i._uiManager._signal;t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",li,{signal:i})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#a?.shown(),this.#n?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#i,n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",Xa.#l[t]),this.#o(n),n.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#s.append(n)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#o(i),this.#s.append(i,this.#g),this.#a=t}addComment(t){if(this.#n)return;const i=t.render();i&&(this.#o(i),this.#s.prepend(i,this.#g),this.#n=t,t.toolbar=this)}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#o(i),this.#s.append(i,this.#g)}async addEditSignatureButton(t){const i=this.#r=await t.renderEditButton(this.#i);this.#o(i),this.#s.append(i,this.#g)}async addButton(t,i){switch(t){case"colorPicker":this.addColorPicker(i);break;case"altText":await this.addAltText(i);break;case"editSignature":await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(i);break}}updateEditSignatureButton(t){this.#r&&(this.#r.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class jb{#t=null;#e=null;#i;constructor(t){this.#i=t}#s(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",li,{signal:this.#i._signal});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#n(),t}#a(t,i){let n=0,r=0;for(const o of t){const c=o.y+o.height;if(c<n)continue;const u=o.x+(i?o.width:0);if(c>n){r=u,n=c;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,n]}show(t,i,n){const[r,o]=this.#a(i,n),{style:c}=this.#e||=this.#s();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#n(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const i=document.createElement("span");t.append(i),i.className="visuallyHidden",i.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=this.#i._signal;t.addEventListener("contextmenu",li,{signal:n}),t.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:n}),this.#t.append(t)}}function yp(m,t,i){for(const n of i)t.addEventListener(n,m[n].bind(m))}class Ub{#t=0;get id(){return`${dp}${this.#t++}`}}class Cu{#t=mp();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Et(this,"_isSVGFittingCanvas",o)}async#s(t,i){this.#i||=new Map;let n=this.#i.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(n.url=i,r=await Za(i,"blob")):i instanceof File?r=n.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const o=Cu._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},c.onload=async()=>{const b=n.svgUrl=c.result;u.src=await o?`${b}#svgView(preserveAspectRatio(none))`:b},u.onerror=c.onerror=p});c.readAsDataURL(r),await d}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){bt(r),n=null}return this.#i.set(t,n),n&&this.#i.set(n.id,n),n}async getFromFile(t){const{lastModified:i,name:n,size:r,type:o}=t;return this.#s(`${i}_${n}_${r}_${o}`,t)}async getFromUrl(t){return this.#s(t,t)}async getFromBlob(t,i){const n=await i;return this.#s(t,n)}async getFromId(t){this.#i||=new Map;const i=this.#i.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:n}=i;return delete i.blobPromise,this.getFromBlob(i.id,n)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#i||=new Map;let n=this.#i.get(t);if(n?.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,n),this.#i.set(n.id,n),n}getSvgUrl(t){const i=this.#i.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#i||=new Map;const i=this.#i.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:n}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),i.blobPromise=r.convertToBlob()}n.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class Fb{#t=[];#e=!1;#i;#s=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:i,post:n,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:i,post:n,type:o};if(this.#s===-1){this.#t.length>0&&(this.#t.length=0),this.#s=0,this.#t.push(d);return}if(c&&this.#t[this.#s].type===o){u&&(d.undo=this.#t[this.#s].undo),this.#t[this.#s]=d;return}const f=this.#s+1;f===this.#i?this.#t.splice(0,1):(this.#s=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#s===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#s];t(),i?.(),this.#e=!1,this.#s-=1}redo(){if(this.#s<this.#t.length-1){this.#s+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#s];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#t.length-1}cleanType(t){if(this.#s!==-1){for(let i=this.#s;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#s-i),this.#s=i;return}this.#t.length=0,this.#s=-1}}destroy(){this.#t=null}}class Ja{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=Ae.platform;for(const[n,r,o={}]of t)for(const c of n){const u=c.startsWith("mac+");i&&u?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!i&&!u&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const n=this.callbacks.get(this.#t(i));if(!n)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:u=null}}=n;u&&!u(t,i)||(r.bind(t,...c,i)(),o||ne(i))}}class Mu{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Ib(t),Et(this,"_colors",t)}convert(t){const i=zl(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[n,r]of this._colors)if(r.every((o,c)=>o===i[c]))return Mu._colorsMapping.get(n);return i}getHexCode(t){const i=this._colors.get(t);return i?rt.makeHexColor(...i):t}}class ys{#t=new AbortController;#e=null;#i=new Map;#s=new Map;#a=null;#n=null;#r=null;#l=new Fb;#u=null;#c=null;#d=null;#o=0;#g=new Set;#m=null;#f=null;#h=new Set;_editorUndoBar=null;#p=!1;#v=!1;#b=!1;#S=null;#_=null;#y=null;#E=null;#R=!1;#w=null;#D=new Ub;#M=!1;#C=!1;#T=null;#O=null;#B=null;#L=null;#U=null;#x=mt.NONE;#A=new Set;#H=null;#I=null;#F=null;#V=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#G=[0,0];#k=null;#z=null;#q=null;#Q=null;#P=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=ys.prototype,i=c=>c.#z.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Et(this,"_keyboardManager",new Ja([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#z.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#z.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(t,i,n,r,o,c,u,d,f,p,b,y,A,w,_,x){const E=this._signal=this.#t.signal;this.#z=t,this.#q=i,this.#Q=n,this.#a=r,this.#u=o,this.#I=c,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",O=>this.updateParams(O.type,O.value),{signal:E}),this.#at(),this.#ct(),this.#W(),this.#n=d.annotationStorage,this.#S=d.filterFactory,this.#F=f,this.#E=p||null,this.#p=b,this.#v=y,this.#b=A,this.#U=w||null,this.viewParameters={realScale:In.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=x!==!1}destroy(){this.#P?.resolve(),this.#P=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#s.values())t.destroy();this.#s.clear(),this.#i.clear(),this.#h.clear(),this.#L?.clear(),this.#e=null,this.#A.clear(),this.#l.destroy(),this.#a?.destroy(),this.#u?.destroy(),this.#I?.destroy(),this.#w?.hide(),this.#w=null,this.#B?.destroy(),this.#B=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#k&&(clearTimeout(this.#k),this.#k=null),this._editorUndoBar?.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#U}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return Et(this,"hcmFilter",this.#F?this.#S.addHCMFilter(this.#F.foreground,this.#F.background):"none")}get direction(){return Et(this,"direction",getComputedStyle(this.#z).direction)}get _highlightColors(){return Et(this,"_highlightColors",this.#E?new Map(this.#E.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Et(this,"highlightColors",null);const i=new Map,n=!!this.#F;for(const[r,o]of t){const c=r.endsWith("_HCM");if(n&&c){i.set(r.replace("_HCM",""),o);continue}!n&&!c&&i.set(r,o)}return Et(this,"highlightColors",i)}get highlightColorNames(){return Et(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=t}setMainHighlightColorPicker(t){this.#B=t}editAltText(t,i=!1){this.#a?.editAltText(this,t,i)}hasCommentManager(){return!!this.#u}editComment(t,i){this.#u?.open(this,t,i)}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=i;break}}onPageChanging({pageNumber:t}){this.#o=t-1}focusMainContainer(){this.#z.focus()}findParent(t,i){for(const n of this.#s.values()){const{x:r,y:o,width:c,height:u}=n.div.getBoundingClientRect();if(t>=r&&t<=r+c&&i>=o&&i<=o+u)return n}return null}disableUserSelect(t=!1){this.#q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#h.add(t)}removeShouldRescale(t){this.#h.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*In.PDF_TO_CSS_UNITS;for(const i of this.#h)i.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#$({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#Z(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const n of this.#s.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t=""){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:c}=i,u=i.toString(),f=this.#$(i).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;i.empty();const b=this.#Z(f),y=this.#x===mt.NONE,A=()=>{b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:c,text:u}),y&&this.showAllEditors("highlight",!0,!0)};if(y){this.switchToMode(mt.HIGHLIGHT,A);return}A()}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#$(t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(this.#w||=new jb(this),this.#w.show(n,r,this.direction==="ltr"))}addToAnnotationStorage(t){!t.isEmpty()&&this.#n&&!this.#n.has(t.id)&&this.#n.setValue(t.id,t)}a11yAlert(t,i=null){const n=this.#Q;n&&(n.setAttribute("data-l10n-id",t),i?n.setAttribute("data-l10n-args",JSON.stringify(i)):n.removeAttribute("data-l10n-args"))}#nt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#H&&(this.#w?.hide(),this.#H=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#H)return;const r=this.#$(t).closest(".textLayer");if(!r){this.#H&&(this.#w?.hide(),this.#H=null,this.#N({hasSelectedText:!1}));return}if(this.#w?.hide(),this.#H=i,this.#N({hasSelectedText:!0}),!(this.#x!==mt.HIGHLIGHT&&this.#x!==mt.NONE)&&(this.#x===mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#R=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#x===mt.HIGHLIGHT?this.#Z(r):null;o?.toggleDrawing();const c=new AbortController,u=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}}#K(t=""){this.#x===mt.HIGHLIGHT?this.highlightSelection(t):this.#p&&this.#st()}#at(){document.addEventListener("selectionchange",this.#nt.bind(this),{signal:this._signal})}#rt(){if(this.#y)return;this.#y=new AbortController;const t=this.combinedSignal(this.#y);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#y?.abort(),this.#y=null}blur(){if(this.isShiftKeyDown=!1,this.#R&&(this.#R=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#A)if(i.div.contains(t)){this.#O=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[t,i]=this.#O;this.#O=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#W(){if(this.#T)return;this.#T=new AbortController;const t=this.combinedSignal(this.#T);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ot(){this.#T?.abort(),this.#T=null}#J(){if(this.#c)return;this.#c=new AbortController;const t=this.combinedSignal(this.#c);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#tt(){this.#c?.abort(),this.#c=null}#ct(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#W(),this.#J()}removeEditListeners(){this.#ot(),this.#tt()}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const n of this.#f)if(n.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const n of this.#f)if(n.isHandlingMimeForPasting(i.type)){n.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const n of this.#A){const r=n.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const o of i.items)for(const c of this.#f)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=i.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){bt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of n){const f=await r.deserialize(d);if(!f)return;o.push(f)}const c=()=>{for(const d of o)this.#et(d);this.#it(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){bt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#x!==mt.NONE&&!this.isEditorHandlingKeyboard&&ys._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#R&&(this.#R=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#N(t){Object.entries(t).some(([n,r])=>this.#X[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#x===mt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#j([[Ct.HIGHLIGHT_FREE,!0]]))}#j(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#rt(),this.#J(),this.#N({isEditing:this.#x!==mt.NONE,isEmpty:this.#Y(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#tt(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#f){this.#f=t;for(const i of this.#f)this.#j(i.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#s.get(this.#o)}getLayer(t){return this.#s.get(t)}get currentPageIndex(){return this.#o}addLayer(t){this.#s.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#s.delete(t.pageIndex)}async updateMode(t,i=null,n=!1,r=!1,o=!1){if(this.#x!==t&&!(this.#P&&(await this.#P.promise,!this.#P))){if(this.#P=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#x=t,t===mt.NONE){this.setEditingState(!1),this.#ht(),this._editorUndoBar?.hide(),this.#P.resolve();return}t===mt.SIGNATURE&&await this.#I?.loadSignatures(),this.setEditingState(!0),await this.#ut(),this.unselectAll();for(const c of this.#s.values())c.updateMode(t);if(!i){n&&this.addNewEditorFromKeyboard(),this.#P.resolve();return}for(const c of this.#i.values())c.annotationElementId===i||c.id===i?(this.setSelected(c),o?c.editComment():r&&c.enterInEditMode()):c.unselect();this.#P.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#x&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#f){switch(t){case Ct.CREATE:this.currentLayer.addNewEditor(i);return;case Ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#V||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const n of this.#A)n.updateParams(t,i);else for(const n of this.#f)n.updateDefaultParams(t,i)}}showAllEditors(t,i,n=!1){for(const o of this.#i.values())o.editorType===t&&o.show(i);(this.#V?.get(Ct.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#j([[Ct.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#C!==t){this.#C=t;for(const i of this.#s.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ut(){if(!this.#M){this.#M=!0;const t=[];for(const i of this.#s.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#ht(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#s.values())t.disable();for(const t of this.#i.values())t.disable()}}getEditors(t){const i=[];for(const n of this.#i.values())n.pageIndex===t&&i.push(n);return i}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#L?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#n?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#et(t){const i=this.#s.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#j(t.propertiesToUpdate))}get#dt(){let t=null;for(t of this.#A);return t}updateUI(t){this.#dt===t&&this.#j(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#j(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#A.has(t)){this.#A.delete(t),t.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#A.add(t),t.select(),this.#j(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#d?.commitOrRemove();for(const i of this.#A)i!==t&&i.unselect();this.#A.clear(),this.#A.add(t),t.select(),this.#j(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(t){return this.#A.has(t)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(t){t.unselect(),this.#A.delete(t),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#N({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Y()}),this._editorUndoBar?.hide()}redo(){this.#l.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#Y()})}addCommands(t){this.#l.add(t),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Y()})}cleanUndoStack(t){this.#l.cleanType(t)}#Y(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#A],n=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const o of i)o.remove()},r=()=>{for(const o of i)this.#et(o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#it(t){for(const i of this.#A)i.unselect();this.#A.clear();for(const i of t)i.isEmpty()||(this.#A.add(i),i.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#A)t.commit();this.#it(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#x!==mt.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const t of this.#A)t.unselect();this.#A.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#G[0]+=t,this.#G[1]+=i;const[r,o]=this.#G,c=[...this.#A],u=1e3;this.#k&&clearTimeout(this.#k),this.#k=setTimeout(()=>{this.#k=null,this.#G[0]=this.#G[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(r,o),d.translationDone())},undo:()=>{for(const d of c)this.#i.has(d.id)&&(d.translateInPage(-r,-o),d.translationDone())},mustExec:!1})},u);for(const d of c)d.translateInPage(t,i),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#A)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let i=!1;for(const[{x:r,y:o,pageIndex:c},u]of t)u.newX=r,u.newY=o,u.newPageIndex=c,i||=r!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!i)return!1;const n=(r,o,c,u)=>{if(this.#i.has(r.id)){const d=this.#s.get(u);d?r._setParentAndPosition(d,o,c):(r.pageIndex=u,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:u}]of t)n(r,o,c,u)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:u}]of t)n(r,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#m)for(const n of this.#m.keys())n.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#x}get imageManager(){return Et(this,"imageManager",new Cu)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let f=0,p=i.rangeCount;f<p;f++)if(!t.contains(i.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:r,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,b,y)=>({x:(p-r)/c,y:1-(f+b-n)/o,width:y/c,height:b/o});break;case"180":u=(f,p,b,y)=>({x:1-(f+b-n)/o,y:1-(p+y-r)/c,width:b/o,height:y/c});break;case"270":u=(f,p,b,y)=>({x:1-(p+y-r)/c,y:(f-n)/o,width:y/c,height:b/o});break;default:u=(f,p,b,y)=>({x:(f-n)/o,y:(p-r)/c,width:b/o,height:y/c});break}const d=[];for(let f=0,p=i.rangeCount;f<p;f++){const b=i.getRangeAt(f);if(!b.collapsed)for(const{x:y,y:A,width:w,height:_}of b.getClientRects())w===0||_===0||d.push(u(y,A,w,_))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#r||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#r?.delete(t)}renderAnnotationElement(t){const i=this.#r?.get(t.data.id);if(!i)return;const n=this.#n.getRawValue(i);n&&(this.#x===mt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,i,n){const r=this.#L?.get(t);r&&(r.setCanvas(i,n),this.#L.delete(t))}addMissingCanvas(t,i){(this.#L||=new Map).set(t,i)}}class Ei{#t=null;#e=!1;#i=null;#s=null;#a=null;#n=null;#r=!1;#l=null;#u=null;#c=null;#d=null;#o=!1;static#g=null;static _l10n=null;constructor(t){this.#u=t,this.#o=t._uiManager.useNewAltTextFlow,Ei.#g||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Ei._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#s=document.createElement("span");t.append(i),this.#o?(t.classList.add("new"),t.setAttribute("data-l10n-id",Ei.#g.missing),i.setAttribute("data-l10n-id",Ei.#g["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#u._uiManager._signal;t.addEventListener("contextmenu",li,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const r=o=>{o.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#o&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#r=!0,r(o))},{signal:n}),await this.#f(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#o?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#o?this.#t!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(t){this.#t===null&&(this.#c=t,this.#d=await Ei._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#f())}toggleAltTextBadge(t=!1){if(!this.#o||this.#t){this.#l?.remove(),this.#l=null;return}if(!this.#l){const i=this.#l=document.createElement("div");i.className="noAltTextBadge",this.#u.div.append(i)}this.#l.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#c===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#c,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:n,textWithDisclaimer:r,cancel:o=!1}){n&&(this.#c=n,this.#d=r),!(this.#t===t&&this.#e===i)&&(o||(this.#t=t,this.#e=i),this.#f())}toggle(t=!1){this.#i&&(!t&&this.#n&&(clearTimeout(this.#n),this.#n=null),this.#i.disabled=!t)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#s=null,this.#a=null,this.#l?.remove(),this.#l=null}async#f(){const t=this.#i;if(!t)return;if(this.#o){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Ei.#g[this.#m]),this.#s?.setAttribute("data-l10n-id",Ei.#g[`${this.#m}-label`]),!this.#t){this.#a?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#a?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#a;if(!i){this.#a=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#u.id}`;const r=100,o=this.#u._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#n),this.#n=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#n=setTimeout(()=>{this.#n=null,this.#a.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#n&&(clearTimeout(this.#n),this.#n=null),this.#a?.classList.remove("show")},{signal:o})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#u.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class bl{#t=null;#e=!1;#i=null;#s=null;#a=null;#n=null;#r=!1;constructor(t){this.#i=t,this.toolbar=null}render(){if(!this.#i._uiManager.hasCommentManager())return null;const t=this.#t=document.createElement("button");t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const i=this.#i._uiManager._signal;t.addEventListener("contextmenu",li,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const n=r=>{r.preventDefault(),this.edit()};return t.addEventListener("click",n,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(this.#e=!0,n(r))},{signal:i}),t}edit(){const{bottom:t,left:i,right:n}=this.#i.getClientDimensions(),r={top:t};this.#i._uiManager.direction==="ltr"?r.right=n:r.left=i,this.#i._uiManager.editComment(this.#i,r)}finish(){this.#t&&(this.#t.focus({focusVisible:this.#e}),this.#e=!1)}isDeleted(){return this.#r||this.#a===""}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#s}serialize(){return this.data}get data(){return{text:this.#a,date:this.#n,deleted:this.#r}}set data(t){if(t===null){this.#a="",this.#r=!0;return}this.#a=t,this.#n=new Date,this.#r=!1}setInitialText(t){this.#s=t,this.data=t}toggle(t=!1){this.#t&&(this.#t.disabled=!t)}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#a="",this.#n=null,this.#i=null,this.#e=!1,this.#r=!1}}class Pl{#t;#e=!1;#i=null;#s;#a;#n;#r;#l=null;#u;#c=null;#d;#o=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#t=t,this.#i=n,this.#s=i,this.#a=r,this.#n=o,this.#r=c,this.#d=new AbortController,this.#u=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#g.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/xi.pixelRatio}#g(t){if(this.#s?.())return;if(t.touches.length===1){if(this.#l)return;const r=this.#l=new AbortController,o=AbortSignal.any([this.#u,r.signal]),c=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#l?.abort(),this.#l=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ne(f),d(f))},u),c.addEventListener("pointerup",d,u),c.addEventListener("pointercancel",d,u);return}if(!this.#o){this.#o=new AbortController;const r=AbortSignal.any([this.#u,this.#o.signal]),o=this.#t,c={signal:r,capture:!1,passive:!1};o.addEventListener("touchmove",this.#m.bind(this),c);const u=this.#f.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",ne,c),o.addEventListener("pointermove",ne,c),o.addEventListener("pointercancel",ne,c),o.addEventListener("pointerup",ne,c),this.#a?.()}if(ne(t),t.touches.length!==2||this.#i?.()){this.#c=null;return}let[i,n]=t.touches;i.identifier>n.identifier&&([i,n]=[n,i]),this.#c={touch0X:i.screenX,touch0Y:i.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#m(t){if(!this.#c||t.touches.length!==2)return;ne(t);let[i,n]=t.touches;i.identifier>n.identifier&&([i,n]=[n,i]);const{screenX:r,screenY:o}=i,{screenX:c,screenY:u}=n,d=this.#c,{touch0X:f,touch0Y:p,touch1X:b,touch1Y:y}=d,A=b-f,w=y-p,_=c-r,x=u-o,E=Math.hypot(_,x)||1,O=Math.hypot(A,w)||1;if(!this.#e&&Math.abs(O-E)<=Pl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=o,d.touch1X=c,d.touch1Y=u,!this.#e){this.#e=!0;return}const M=[(r+c)/2,(o+u)/2];this.#n?.(M,O,E)}#f(t){t.touches.length>=2||(this.#o&&(this.#o.abort(),this.#o=null,this.#r?.()),this.#c&&(ne(t),this.#c=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#l?.abort(),this.#l=null}}class lt{#t=null;#e=null;#i=null;#s=null;#a=!1;#n=null;#r="";#l=!1;#u=null;#c=null;#d=null;#o=null;#g="";#m=!1;#f=null;#h=!1;#p=!1;#v=!1;#b=null;#S=0;#_=0;#y=null;#E=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#R=!1;#w=lt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Mu;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=lt.prototype._resizeWithKeyboard,i=ys.TRANSLATE_SMALL,n=ys.TRANSLATE_BIG;return Et(this,"_resizerKeyboardManager",new Ja([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],lt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:i,rawDims:{pageWidth:n,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Et(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new Gb({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(lt._l10n??=t,lt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),lt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);lt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){Bt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#R}set _isDraggable(t){this.#R=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#w}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#q(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,n,r){const[o,c]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/o,this.y=(i+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[n,r]=this.parentDimensions;this.setAt(t*n,i*r,this.width*n,this.height*r),this._onTranslated()}#D([t,i],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#D(this.parentDimensions,t,i)}translateInPage(t,i){this.#f||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#f||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=i/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[d,f]=this.getBaseTranslation();c+=d,u+=f;const{style:p}=n;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#f&&(this.#f[0]!==this.x||this.#f[1]!==this.y)}get _hasBeenResized(){return!!this.#f&&(this.#f[2]!==this.width||this.#f[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:n}=lt,r=n/t,o=n/i;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[n,r]}=this;let{x:o,y:c,width:u,height:d}=this;if(u*=n,d*=r,o*=n,c*=r,this._mustFixPosition)switch(t){case 0:o=Me(o,0,n-u),c=Me(c,0,r-d);break;case 90:o=Me(o,0,n-d),c=Me(c,u,r);break;case 180:o=Me(o,u,n),c=Me(c,d,r);break;case 270:o=Me(o,d,n),c=Me(c,0,r-u);break}this.x=o/=n,this.y=c/=r;const[f,p]=this.getBaseTranslation();o+=f,c+=p,i.left=`${(100*o).toFixed(2)}%`,i.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#M(t,i,n){switch(n){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return lt.#M(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return lt.#M(t,i,360-this.parentRotation)}#C(t){switch(t){case 90:{const[i,n]=this.pageDimensions;return[0,-i/n,n/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,n]=this.pageDimensions;return[0,i/n,-n/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,n]}=this;return[i*t,n*t]}setDims(t,i){const[n,r]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/n).toFixed(2)}%`,this.#l||(o.height=`${(100*i/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:i,width:n}=t,r=n.endsWith("%"),o=!this.#l&&i.endsWith("%");if(r&&o)return;const[c,u]=this.parentDimensions;r||(t.width=`${(100*parseFloat(n)/c).toFixed(2)}%`),!this.#l&&!o&&(t.height=`${(100*parseFloat(i)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#T(){if(this.#u)return;this.#u=document.createElement("div"),this.#u.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const n of t){const r=document.createElement("div");this.#u.append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",this.#O.bind(this,n),{signal:i}),r.addEventListener("contextmenu",li,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#u)}#O(t,i){i.preventDefault();const{isMac:n}=Ae.platform;if(i.button!==0||i.ctrlKey&&n)return;this.#i?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#c=[i.screenX,i.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#U.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",ne,{passive:!1,signal:c}),window.addEventListener("contextmenu",li,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#L()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#B(t,i,n,r){this.width=n,this.height=r,this.x=t,this.y=i;const[o,c]=this.parentDimensions;this.setDims(o*n,c*r),this.fixAndSetPosition(),this._onResized()}_onResized(){}#L(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:n,savedHeight:r}=this.#d;this.#d=null;const o=this.x,c=this.y,u=this.width,d=this.height;o===t&&c===i&&u===n&&d===r||this.addCommands({cmd:this.#B.bind(this,o,c,u,d),undo:this.#B.bind(this,t,i,n,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#U(t,i){const[n,r]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,f=lt.MIN_SIZE/n,p=lt.MIN_SIZE/r,b=this.#C(this.rotation),y=(N,U)=>[b[0]*N+b[2]*U,b[1]*N+b[3]*U],A=this.#C(360-this.rotation),w=(N,U)=>[A[0]*N+A[2]*U,A[1]*N+A[3]*U];let _,x,E=!1,O=!1;switch(t){case"topLeft":E=!0,_=(N,U)=>[0,0],x=(N,U)=>[N,U];break;case"topMiddle":_=(N,U)=>[N/2,0],x=(N,U)=>[N/2,U];break;case"topRight":E=!0,_=(N,U)=>[N,0],x=(N,U)=>[0,U];break;case"middleRight":O=!0,_=(N,U)=>[N,U/2],x=(N,U)=>[0,U/2];break;case"bottomRight":E=!0,_=(N,U)=>[N,U],x=(N,U)=>[0,0];break;case"bottomMiddle":_=(N,U)=>[N/2,U],x=(N,U)=>[N/2,0];break;case"bottomLeft":E=!0,_=(N,U)=>[0,U],x=(N,U)=>[N,0];break;case"middleLeft":O=!0,_=(N,U)=>[0,U/2],x=(N,U)=>[N,U/2];break}const M=_(u,d),k=x(u,d);let D=y(...k);const I=lt._round(o+D[0]),j=lt._round(c+D[1]);let K=1,Z=1,tt,W;if(i.fromKeyboard)({deltaX:tt,deltaY:W}=i);else{const{screenX:N,screenY:U}=i,[et,St]=this.#c;[tt,W]=this.screenToPageTranslation(N-et,U-St),this.#c[0]=N,this.#c[1]=U}if([tt,W]=w(tt/n,W/r),E){const N=Math.hypot(u,d);K=Z=Math.max(Math.min(Math.hypot(k[0]-M[0]-tt,k[1]-M[1]-W)/N,1/u,1/d),f/u,p/d)}else O?K=Me(Math.abs(k[0]-M[0]-tt),f,1)/u:Z=Me(Math.abs(k[1]-M[1]-W),p,1)/d;const ot=lt._round(u*K),At=lt._round(d*Z);D=y(...x(ot,At));const gt=I-D[0],dt=j-D[1];this.#f||=[this.x,this.y,this.width,this.height],this.width=ot,this.height=At,this.x=gt,this.y=dt,this.setDims(n*ot,r*At),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#p)return this._editToolbar;this._editToolbar=new Xa(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:t}=this;if(t)for(const[i,n]of t)await this._editToolbar.addButton(i,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Ei.initialize(lt._l10n),this.#i=new Ei(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}addCommentButton(){return this.#s?this.#s:this.#s=new bl(this)}get commentColor(){return null}get comment(){const t=this.#s;return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){this.#s||(this.#s=new bl(this)),this.#s.data=t}setCommentData(t){this.#s||(this.#s=new bl(this)),this.#s.setInitialText(t)}get hasEditedComment(){return this.#s?.hasBeenEdited()}async editComment(){this.#s||(this.#s=new bl(this)),this.#s.edit()}addComment(t){this.hasEditedComment&&(t.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#V();const[i,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/n).toFixed(2)}%`);const[r,o]=this.getInitialTranslation();return this.translate(r,o),yp(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#E||=new Pl({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#x.bind(this),onPinching:this.#A.bind(this),onPinchEnd:this.#H.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#x(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#A(t,i,n){let o=.7*(n/i)+1-.7;if(o===1)return;const c=this.#C(this.rotation),u=(I,j)=>[c[0]*I+c[2]*j,c[1]*I+c[3]*j],[d,f]=this.parentDimensions,p=this.x,b=this.y,y=this.width,A=this.height,w=lt.MIN_SIZE/d,_=lt.MIN_SIZE/f;o=Math.max(Math.min(o,1/y,1/A),w/y,_/A);const x=lt._round(y*o),E=lt._round(A*o);if(x===y&&E===A)return;this.#f||=[p,b,y,A];const O=u(y/2,A/2),M=lt._round(p+O[0]),k=lt._round(b+O[1]),D=u(x/2,E/2);this.x=M-D[0],this.y=k-D[1],this.width=x,this.height=E,this.setDims(d*x,f*E),this.fixAndSetPosition(),this._onResizing()}#H(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#L()}pointerdown(t){const{isMac:i}=Ae.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#F(t);return}this.#I(t)}#I(t){const{isMac:i}=Ae.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#F(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:o},u=f=>{r.abort(),this.#n=null,this.#m=!1,this._uiManager.endDragSession()||this.#I(f),n&&this._onStopDragging()};i&&(this.#S=t.clientX,this.#_=t.clientY,this.#n=t.pointerId,this.#r=t.pointerType,window.addEventListener("pointermove",f=>{n||(n=!0,this._onStartDragging());const{clientX:p,clientY:b,pointerId:y}=f;if(y!==this.#n){ne(f);return}const[A,w]=this.screenToPageTranslation(p-this.#S,b-this.#_);this.#S=p,this.#_=b,this._uiManager.dragSelectedEditors(A,w)},c),window.addEventListener("touchmove",ne,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#r&&(this.#E||f.isPrimary)&&u(f),ne(f)},c));const d=f=>{if(!this.#n||this.#n===f.pointerId){u(f);return}ne(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,n){t.changeParent(this),this.x=i,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,n=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/r,p=i/r,b=this.x*o,y=this.y*c,A=this.width*o,w=this.height*c;switch(n){case 0:return[b+f+u,c-y-p-w+d,b+f+A+u,c-y-p+d];case 90:return[b+p+u,c-y+f+d,b+p+w+u,c-y+f+A+d];case 180:return[b-f-A+u,c-y+p+d,b-f+u,c-y+p+w+d];case 270:return[b-p-w+u,c-y-f-A+d,b-p+u,c-y-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[n,r,o,c]=t,u=o-n,d=c-r;switch(this.rotation){case 0:return[n,i-c,u,d];case 90:return[n,i-r,d,u];case 180:return[o,i-r,u,d];case 270:return[o,i-c,d,u];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#p=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#p=!1,!0):!1}isInEditMode(){return this.#p}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return i<c&&r>0&&t<o&&n>0}#V(){if(this.#o||!this.div)return;this.#o=new AbortController;const t=this._uiManager.combinedSignal(this.#o);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#V()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){Bt("An editor must be serializable")}static async deserialize(t,i,n){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:n,annotationElementId:t.annotationElementId});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[o,c]=r.pageDimensions,[u,d,f,p]=r.getRectInCurrentCoords(t.rect,c);return r.x=u/o,r.y=d/c,r.width=f/o,r.height=p/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#o?.abort(),this.#o=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#q(),this.removeEditToolbar(),this.#y){for(const t of this.#y.values())clearTimeout(t);this.#y=null}this.parent=null,this.#E?.destroy(),this.#E=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#T(),this.#u.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#u.children;if(!this.#e){this.#e=Array.from(i);const c=this.#X.bind(this),u=this.#G.bind(this),d=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#k.bind(this,p),{signal:d}),f.setAttribute("data-l10n-id",lt._l10nResizer[p])}}const n=this.#e[0];let r=0;for(const c of i){if(c===n)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)this.#u.append(this.#u.firstChild);else if(o>r)for(let u=0;u<o-r;u++)this.#u.firstChild.before(this.#u.lastChild);let c=0;for(const u of i){const f=this.#e[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",lt._l10nResizer[f])}}this.#z(0),this.#v=!0,this.#u.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){lt._resizerKeyboardManager.exec(this,t)}#G(t){this.#v&&t.relatedTarget?.parentNode!==this.#u&&this.#q()}#k(t){this.#g=this.#v?t:""}#z(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#U(this.#g,{deltaX:t,deltaY:i,fromKeyboard:!0})}#q(){this.#v=!1,this.#z(-1),this.#L()}_stopResizingWithKeyboard(){this.#q(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#u?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0))}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(t){this.#h=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,i){this.#l=!0;const n=t/i,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#y||=new Map;const{action:n}=t;let r=this.#y.get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#y.delete(n),this.#y.size===0&&(this.#y=null)},lt._telemetryTimeout),this.#y.set(n,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}renderAnnotationElement(t){let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const n=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),n.before(i)}return i}resetAnnotationElement(t){const{firstChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class Gb extends lt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const $g=3285377520,ai=4294901760,_i=65535;class vp{constructor(t){this.h1=t?t&4294967295:$g,this.h2=t?t&4294967295:$g}update(t){let i,n;if(typeof t=="string"){i=new Uint8Array(t.length*2),n=0;for(let _=0,x=t.length;_<x;_++){const E=t.charCodeAt(_);E<=255?i[n++]=E:(i[n++]=E>>>8,i[n++]=E&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),n=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,o=n-r*4,c=new Uint32Array(i.buffer,0,r);let u=0,d=0,f=this.h1,p=this.h2;const b=3432918353,y=461845907,A=b&_i,w=y&_i;for(let _=0;_<r;_++)_&1?(u=c[_],u=u*b&ai|u*A&_i,u=u<<15|u>>>17,u=u*y&ai|u*w&_i,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[_],d=d*b&ai|d*A&_i,d=d<<15|d>>>17,d=d*y&ai|d*w&_i,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*b&ai|u*A&_i,u=u<<15|u>>>17,u=u*y&ai|u*w&_i,r&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&ai|t*36045&_i,i=i*4283543511&ai|((i<<16|t>>>16)*2950163797&ai)>>>16,t^=i>>>1,t=t*444984403&ai|t*60499&_i,i=i*3301882366&ai|((i<<16|t>>>16)*3120437893&ai)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const mu=Object.freeze({map:null,hash:"",transfer:void 0});class Ru{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const n=this.#i.get(t);return n===void 0?i:Object.assign(i,n)}getRawValue(t){return this.#i.get(t)}remove(t){if(this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const i of this.#i.values())if(i instanceof lt)return;this.onAnnotationEditor(null)}}setValue(t,i){const n=this.#i.get(t);let r=!1;if(n!==void 0)for(const[o,c]of Object.entries(i))n[o]!==c&&(r=!0,n[o]=c);else r=!0,this.#i.set(t,i);r&&this.#s(),i instanceof lt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type)}has(t){return this.#i.has(t)}get size(){return this.#i.size}#s(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ap(this)}get serializable(){if(this.#i.size===0)return mu;const t=new Map,i=new vp,n=[],r=Object.create(null);let o=!1;for(const[c,u]of this.#i){const d=u instanceof lt?u.serialize(!1,r):u;d&&(t.set(c,d),i.update(`${c}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:n}:mu}get editorStats(){let t=null;const i=new Map;for(const n of this.#i.values()){if(!(n instanceof lt))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:o}=r;i.has(o)||i.set(o,Object.getPrototypeOf(n).constructor),t||=Object.create(null);const c=t[o]||=new Map;for(const[u,d]of Object.entries(r)){if(u==="type")continue;let f=c.get(u);f||(f=new Map,c.set(u,f));const p=f.get(d)??0;f.set(d,p+1)}}for(const[n,r]of i)t[n]=r.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;const t=[];for(const i of this.#i.values())!(i instanceof lt)||!i.annotationElementId||!i.serialize()||t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class Ap extends Ru{#t;constructor(t){super();const{map:i,hash:n,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);this.#t={map:o,hash:n,transfer:r}}get print(){Bt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Et(this,"modifiedIds",{ids:new Set,hash:""})}}class qb{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(ae(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:o,style:c}=t,u=new FontFace(r,o,c);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),n?.(t)}catch{bt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Bt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw bt(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Et(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Et(this,"isSyncFontLoadingSupported",Ce||Ae.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(ae(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:i,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Et(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function n(k,D){return k.charCodeAt(D)<<24|k.charCodeAt(D+1)<<16|k.charCodeAt(D+2)<<8|k.charCodeAt(D+3)&255}function r(k,D,I,j){const K=k.substring(0,D),Z=k.substring(D+I);return K+j+Z}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function p(k,D){if(++f>30){bt("Load test font never loaded."),D();return}if(d.font="30px "+k,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,k,D))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,b.length,b);const w=16,_=1482184792;let x=n(y,w);for(o=0,c=b.length-3;o<c;o+=4)x=x-_+n(b,o)|0;o<b.length&&(x=x-_+n(b+"XXX",o)|0),y=r(y,w,4,Mb(x));const E=`url(data:font/opentype;base64,${btoa(y)});`,O=`@font-face {font-family:"${b}";src:${E}}`;this.insertRule(O);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const k of[t.loadedName,b]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=k,M.append(D)}this._document.body.append(M),p(b,()=>{M.remove(),i.complete()})}}class Vb{constructor(t,i=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${bp(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const n=this.loadedName+"_path_"+i;let r;try{r=t.get(n)}catch(c){bt(`getPathGenerator - ignoring character: "${c}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[i]=o}}function Xb(m){if(m instanceof URL)return m.href;if(typeof m=="string"){if(Ce)return m;const t=URL.parse(m,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Yb(m){if(Ce&&typeof Buffer<"u"&&m instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength)return m;if(typeof m=="string")return Qa(m);if(m instanceof ArrayBuffer||ArrayBuffer.isView(m)||typeof m=="object"&&!isNaN(m?.length))return new Uint8Array(m);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function yl(m){if(typeof m!="string")return null;if(m.endsWith("/"))return m;throw new Error(`Invalid factory url: "${m}" must include trailing slash.`)}const bu=m=>typeof m=="object"&&Number.isInteger(m?.num)&&m.num>=0&&Number.isInteger(m?.gen)&&m.gen>=0,$b=m=>typeof m=="object"&&typeof m?.name=="string",Kb=Lb.bind(null,bu,$b);class Qb{#t=new Map;#e=Promise.resolve();postMessage(t,i){const n={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,n)})}addEventListener(t,i,n=null){let r=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){bt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,i);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const vl={DATA:1,ERROR:2},ie={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Kg(){}function Be(m){if(m instanceof bs||m instanceof fu||m instanceof Vg||m instanceof Ml||m instanceof au)return m;switch(m instanceof Error||typeof m=="object"&&m!==null||Bt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),m.name){case"AbortException":return new bs(m.message);case"InvalidPDFException":return new fu(m.message);case"PasswordException":return new Vg(m.message,m.code);case"ResponseException":return new Ml(m.message,m.status,m.missing);case"UnknownErrorException":return new au(m.message,m.details)}return new au(m.message,m.toString())}class qa{#t=new AbortController;constructor(t,i,n){this.sourceName=t,this.targetName=i,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#s(t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===vl.DATA)r.resolve(t.data);else if(t.callback===vl.ERROR)r.reject(Be(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(i,t.data).then(function(c){o.postMessage({sourceName:n,targetName:r,callback:vl.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:n,targetName:r,callback:vl.ERROR,callbackId:t.callbackId,reason:Be(c)})});return}if(t.streamId){this.#i(t);return}i(t.data)}on(t,i){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=i}send(t,i,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},n)}sendWithPromise(t,i,n){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,i,n,r){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:i,desiredSize:f.desiredSize},r),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,d.postMessage({sourceName:c,targetName:u,stream:ie.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{ae(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:ie.CANCEL,streamId:o,reason:Be(f)}),p.promise}},n)}#i(t){const i=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],d={enqueue(f,p=1,b){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:ie.ENQUEUE,streamId:i,chunk:f},b)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:ie.CLOSE,streamId:i}),delete c.streamSinks[i])},error(f){ae(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:ie.ERROR,streamId:i,reason:Be(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[i]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:ie.START_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:ie.START_COMPLETE,streamId:i,reason:Be(f)})})}#s(t){const i=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,c=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case ie.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Be(t.reason));break;case ie.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Be(t.reason));break;case ie.PULL:if(!u){o.postMessage({sourceName:n,targetName:r,stream:ie.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Kg).then(function(){o.postMessage({sourceName:n,targetName:r,stream:ie.PULL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:ie.PULL_COMPLETE,streamId:i,reason:Be(f)})});break;case ie.ENQUEUE:if(ae(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case ie.CLOSE:if(ae(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#a(c,i);break;case ie.ERROR:ae(c,"error should have stream controller"),c.controller.error(Be(t.reason)),this.#a(c,i);break;case ie.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Be(t.reason)),this.#a(c,i);break;case ie.CANCEL:if(!u)break;const d=Be(t.reason);Promise.try(u.onCancel||Kg,d).then(function(){o.postMessage({sourceName:n,targetName:r,stream:ie.CANCEL_COMPLETE,streamId:i,success:!0})},function(f){o.postMessage({sourceName:n,targetName:r,stream:ie.CANCEL_COMPLETE,streamId:i,reason:Be(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#a(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class Sp{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,i);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,n){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){Bt("Abstract method `_createCanvas` called.")}}class Zb extends Sp{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const n=this._document.createElement("canvas");return n.width=t,n.height=i,n}}class _p{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){Bt("Abstract method `_fetch` called.")}}class Qg extends _p{async _fetch(t){const i=await Za(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):Qa(i)}}class wp{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,n,r,o){return"none"}destroy(t=!1){}}class Wb extends wp{#t;#e;#i;#s;#a;#n;#r=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#s=t,this.#a=i}get#l(){return this.#e||=new Map}get#u(){return this.#n||=new Map}get#c(){if(!this.#i){const t=this.#a.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const n=this.#a.createElementNS(Fi,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#i=this.#a.createElementNS(Fi,"defs"),t.append(n),n.append(this.#i),this.#a.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let b=0;b<256;b++)f[b]=d[b]/255;const p=f.join(",");return[p,p,p]}const[i,n,r]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=i[d]/255,c[d]=n[d]/255,u[d]=r[d]/255;return[o.join(","),c.join(","),u.join(",")]}#o(t){if(this.#t===void 0){this.#t="";const i=this.#a.URL;i!==this.#a.baseURI&&(kl(i)?bt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=gp(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#l.get(t);if(i)return i;const[n,r,o]=this.#d(t),c=t.length===1?n:`${n}${r}${o}`;if(i=this.#l.get(c),i)return this.#l.set(t,i),i;const u=`g_${this.#s}_transfer_map_${this.#r++}`,d=this.#o(u);this.#l.set(t,d),this.#l.set(c,d);const f=this.#f(u);return this.#p(n,r,o,f),d}addHCMFilter(t,i){const n=`${t}-${i}`,r="base";let o=this.#u.get(r);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#u.set(r,o)),!t||!i))return o.url;const c=this.#b(t);t=rt.makeHexColor(...c);const u=this.#b(i);if(i=rt.makeHexColor(...u),this.#c.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const w=A/255;d[A]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=d.join(","),p=`g_${this.#s}_hcm_filter`,b=o.filter=this.#f(p);this.#p(f,f,f,b),this.#m(b);const y=(A,w)=>{const _=c[A]/255,x=u[A]/255,E=new Array(w+1);for(let O=0;O<=w;O++)E[O]=_+O/w*(x-_);return E.join(",")};return this.#p(y(0,5),y(1,5),y(2,5),b),o.url=this.#o(p),o.url}addAlphaFilter(t){let i=this.#l.get(t);if(i)return i;const[n]=this.#d([t]),r=`alpha_${n}`;if(i=this.#l.get(r),i)return this.#l.set(t,i),i;const o=`g_${this.#s}_alpha_map_${this.#r++}`,c=this.#o(o);this.#l.set(t,c),this.#l.set(r,c);const u=this.#f(o);return this.#v(n,u),c}addLuminosityFilter(t){let i=this.#l.get(t||"luminosity");if(i)return i;let n,r;if(t?([n]=this.#d([t]),r=`luminosity_${n}`):r="luminosity",i=this.#l.get(r),i)return this.#l.set(t,i),i;const o=`g_${this.#s}_luminosity_map_${this.#r++}`,c=this.#o(o);this.#l.set(t,c),this.#l.set(r,c);const u=this.#f(o);return this.#g(u),t&&this.#v(n,u),c}addHighlightHCMFilter(t,i,n,r,o){const c=`${i}-${n}-${r}-${o}`;let u=this.#u.get(t);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#u.set(t,u)),!i||!n))return u.url;const[d,f]=[i,n].map(this.#b.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),b=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[y,A]=[r,o].map(this.#b.bind(this));b<p&&([p,b,y,A]=[b,p,A,y]),this.#c.style.color="";const w=(E,O,M)=>{const k=new Array(256),D=(b-p)/M,I=E/255,j=(O-E)/(255*M);let K=0;for(let Z=0;Z<=M;Z++){const tt=Math.round(p+Z*D),W=I+Z*j;for(let ot=K;ot<=tt;ot++)k[ot]=W;K=tt+1}for(let Z=K;Z<256;Z++)k[Z]=k[K-1];return k.join(",")},_=`g_${this.#s}_hcm_${t}_filter`,x=u.filter=this.#f(_);return this.#m(x),this.#p(w(y[0],A[0],5),w(y[1],A[1],5),w(y[2],A[2],5),x),u.url=this.#o(_),u.url}destroy(t=!1){t&&this.#n?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#n?.clear(),this.#n=null,this.#r=0)}#g(t){const i=this.#a.createElementNS(Fi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#a.createElementNS(Fi,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#f(t){const i=this.#a.createElementNS(Fi,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#c.append(i),i}#h(t,i,n){const r=this.#a.createElementNS(Fi,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),t.append(r)}#p(t,i,n,r){const o=this.#a.createElementNS(Fi,"feComponentTransfer");r.append(o),this.#h(o,"feFuncR",t),this.#h(o,"feFuncG",i),this.#h(o,"feFuncB",n)}#v(t,i){const n=this.#a.createElementNS(Fi,"feComponentTransfer");i.append(n),this.#h(n,"feFuncA",t)}#b(t){return this.#c.style.color=t,zl(getComputedStyle(this.#c).getPropertyValue("color"))}}class Ep{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(n=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){Bt("Abstract method `_fetch` called.")}}class Zg extends Ep{async _fetch(t){const i=await Za(t,"arraybuffer");return new Uint8Array(i)}}class xp{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(n=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){Bt("Abstract method `_fetch` called.")}}class Wg extends xp{async _fetch(t){const i=await Za(t,"arraybuffer");return new Uint8Array(i)}}Ce&&bt("Please use the `legacy` build in Node.js environments.");async function Du(m){const i=await process.getBuiltinModule("fs").promises.readFile(m);return new Uint8Array(i)}class Jb extends wp{}class ty extends Sp{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class ey extends _p{async _fetch(t){return Du(t)}}class iy extends Ep{async _fetch(t){return Du(t)}}class sy extends xp{async _fetch(t){return Du(t)}}const ve={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function yu(m,t){if(!t)return;const i=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,n),m.clip(r)}class Nu{isModifyingCurrentTransform(){return!1}getPattern(){Bt("Abstract method `getPattern` called.")}}class ny extends Nu{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let i;this._type==="axial"?i=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)i.addColorStop(n[0],n[1]);return i}getPattern(t,i,n,r){let o;if(r===ve.STROKE||r===ve.FILL){const c=i.current.getClippedPathBoundingBox(r,Vt(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=i.cachedCanvases.getCanvas("pattern",u,d),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),n=rt.transform(n,[1,0,0,1,c[0],c[1]]),p.transform(...i.baseTransform),this.matrix&&p.transform(...this.matrix),yu(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const b=new DOMMatrix(n);o.setTransform(b)}else yu(t,this._bbox),o=this._createGradient(t);return o}}function ou(m,t,i,n,r,o,c,u){const d=t.coords,f=t.colors,p=m.data,b=m.width*4;let y;d[i+1]>d[n+1]&&(y=i,i=n,n=y,y=o,o=c,c=y),d[n+1]>d[r+1]&&(y=n,n=r,r=y,y=c,c=u,u=y),d[i+1]>d[n+1]&&(y=i,i=n,n=y,y=o,o=c,c=y);const A=(d[i]+t.offsetX)*t.scaleX,w=(d[i+1]+t.offsetY)*t.scaleY,_=(d[n]+t.offsetX)*t.scaleX,x=(d[n+1]+t.offsetY)*t.scaleY,E=(d[r]+t.offsetX)*t.scaleX,O=(d[r+1]+t.offsetY)*t.scaleY;if(w>=O)return;const M=f[o],k=f[o+1],D=f[o+2],I=f[c],j=f[c+1],K=f[c+2],Z=f[u],tt=f[u+1],W=f[u+2],ot=Math.round(w),At=Math.round(O);let gt,dt,N,U,et,St,C,V;for(let Q=ot;Q<=At;Q++){if(Q<x){const pt=Q<w?0:(w-Q)/(w-x);gt=A-(A-_)*pt,dt=M-(M-I)*pt,N=k-(k-j)*pt,U=D-(D-K)*pt}else{let pt;Q>O?pt=1:x===O?pt=0:pt=(x-Q)/(x-O),gt=_-(_-E)*pt,dt=I-(I-Z)*pt,N=j-(j-tt)*pt,U=K-(K-W)*pt}let Y;Q<w?Y=0:Q>O?Y=1:Y=(w-Q)/(w-O),et=A-(A-E)*Y,St=M-(M-Z)*Y,C=k-(k-tt)*Y,V=D-(D-W)*Y;const $=Math.round(Math.min(gt,et)),nt=Math.round(Math.max(gt,et));let st=b*Q+$*4;for(let pt=$;pt<=nt;pt++)Y=(gt-pt)/(gt-et),Y<0?Y=0:Y>1&&(Y=1),p[st++]=dt-(dt-St)*Y|0,p[st++]=N-(N-C)*Y|0,p[st++]=U-(U-V)*Y|0,p[st++]=255}}function ay(m,t,i){const n=t.coords,r=t.colors;let o,c;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<d;o++){let p=o*u;for(let b=0;b<f;b++,p++)ou(m,i,n[p],n[p+1],n[p+u],r[p],r[p+1],r[p+u]),ou(m,i,n[p+u+1],n[p+1],n[p+u],r[p+u+1],r[p+1],r[p+u])}break;case"triangles":for(o=0,c=n.length;o<c;o+=3)ou(m,i,n[o],n[o+1],n[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class ry extends Nu{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,n){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-d,b=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),A=f/b,w=p/y,_={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/w},x=b+4,E=y+4,O=n.getCanvas("mesh",x,E),M=O.context,k=M.createImageData(b,y);if(i){const I=k.data;for(let j=0,K=I.length;j<K;j+=4)I[j]=i[0],I[j+1]=i[1],I[j+2]=i[2],I[j+3]=255}for(const I of this._figures)ay(k,I,_);return M.putImageData(k,2,2),{canvas:O.canvas,offsetX:u-2*A,offsetY:d-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,i,n,r){yu(t,this._bbox);const o=new Float32Array(2);if(r===ve.SHADING)rt.singularValueDecompose2dScale(Vt(t),o);else if(this.matrix){rt.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;rt.singularValueDecompose2dScale(i.baseTransform,o),o[0]*=u,o[1]*=d}else rt.singularValueDecompose2dScale(i.baseTransform,o);const c=this._createMeshCanvas(o,r===ve.SHADING?null:this._background,i.cachedCanvases);return r!==ve.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class ly extends Nu{getPattern(){return"hotpink"}}function oy(m){switch(m[0]){case"RadialAxial":return new ny(m);case"Mesh":return new ry(m);case"Dummy":return new ly}throw new Error(`Unknown IR type: ${m[0]}`)}const Jg={COLORED:1,UNCOLORED:2};class Ou{static MAX_PATTERN_SIZE=3e3;constructor(t,i,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const{bbox:i,operatorList:n,paintType:r,tilingType:o,color:c,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:f}=this;d=Math.abs(d),f=Math.abs(f),Ll("TilingType: "+o);const p=i[0],b=i[1],y=i[2],A=i[3],w=y-p,_=A-b,x=new Float32Array(2);rt.singularValueDecompose2dScale(this.matrix,x);const[E,O]=x;rt.singularValueDecompose2dScale(this.baseTransform,x);const M=E*x[0],k=O*x[1];let D=w,I=_,j=!1,K=!1;const Z=Math.ceil(d*M),tt=Math.ceil(f*k),W=Math.ceil(w*M),ot=Math.ceil(_*k);Z>=W?D=d:j=!0,tt>=ot?I=f:K=!0;const At=this.getSizeAndScale(D,this.ctx.canvas.width,M),gt=this.getSizeAndScale(I,this.ctx.canvas.height,k),dt=t.cachedCanvases.getCanvas("pattern",At.size,gt.size),N=dt.context,U=u.createCanvasGraphics(N);if(U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,r,c),N.translate(-At.scale*p,-gt.scale*b),U.transform(At.scale,0,0,gt.scale,0,0),N.save(),this.clipBbox(U,p,b,y,A),U.baseTransform=Vt(U.ctx),U.executeOperatorList(n),U.endDrawing(),N.restore(),j||K){const et=dt.canvas;j&&(D=d),K&&(I=f);const St=this.getSizeAndScale(D,this.ctx.canvas.width,M),C=this.getSizeAndScale(I,this.ctx.canvas.height,k),V=St.size,Q=C.size,Y=t.cachedCanvases.getCanvas("pattern-workaround",V,Q),$=Y.context,nt=j?Math.floor(w/d):0,st=K?Math.floor(_/f):0;for(let pt=0;pt<=nt;pt++)for(let yt=0;yt<=st;yt++)$.drawImage(et,V*pt,Q*yt,V,Q,0,0,V,Q);return{canvas:Y.canvas,scaleX:St.scale,scaleY:C.scale,offsetX:p,offsetY:b}}return{canvas:dt.canvas,scaleX:At.scale,scaleY:gt.scale,offsetX:p,offsetY:b}}getSizeAndScale(t,i,n){const r=Math.max(Ou.MAX_PATTERN_SIZE,i);let o=Math.ceil(t*n);return o>=r?o=r:n=o/t,{scale:n,size:o}}clipBbox(t,i,n,r,o){const c=r-i,u=o-n;t.ctx.rect(i,n,c,u),rt.axialAlignedBoundingBox([i,n,r,o],Vt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,n){const r=t.ctx,o=t.current;switch(i){case Jg.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;r.fillStyle=o.fillColor=c,r.strokeStyle=o.strokeColor=u;break;case Jg.UNCOLORED:r.fillStyle=r.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new Cb(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,n,r){let o=n;r!==ve.SHADING&&(o=rt.transform(o,i.baseTransform),this.matrix&&(o=rt.transform(o,this.matrix)));const c=this.createPatternCanvas(i);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=t.createPattern(c.canvas,"repeat");return d.setTransform(u),d}}function cy({src:m,srcPos:t=0,dest:i,width:n,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=Ae.isLittleEndian?4278190080:255,[d,f]=c?[o,u]:[u,o],p=n>>3,b=n&7,y=m.length;i=new Uint32Array(i.buffer);let A=0;for(let w=0;w<r;w++){for(const x=t+p;t<x;t++){const E=t<y?m[t]:255;i[A++]=E&128?f:d,i[A++]=E&64?f:d,i[A++]=E&32?f:d,i[A++]=E&16?f:d,i[A++]=E&8?f:d,i[A++]=E&4?f:d,i[A++]=E&2?f:d,i[A++]=E&1?f:d}if(b===0)continue;const _=t<y?m[t++]:255;for(let x=0;x<b;x++)i[A++]=_&1<<7-x?f:d}return{srcPos:t,destPos:A}}const tp=16,ep=100,uy=15,ip=10,He=16,cu=new DOMMatrix,Ke=new Float32Array(2),kn=new Float32Array([1/0,1/0,-1/0,-1/0]);function hy(m,t){if(m._removeMirroring)throw new Error("Context is already forwarding operations.");m.__originalSave=m.save,m.__originalRestore=m.restore,m.__originalRotate=m.rotate,m.__originalScale=m.scale,m.__originalTranslate=m.translate,m.__originalTransform=m.transform,m.__originalSetTransform=m.setTransform,m.__originalResetTransform=m.resetTransform,m.__originalClip=m.clip,m.__originalMoveTo=m.moveTo,m.__originalLineTo=m.lineTo,m.__originalBezierCurveTo=m.bezierCurveTo,m.__originalRect=m.rect,m.__originalClosePath=m.closePath,m.__originalBeginPath=m.beginPath,m._removeMirroring=()=>{m.save=m.__originalSave,m.restore=m.__originalRestore,m.rotate=m.__originalRotate,m.scale=m.__originalScale,m.translate=m.__originalTranslate,m.transform=m.__originalTransform,m.setTransform=m.__originalSetTransform,m.resetTransform=m.__originalResetTransform,m.clip=m.__originalClip,m.moveTo=m.__originalMoveTo,m.lineTo=m.__originalLineTo,m.bezierCurveTo=m.__originalBezierCurveTo,m.rect=m.__originalRect,m.closePath=m.__originalClosePath,m.beginPath=m.__originalBeginPath,delete m._removeMirroring},m.save=function(){t.save(),this.__originalSave()},m.restore=function(){t.restore(),this.__originalRestore()},m.translate=function(i,n){t.translate(i,n),this.__originalTranslate(i,n)},m.scale=function(i,n){t.scale(i,n),this.__originalScale(i,n)},m.transform=function(i,n,r,o,c,u){t.transform(i,n,r,o,c,u),this.__originalTransform(i,n,r,o,c,u)},m.setTransform=function(i,n,r,o,c,u){t.setTransform(i,n,r,o,c,u),this.__originalSetTransform(i,n,r,o,c,u)},m.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},m.rotate=function(i){t.rotate(i),this.__originalRotate(i)},m.clip=function(i){t.clip(i),this.__originalClip(i)},m.moveTo=function(i,n){t.moveTo(i,n),this.__originalMoveTo(i,n)},m.lineTo=function(i,n){t.lineTo(i,n),this.__originalLineTo(i,n)},m.bezierCurveTo=function(i,n,r,o,c,u){t.bezierCurveTo(i,n,r,o,c,u),this.__originalBezierCurveTo(i,n,r,o,c,u)},m.rect=function(i,n,r,o){t.rect(i,n,r,o),this.__originalRect(i,n,r,o)},m.closePath=function(){t.closePath(),this.__originalClosePath()},m.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class dy{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,n)):(r=this.canvasFactory.create(i,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Al(m,t,i,n,r,o,c,u,d,f){const[p,b,y,A,w,_]=Vt(m);if(b===0&&y===0){const O=c*p+w,M=Math.round(O),k=u*A+_,D=Math.round(k),I=(c+d)*p+w,j=Math.abs(Math.round(I)-M)||1,K=(u+f)*A+_,Z=Math.abs(Math.round(K)-D)||1;return m.setTransform(Math.sign(p),0,0,Math.sign(A),M,D),m.drawImage(t,i,n,r,o,0,0,j,Z),m.setTransform(p,b,y,A,w,_),[j,Z]}if(p===0&&A===0){const O=u*y+w,M=Math.round(O),k=c*b+_,D=Math.round(k),I=(u+f)*y+w,j=Math.abs(Math.round(I)-M)||1,K=(c+d)*b+_,Z=Math.abs(Math.round(K)-D)||1;return m.setTransform(0,Math.sign(b),Math.sign(y),0,M,D),m.drawImage(t,i,n,r,o,0,0,Z,j),m.setTransform(p,b,y,A,w,_),[Z,j]}m.drawImage(t,i,n,r,o,c,u,d,f);const x=Math.hypot(p,b),E=Math.hypot(y,A);return[x*d,E*f]}class sp{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=du;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ee.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i){this.clipBox=new Float32Array([0,0,t,i]),this.minMax=kn.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=ve.FILL,i=null){const n=this.minMax.slice();if(t===ve.STROKE){i||Bt("Stroke bounding box must include transform."),rt.singularValueDecompose2dScale(i,Ke);const r=Ke[0]*this.lineWidth/2,o=Ke[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=rt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(kn,0)}getClippedPathBoundingBox(t=ve.FILL,i=null){return rt.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function np(m,t){if(t instanceof ImageData){m.putImageData(t,0,0);return}const i=t.height,n=t.width,r=i%He,o=(i-r)/He,c=r===0?o:o+1,u=m.createImageData(n,He);let d=0,f;const p=t.data,b=u.data;let y,A,w,_;if(t.kind===El.GRAYSCALE_1BPP){const x=p.byteLength,E=new Uint32Array(b.buffer,0,b.byteLength>>2),O=E.length,M=n+7>>3,k=4294967295,D=Ae.isLittleEndian?4278190080:255;for(y=0;y<c;y++){for(w=y<o?He:r,f=0,A=0;A<w;A++){const I=x-d;let j=0;const K=I>M?n:I*8-7,Z=K&-8;let tt=0,W=0;for(;j<Z;j+=8)W=p[d++],E[f++]=W&128?k:D,E[f++]=W&64?k:D,E[f++]=W&32?k:D,E[f++]=W&16?k:D,E[f++]=W&8?k:D,E[f++]=W&4?k:D,E[f++]=W&2?k:D,E[f++]=W&1?k:D;for(;j<K;j++)tt===0&&(W=p[d++],tt=128),E[f++]=W&tt?k:D,tt>>=1}for(;f<O;)E[f++]=0;m.putImageData(u,0,y*He)}}else if(t.kind===El.RGBA_32BPP){for(A=0,_=n*He*4,y=0;y<o;y++)b.set(p.subarray(d,d+_)),d+=_,m.putImageData(u,0,A),A+=He;y<c&&(_=n*r*4,b.set(p.subarray(d,d+_)),m.putImageData(u,0,A))}else if(t.kind===El.RGB_24BPP)for(w=He,_=n*w,y=0;y<c;y++){for(y>=o&&(w=r,_=n*w),f=0,A=_;A--;)b[f++]=p[d++],b[f++]=p[d++],b[f++]=p[d++],b[f++]=255;m.putImageData(u,0,y*He)}else throw new Error(`bad image kind: ${t.kind}`)}function ap(m,t){if(t.bitmap){m.drawImage(t.bitmap,0,0);return}const i=t.height,n=t.width,r=i%He,o=(i-r)/He,c=r===0?o:o+1,u=m.createImageData(n,He);let d=0;const f=t.data,p=u.data;for(let b=0;b<c;b++){const y=b<o?He:r;({srcPos:d}=cy({src:f,srcPos:d,dest:p,width:n,height:y,nonBlackColor:0})),m.putImageData(u,0,b*He)}}function Ia(m,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of i)m[n]!==void 0&&(t[n]=m[n]);m.setLineDash!==void 0&&(t.setLineDash(m.getLineDash()),t.lineDashOffset=m.lineDashOffset)}function Sl(m){m.strokeStyle=m.fillStyle="#000000",m.fillRule="nonzero",m.globalAlpha=1,m.lineWidth=1,m.lineCap="butt",m.lineJoin="miter",m.miterLimit=10,m.globalCompositeOperation="source-over",m.font="10px sans-serif",m.setLineDash!==void 0&&(m.setLineDash([]),m.lineDashOffset=0);const{filter:t}=m;t!=="none"&&t!==""&&(m.filter="none")}function rp(m,t){if(t)return!0;rt.singularValueDecompose2dScale(m,Ke);const i=Math.fround(xi.pixelRatio*In.PDF_TO_CSS_UNITS);return Ke[0]<=i&&Ke[1]<=i}const fy=["butt","round","square"],gy=["miter","round","bevel"],py={},lp={};class Pn{constructor(t,i,n,r,o,{optionalContentConfig:c,markedContentStack:u=null},d,f){this.ctx=t,this.current=new sp(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=n,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new dy(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,i=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):i}beginDrawing({transform:t,viewport:i,transparency:n=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,n){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Vt(this.compositeCtx))}this.ctx.save(),Sl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=Vt(this.ctx)}executeOperatorList(t,i,n,r){const o=t.argsArray,c=t.fnArray;let u=i||0;const d=o.length;if(d===u)return u;const f=d-u>ip&&typeof n=="function",p=f?Date.now()+uy:0;let b=0;const y=this.commonObjs,A=this.objs;let w;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,n),u;if(w=c[u],w!==Cl.dependency)this[w].apply(this,o[u]);else for(const _ of o[u]){const x=_.startsWith("g_")?y:A;if(!x.has(_))return x.get(_,n),u}if(u++,u===d)return u;if(f&&++b>ip){if(Date.now()>p)return n(),u;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(i[0],i[1]),1),c=Math.max(Math.hypot(i[2],i[3]),1),u=n,d=r,f="prescale1",p,b;for(;o>2&&u>1||c>2&&d>1;){let y=u,A=d;o>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/y),c>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/A),p=this.cachedCanvases.getCanvas(f,y,A),b=p.context,b.clearRect(0,0,y,A),b.drawImage(t,0,0,u,d,0,0,y,A),t=p.canvas,u=y,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t){const i=this.ctx,{width:n,height:r}=t,o=this.current.fillColor,c=this.current.patternFill,u=Vt(i);let d,f,p,b;if((t.bitmap||t.data)&&t.count>1){const Z=t.bitmap||t.data.buffer;f=JSON.stringify(c?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(Z),d||(d=new Map,this._cachedBitmapsMap.set(Z,d));const tt=d.get(f);if(tt&&!c){const W=Math.round(Math.min(u[0],u[2])+u[4]),ot=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:tt,offsetX:W,offsetY:ot}}p=tt}p||(b=this.cachedCanvases.getCanvas("maskCanvas",n,r),ap(b.context,t));let y=rt.transform(u,[1/n,0,0,-1/r,0,0]);y=rt.transform(y,[1,0,0,1,0,-r]);const A=kn.slice();rt.axialAlignedBoundingBox([0,0,n,r],y,A);const[w,_,x,E]=A,O=Math.round(x-w)||1,M=Math.round(E-_)||1,k=this.cachedCanvases.getCanvas("fillCanvas",O,M),D=k.context,I=w,j=_;D.translate(-I,-j),D.transform(...y),p||(p=this._scaleImage(b.canvas,Si(D)),p=p.img,d&&c&&d.set(f,p)),D.imageSmoothingEnabled=rp(Vt(D),t.interpolate),Al(D,p,0,0,p.width,p.height,0,0,n,r),D.globalCompositeOperation="source-in";const K=rt.transform(Si(D),[1,0,0,1,-I,-j]);return D.fillStyle=c?o.getPattern(i,this,K,ve.FILL):o,D.fillRect(0,0,n,r),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(f,k.canvas)),{canvas:k.canvas,offsetX:Math.round(I),offsetY:Math.round(j)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=fy[t]}setLineJoin(t){this.ctx.lineJoin=gy[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,i){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=i)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[i,n]of t)switch(i){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,i=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,t,i);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),Ia(this.suspendedCtx,o),hy(o,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ia(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,n,r){const o=r[0],c=r[1],u=r[2]-o,d=r[3]-c;u===0||d===0||(this.genericComposeSMask(i.context,n,u,d,i.subtype,i.backdrop,i.transferMap,o,c,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,i,n,r,o,c,u,d,f,p,b){let y=t.canvas,A=d-p,w=f-b;if(c)if(A<0||w<0||A+n>y.width||w+r>y.height){const x=this.cachedCanvases.getCanvas("maskExtension",n,r),E=x.context;E.drawImage(y,-A,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=c,E.fillRect(0,0,n,r),E.globalCompositeOperation="source-over",y=x.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(A,w,n,r),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,w,n,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const _=new Path2D;_.rect(d,f,n,r),i.clip(_),i.globalCompositeOperation="destination-in",i.drawImage(y,A,w,n,r,d,f,n,r),i.restore()}save(){this.inSMaskMode&&Ia(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ia(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,n,r,o,c){this.ctx.transform(t,i,n,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,n){let[r]=i;if(!n){r||=i[0]=new Path2D,this[t](r);return}if(!(r instanceof Path2D)){const o=i[0]=new Path2D;for(let c=0,u=r.length;c<u;)switch(r[c++]){case ml.moveTo:o.moveTo(r[c++],r[c++]);break;case ml.lineTo:o.lineTo(r[c++],r[c++]);break;case ml.curveTo:o.bezierCurveTo(r[c++],r[c++],r[c++],r[c++],r[c++],r[c++]);break;case ml.closePath:o.closePath();break;default:bt(`Unrecognized drawing path operator: ${r[c-1]}`);break}r=o}rt.axialAlignedBoundingBox(n,Vt(this.ctx),this.current.minMax),this[t](r)}closePath(){this.ctx.closePath()}stroke(t,i=!0){const n=this.ctx,r=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&r?.getPattern){const o=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=r.getPattern(n,this,Si(n),ve.STROKE),o){const c=new Path2D;c.addPath(t,n.getTransform().invertSelf().multiplySelf(o)),t=c}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);i&&this.consumePath(t,this.current.getClippedPathBoundingBox(ve.STROKE,Vt(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,i=!0){const n=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let c=!1;if(o){const d=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=r.getPattern(n,this,Si(n),ve.FILL),d){const f=new Path2D;f.addPath(t,n.getTransform().invertSelf().multiplySelf(d)),t=f}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),c&&n.restore(),i&&this.consumePath(t,u)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=py}eoClip(){this.pendingClip=lp}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,i=this.ctx;if(t===void 0)return;const n=new Path2D,r=i.getTransform().invertSelf();for(const{transform:o,x:c,y:u,fontSize:d,path:f}of t)f&&n.addPath(f,new DOMMatrix(o).preMultiplySelf(r).translate(c,u).scale(d,-d));i.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,i){const n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=n.fontMatrix||du,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&bt("Invalid font matrix for font "+t),i<0?(i=-i,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=i,n.isType3Font)return;const o=n.loadedName||"sans-serif",c=n.systemFontInfo?.css||`"${o}", ${n.fallbackName}`;let u="normal";n.black?u="900":n.bold&&(u="bold");const d=n.italic?"italic":"normal";let f=i;i<tp?f=tp:i>ep&&(f=ep),this.current.fontSizeScale=i/f,this.ctx.font=`${d} ${u} ${f}px ${c}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,i){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,i){this.setLeading(-i),this.moveText(t,i)}setTextMatrix(t){const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#i(t,i,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(i)),r}paintChar(t,i,n,r,o){const c=this.ctx,u=this.current,d=u.font,f=u.textRenderingMode,p=u.fontSize/u.fontSizeScale,b=f&Ee.FILL_STROKE_MASK,y=!!(f&Ee.ADD_TO_PATH_FLAG),A=u.patternFill&&!d.missingFile,w=u.patternStroke&&!d.missingFile;let _;if((d.disableFontFace||y||A||w)&&!d.missingFile&&(_=d.getPathGenerator(this.commonObjs,t)),_&&(d.disableFontFace||A||w)){c.save(),c.translate(i,n),c.scale(p,-p);let x;if((b===Ee.FILL||b===Ee.FILL_STROKE)&&(r?(x=c.getTransform(),c.setTransform(...r),c.fill(this.#i(_,x,r))):c.fill(_)),b===Ee.STROKE||b===Ee.FILL_STROKE)if(o){x||=c.getTransform(),c.setTransform(...o);const{a:E,b:O,c:M,d:k}=x,D=rt.inverseTransform(o),I=rt.transform([E,O,M,k,0,0],D);rt.singularValueDecompose2dScale(I,Ke),c.lineWidth*=Math.max(Ke[0],Ke[1])/p,c.stroke(this.#i(_,x,o))}else c.lineWidth/=p,c.stroke(_);c.restore()}else(b===Ee.FILL||b===Ee.FILL_STROKE)&&c.fillText(t,i,n),(b===Ee.STROKE||b===Ee.FILL_STROKE)&&c.strokeText(t,i,n);y&&(this.pendingTextPaths||=[]).push({transform:Vt(c),x:i,y:n,fontSize:p,path:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){n=!0;break}return Et(this,"isFontSubpixelAAEnabled",n)}showText(t){const i=this.current,n=i.font;if(n.isType3Font)return this.showType3Text(t);const r=i.fontSize;if(r===0)return;const o=this.ctx,c=i.fontSizeScale,u=i.charSpacing,d=i.wordSpacing,f=i.fontDirection,p=i.textHScale*f,b=t.length,y=n.vertical,A=y?1:-1,w=n.defaultVMetrics,_=r*i.fontMatrix[0],x=i.textRenderingMode===Ee.FILL&&!n.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),f>0?o.scale(p,-1):o.scale(p,1);let E,O;if(i.patternFill){o.save();const j=i.fillColor.getPattern(o,this,Si(o),ve.FILL);E=Vt(o),o.restore(),o.fillStyle=j}if(i.patternStroke){o.save();const j=i.strokeColor.getPattern(o,this,Si(o),ve.STROKE);O=Vt(o),o.restore(),o.strokeStyle=j}let M=i.lineWidth;const k=i.textMatrixScale;if(k===0||M===0){const j=i.textRenderingMode&Ee.FILL_STROKE_MASK;(j===Ee.STROKE||j===Ee.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=k;if(c!==1&&(o.scale(c,c),M/=c),o.lineWidth=M,n.isInvalidPDFjsFont){const j=[];let K=0;for(const Z of t)j.push(Z.unicode),K+=Z.width;o.fillText(j.join(""),0,0),i.x+=K*_*p,o.restore(),this.compose();return}let D=0,I;for(I=0;I<b;++I){const j=t[I];if(typeof j=="number"){D+=A*j*r/1e3;continue}let K=!1;const Z=(j.isSpace?d:0)+u,tt=j.fontChar,W=j.accent;let ot,At,gt=j.width;if(y){const N=j.vmetric||w,U=-(j.vmetric?N[1]:gt*.5)*_,et=N[2]*_;gt=N?-N[0]:gt,ot=U/c,At=(D+et)/c}else ot=D/c,At=0;if(n.remeasure&&gt>0){const N=o.measureText(tt).width*1e3/r*c;if(gt<N&&this.isFontSubpixelAAEnabled){const U=gt/N;K=!0,o.save(),o.scale(U,1),ot/=U}else gt!==N&&(ot+=(gt-N)/2e3*r/c)}if(this.contentVisible&&(j.isInFont||n.missingFile)){if(x&&!W)o.fillText(tt,ot,At);else if(this.paintChar(tt,ot,At,E,O),W){const N=ot+r*W.offset.x/c,U=At-r*W.offset.y/c;this.paintChar(W.fontChar,N,U,E,O)}}const dt=y?gt*_-Z*f:gt*_+Z*f;D+=dt,K&&o.restore()}y?i.y-=D:i.x+=D*p,o.restore(),this.compose()}showType3Text(t){const i=this.ctx,n=this.current,r=n.font,o=n.fontSize,c=n.fontDirection,u=r.vertical?1:-1,d=n.charSpacing,f=n.wordSpacing,p=n.textHScale*c,b=n.fontMatrix||du,y=t.length,A=n.textRenderingMode===Ee.INVISIBLE;let w,_,x,E;if(!(A||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),n.textMatrix&&i.transform(...n.textMatrix),i.translate(n.x,n.y+n.textRise),i.scale(p,c),w=0;w<y;++w){if(_=t[w],typeof _=="number"){E=u*_*o/1e3,this.ctx.translate(E,0),n.x+=E*p;continue}const O=(_.isSpace?f:0)+d,M=r.charProcOperatorList[_.operatorListId];M?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...b),this.executeOperatorList(M),this.restore()):bt(`Type3 character "${_.operatorListId}" is not available.`);const k=[_.width,0];rt.applyTransform(k,b),x=k[0]*o+O,i.translate(x,0),n.x+=x*p}i.restore()}}setCharWidth(t,i){}setCharWidthAndBounds(t,i,n,r,o,c){const u=new Path2D;u.rect(n,r,o-n,c-r),this.ctx.clip(u),this.endPath()}getColorN_Pattern(t){let i;if(t[0]==="TilingPattern"){const n=this.baseTransform||Vt(this.ctx),r={createCanvasGraphics:o=>new Pn(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new Ou(t,this.ctx,r,n)}else i=this._getPattern(t[1],t[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=oy(this.getObject(t)),this.cachedPatterns.set(t,n)),i&&(n.matrix=i),n}shadingFill(t){if(!this.contentVisible)return;const i=this.ctx;this.save();const n=this._getPattern(t);i.fillStyle=n.getPattern(i,this,Si(i),ve.SHADING);const r=Si(i);if(r){const{width:o,height:c}=i.canvas,u=kn.slice();rt.axialAlignedBoundingBox([0,0,o,c],r,u);const[d,f,p,b]=u;this.ctx.fillRect(d,f,p-d,b-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Bt("Should not call beginInlineImage")}beginImageData(){Bt("Should not call beginImageData")}paintFormXObjectBegin(t,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Vt(this.ctx),i)){rt.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[n,r,o,c]=i,u=new Path2D;u.rect(n,r,o-n,c-r),this.ctx.clip(u),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||Ll("TODO: Support non-isolated groups."),t.knockout&&bt("Knockout groups not supported.");const n=Vt(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=kn.slice();rt.axialAlignedBoundingBox(t.bbox,Vt(i),r);const o=[0,0,i.canvas.width,i.canvas.height];r=rt.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),u=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-c,1),f=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,f]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(p,d,f),y=b.context;y.translate(-c,-u),y.transform(...n);let A=new Path2D;const[w,_,x,E]=t.bbox;if(A.rect(w,_,x-w,E-_),t.matrix){const O=new Path2D;O.addPath(A,new DOMMatrix(t.matrix)),A=O}y.clip(A),t.smask?this.smaskStack.push({canvas:b.canvas,context:y,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(c,u),i.save()),Ia(i,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Vt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=kn.slice();rt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],r,o),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,i,n,r,o){if(this.#t(),Sl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const c=i[2]-i[0],u=i[3]-i[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=i[0],n[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=c,i[3]=u,rt.singularValueDecompose2dScale(Vt(this.ctx),Ke);const{viewportScale:d}=this,f=Math.ceil(c*this.outputScaleX*d),p=Math.ceil(u*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:b,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(t,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Ke[0],0,0,-Ke[1],0,u*Ke[1]),Sl(this.ctx)}else{Sl(this.ctx),this.endPath();const d=new Path2D;d.rect(i[0],i[1],c,u),this.ctx.clip(d)}}this.current=new sp(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const i=t.count;t=this.getObject(t.data,t),t.count=i;const n=this.ctx,r=this._createMaskCanvas(t),o=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,n=0,r=0,o,c){if(!this.contentVisible)return;t=this.getObject(t.data,t);const u=this.ctx;u.save();const d=Vt(u);u.transform(i,n,r,o,0,0);const f=this._createMaskCanvas(t);u.setTransform(1,0,0,1,f.offsetX-d[4],f.offsetY-d[5]);for(let p=0,b=c.length;p<b;p+=2){const y=rt.transform(d,[i,n,r,o,c[p],c[p+1]]);u.drawImage(f.canvas,y[4],y[5])}u.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const i=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const o of t){const{data:c,width:u,height:d,transform:f}=o,p=this.cachedCanvases.getCanvas("maskCanvas",u,d),b=p.context;b.save();const y=this.getObject(c,o);ap(b,y),b.globalCompositeOperation="source-in",b.fillStyle=r?n.getPattern(b,this,Si(i),ve.FILL):n,b.fillRect(0,0,u,d),b.restore(),i.save(),i.transform(...f),i.scale(1,-1),Al(i,p.canvas,0,0,u,d,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const i=this.getObject(t);if(!i){bt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(t,i,n,r){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){bt("Dependent image isn't ready yet");return}const c=o.width,u=o.height,d=[];for(let f=0,p=r.length;f<p;f+=2)d.push({transform:[i,0,0,n,r[f],r[f+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:n,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(i,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const i=t.width,n=t.height,r=this.ctx;this.save();const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/i,-1/n);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",i,n).context;np(f,t),c=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(c,Si(r));r.imageSmoothingEnabled=rp(Vt(r),t.interpolate),Al(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-n,i,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,i){if(!this.contentVisible)return;const n=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;np(d,t),r=this.applyTransferMapsToCanvas(d)}for(const o of i)n.save(),n.transform(...o.transform),n.scale(1,-1),Al(n,r,o.x,o.y,o.w,o.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,i){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,i){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const r=this.ctx;this.pendingClip&&(n||(this.pendingClip===lp?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Vt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:n,c:r,d:o}=this.ctx.getTransform();let c,u;if(n===0&&r===0){const d=Math.abs(i),f=Math.abs(o);if(d===f)if(t===0)c=u=1/d;else{const p=d*t;c=u=p<1?1/p:1}else if(t===0)c=1/d,u=1/f;else{const p=d*t,b=f*t;c=p<1?1/p:1,u=b<1?1/b:1}}else{const d=Math.abs(i*o-n*r),f=Math.hypot(i,n),p=Math.hypot(r,o);if(t===0)c=p/d,u=f/d;else{const b=t*d;c=p>b?p/b:1,u=f>b?f/b:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:n,current:{lineWidth:r}}=this,[o,c]=this.getScaleForStroking();if(o===c){n.lineWidth=(r||1)*o,n.stroke(t);return}const u=n.getLineDash();i&&n.save(),n.scale(o,c),cu.a=1/o,cu.d=1/c;const d=new Path2D;if(d.addPath(t,cu),u.length>0){const f=Math.max(o,c);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=r||1,n.stroke(d),i&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const m in Cl)Pn.prototype[m]!==void 0&&(Pn.prototype[Cl[m]]=Pn.prototype[m]);class Bn{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class my{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const On=Symbol("INTERNAL");class by{#t=!1;#e=!1;#i=!1;#s=!0;constructor(t,{name:i,intent:n,usage:r,rbGroups:o}){this.#t=!!(t&$e.DISPLAY),this.#e=!!(t&$e.PRINT),this.name=i,this.intent=n,this.usage=r,this.rbGroups=o}get visible(){if(this.#i)return this.#s;if(!this.#s)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,n=!1){t!==On&&Bt("Internal method `_setVisible` called."),this.#i=n,this.#s=i}}class yy{#t=null;#e=new Map;#i=null;#s=null;constructor(t,i=$e.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#s=t.order;for(const n of t.groups)this.#e.set(n.id,new by(i,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(On,!1);for(const n of t.on)this.#e.get(n)._setVisible(On,!0);for(const n of t.off)this.#e.get(n)._setVisible(On,!1);this.#i=this.getHash()}}#a(t){const i=t.length;if(i<2)return!0;const n=t[0];for(let r=1;r<i;r++){const o=t[r];let c;if(Array.isArray(o))c=this.#a(o);else if(this.#e.has(o))c=this.#e.get(o).visible;else return bt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Ll("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(bt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return bt(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return bt(`Unknown optional content policy ${t.policy}.`),!0}return bt(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,n=!0){const r=this.#e.get(t);if(!r){bt(`Optional content group not found: ${t}`);return}if(n&&i&&r.rbGroups.length)for(const o of r.rbGroups)for(const c of o)c!==t&&this.#e.get(c)?._setVisible(On,!1,!0);r._setVisible(On,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const o=this.#e.get(r);if(o)switch(n){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!o.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#s?this.#s.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new vp;for(const[i,n]of this.#e)t.update(`${i}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class vy{constructor(t,{disableRange:i=!1,disableStream:n=!1}){ae(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!i,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const n=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});ae(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){ae(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Ay(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const n=new Sy(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Ay{constructor(t,i,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=Tu(r)?r:null,this._queuedChunks=i||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Sy{constructor(t,i,n){this._stream=t,this._begin=i,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function _y(m){let t=!0,i=n("filename\\*","i").exec(m);if(i){i=i[1];let p=u(i);return p=unescape(p),p=d(p),p=f(p),o(p)}if(i=c(m),i){const p=f(i);return o(p)}if(i=n("filename","i").exec(m),i){i=i[1];let p=u(i);return p=f(p),o(p)}function n(p,b){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function r(p,b){if(p){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const y=new TextDecoder(p,{fatal:!0}),A=Qa(b);b=y.decode(A),t=!1}catch{}}return b}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function c(p){const b=[];let y;const A=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=A.exec(p))!==null;){let[,_,x,E]=y;if(_=parseInt(_,10),_ in b){if(_===0)break;continue}b[_]=[x,E]}const w=[];for(let _=0;_<b.length&&_ in b;++_){let[x,E]=b[_];E=u(E),x&&(E=unescape(E),_===0&&(E=d(E))),w.push(E)}return w.join("")}function u(p){if(p.startsWith('"')){const b=p.slice(1).split('\\"');for(let y=0;y<b.length;++y){const A=b[y].indexOf('"');A!==-1&&(b[y]=b[y].slice(0,A),b.length=y+1),b[y]=b[y].replaceAll(/\\(.)/g,"$1")}p=b.join('"')}return p}function d(p){const b=p.indexOf("'");if(b===-1)return p;const y=p.slice(0,b),w=p.slice(b+1).replace(/^[^']*'/,"");return r(y,w)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,y,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,x){return String.fromCharCode(parseInt(x,16))}),r(y,w);try{w=atob(w)}catch{}return r(y,w)})}return""}function Tp(m,t){const i=new Headers;if(!m||!t||typeof t!="object")return i;for(const n in t){const r=t[n];r!==void 0&&i.append(n,r)}return i}function Bl(m){return URL.parse(m)?.origin??null}function Cp({responseHeaders:m,isHttp:t,rangeChunkSize:i,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(m.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*i)||n||!t||m.get("Accept-Ranges")!=="bytes"||(m.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Mp(m){const t=m.get("Content-Disposition");if(t){let i=_y(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(Tu(i))return i}return null}function tr(m,t){return new Ml(`Unexpected server response (${m}) while retrieving PDF "${t}".`,m,m===404||m===0&&t.startsWith("file:"))}function Rp(m){return m===200||m===206}function Dp(m,t,i){return{method:"GET",headers:m,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Np(m){return m instanceof Uint8Array?m.buffer:m instanceof ArrayBuffer?m:(bt(`getArrayBuffer - unexpected data format: ${m}`),new Uint8Array(m).buffer)}class wy{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Tp(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ae(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Ey(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const n=new xy(this,t,i);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Ey{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const n=new Headers(t.headers),r=i.url;fetch(r,Dp(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Bl(o.url),!Rp(o.status))throw tr(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:d}=Cp({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=Mp(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new bs("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Np(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class xy{constructor(t,i,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${i}-${n-1}`);const c=r.url;fetch(c,Dp(o,this._withCredentials,this._abortController)).then(u=>{const d=Bl(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!Rp(u.status))throw tr(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Np(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const uu=200,hu=206;function Ty(m){const t=m.response;return typeof t!="string"?t:Qa(t).buffer}class Cy{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Tp(this.isHttp,i),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[o,c]of this.headers)i.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=hu):r.expectedStatus=uu,i.responseType="arraybuffer",ae(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,n),i.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,i.send(null),n}onProgress(t,i){const n=this.pendingRequests[t];n&&n.onProgress?.(i)}onStateChange(t,i){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const o=r.status||uu;if(!(o===uu&&n.expectedStatus===hu)&&o!==n.expectedStatus){n.onError(r.status);return}const u=Ty(r);if(o===hu){const d=r.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:u}):(bt('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class My{constructor(t){this._source=t,this._manager=new Cy(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return ae(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ry(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const n=new Dy(this._manager,t,i);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Ry{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=Bl(i.responseURL);const n=i.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=Cp({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=Mp(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=tr(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Dy{constructor(t,i,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Bl(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=tr(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Ny=/^[a-z][a-z0-9\-+.]+:/i;function Oy(m){if(Ny.test(m))return new URL(m);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(m))}class Ly{constructor(t){this.source=t,this.url=Oy(t.url),ae(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return ae(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new ky(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const n=new zy(this,t,i);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class ky{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=tr(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new bs("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class zy{constructor(t,i,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:i,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ja=Symbol("INITIAL_DATA");class Op{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:ja}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const n=this.#t[t];if(!n||n.data===ja)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const i=this.#t[t];return!!i&&i.data!==ja}delete(t){const i=this.#t[t];return!i||i.data===ja?!1:(delete this.#t[t],!0)}resolve(t,i=null){const n=this.#e(t);n.data=i,n.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==ja&&(yield[t,i])}}}const Py=1e5,op=30;class Te{#t=Promise.withResolvers();#e=null;#i=!1;#s=!!globalThis.FontInspector?.enabled;#a=null;#n=null;#r=0;#l=0;#u=null;#c=null;#d=0;#o=0;#g=Object.create(null);#m=[];#f=null;#h=[];#p=new WeakMap;#v=null;static#b=new Map;static#S=new Map;static#_=new WeakMap;static#y=null;static#E=new Set;constructor({textContentSource:t,container:i,viewport:n}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#c=i,this.#o=n.scale*xi.pixelRatio,this.#d=n.rotation,this.#n={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:o,pageX:c,pageY:u}=n.rawDims;this.#v=[1,0,0,-1,-c,u+o],this.#l=r,this.#r=o,Te.#T(),Us(i,n),this.#t.promise.finally(()=>{Te.#E.delete(this),this.#n=null,this.#g=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=Ae.platform;return Et(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#u.read().then(({value:i,done:n})=>{if(n){this.#t.resolve();return}this.#a??=i.lang,Object.assign(this.#g,i.styles),this.#R(i.items),t()},this.#t.reject)};return this.#u=this.#f.getReader(),Te.#E.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const n=t.scale*xi.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,Us(this.#c,{rotation:r})),n!==this.#o){i?.(),this.#o=n;const o={div:null,properties:null,ctx:Te.#M(this.#a)};for(const c of this.#h)o.properties=this.#p.get(c),o.div=c,this.#D(o)}}cancel(){const t=new bs("TextLayer task cancelled.");this.#u?.cancel(t).catch(()=>{}),this.#u=null,this.#t.reject(t)}get textDivs(){return this.#h}get textContentItemsStr(){return this.#m}#R(t){if(this.#i)return;this.#n.ctx??=Te.#M(this.#a);const i=this.#h,n=this.#m;for(const r of t){if(i.length>Py){bt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),o.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(r.str),this.#w(r)}}#w(t){const i=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#h.push(i);const r=rt.transform(this.#v,t.transform);let o=Math.atan2(r[1],r[0]);const c=this.#g[t.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#s&&c.fontSubstitution||c.fontFamily;u=Te.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),f=d*Te.#O(u,c,this.#a);let p,b;o===0?(p=r[4],b=r[5]-f):(p=r[4]+f*Math.sin(o),b=r[5]-f*Math.cos(o));const y="calc(var(--total-scale-factor) *",A=i.style;this.#e===this.#c?(A.left=`${(100*p/this.#l).toFixed(2)}%`,A.top=`${(100*b/this.#r).toFixed(2)}%`):(A.left=`${y}${p.toFixed(2)}px)`,A.top=`${y}${b.toFixed(2)}px)`),A.fontSize=`${y}${(Te.#y*d).toFixed(2)}px)`,A.fontFamily=u,n.fontSize=d,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#s&&(i.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);_!==x&&Math.max(_,x)/Math.min(_,x)>1.5&&(w=!0)}if(w&&(n.canvasWidth=c.vertical?t.height:t.width),this.#p.set(i,n),this.#n.div=i,this.#n.properties=n,this.#D(this.#n),n.hasText&&this.#e.append(i),n.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this.#e.append(_)}}#D(t){const{div:i,properties:n,ctx:r}=t,{style:o}=i;let c="";if(Te.#y>1&&(c=`scale(${1/Te.#y})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:f}=n;Te.#C(r,f*this.#o,u);const{width:p}=r.measureText(i.textContent);p>0&&(c=`scaleX(${d*this.#o/p}) ${c}`)}n.angle!==0&&(c=`rotate(${n.angle}deg) ${c}`),c.length>0&&(o.transform=c)}static cleanup(){if(!(this.#E.size>0)){this.#b.clear();for(const{canvas:t}of this.#S.values())t.remove();this.#S.clear()}}static#M(t=null){let i=this.#S.get(t||="");if(!i){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),i=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#S.set(t,i),this.#_.set(i,{size:0,family:""})}return i}static#C(t,i,n){const r=this.#_.get(t);i===r.size&&n===r.family||(t.font=`${i}px ${n}`,r.size=i,r.family=n)}static#T(){if(this.#y!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#y=t.getBoundingClientRect().height,t.remove()}static#O(t,i,n){const r=this.#b.get(t);if(r)return r;const o=this.#M(n);o.canvas.width=o.canvas.height=op,this.#C(o,op,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(Ae.platform.isFirefox&&bt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?f=i.ascent:i.descent&&(f=1+i.descent)),this.#b.set(t,f),f}}class Ya{static textContent(t){const i=[],n={items:i,styles:Object.create(null)};function r(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(Ya.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&i.push({str:c}),!!o.children)for(const d of o.children)r(d)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const By=100;function Lp(m={}){typeof m=="string"||m instanceof URL?m={url:m}:(m instanceof ArrayBuffer||ArrayBuffer.isView(m))&&(m={data:m});const t=new Lu,{docId:i}=t,n=m.url?Xb(m.url):null,r=m.data?Yb(m.data):null,o=m.httpHeaders||null,c=m.withCredentials===!0,u=m.password??null,d=m.range instanceof kp?m.range:null,f=Number.isInteger(m.rangeChunkSize)&&m.rangeChunkSize>0?m.rangeChunkSize:2**16;let p=m.worker instanceof $a?m.worker:null;const b=m.verbosity,y=typeof m.docBaseUrl=="string"&&!kl(m.docBaseUrl)?m.docBaseUrl:null,A=yl(m.cMapUrl),w=m.cMapPacked!==!1,_=m.CMapReaderFactory||(Ce?ey:Qg),x=yl(m.iccUrl),E=yl(m.standardFontDataUrl),O=m.StandardFontDataFactory||(Ce?iy:Zg),M=yl(m.wasmUrl),k=m.WasmFactory||(Ce?sy:Wg),D=m.stopAtErrors!==!0,I=Number.isInteger(m.maxImageSize)&&m.maxImageSize>-1?m.maxImageSize:-1,j=m.isEvalSupported!==!1,K=typeof m.isOffscreenCanvasSupported=="boolean"?m.isOffscreenCanvasSupported:!Ce,Z=typeof m.isImageDecoderSupported=="boolean"?m.isImageDecoderSupported:!Ce&&(Ae.platform.isFirefox||!globalThis.chrome),tt=Number.isInteger(m.canvasMaxAreaInBytes)?m.canvasMaxAreaInBytes:-1,W=typeof m.disableFontFace=="boolean"?m.disableFontFace:Ce,ot=m.fontExtraProperties===!0,At=m.enableXfa===!0,gt=m.ownerDocument||globalThis.document,dt=m.disableRange===!0,N=m.disableStream===!0,U=m.disableAutoFetch===!0,et=m.pdfBug===!0,St=m.CanvasFactory||(Ce?ty:Zb),C=m.FilterFactory||(Ce?Jb:Wb),V=m.enableHWA===!0,Q=m.useWasm!==!1,Y=d?d.length:m.length??NaN,$=typeof m.useSystemFonts=="boolean"?m.useSystemFonts:!Ce&&!W,nt=typeof m.useWorkerFetch=="boolean"?m.useWorkerFetch:!!(_===Qg&&O===Zg&&k===Wg&&A&&E&&M&&Ga(A,document.baseURI)&&Ga(E,document.baseURI)&&Ga(M,document.baseURI)),st=null;Eb(b);const pt={canvasFactory:new St({ownerDocument:gt,enableHWA:V}),filterFactory:new C({docId:i,ownerDocument:gt}),cMapReaderFactory:nt?null:new _({baseUrl:A,isCompressed:w}),standardFontDataFactory:nt?null:new O({baseUrl:E}),wasmFactory:nt?null:new k({baseUrl:M})};p||(p=$a.create({verbosity:b,port:Bn.workerPort}),t._worker=p);const yt={docId:i,apiVersion:"5.4.54",data:r,password:u,disableAutoFetch:U,rangeChunkSize:f,length:Y,docBaseUrl:y,enableXfa:At,evaluatorOptions:{maxImageSize:I,disableFontFace:W,ignoreErrors:D,isEvalSupported:j,isOffscreenCanvasSupported:K,isImageDecoderSupported:Z,canvasMaxAreaInBytes:tt,fontExtraProperties:ot,useSystemFonts:$,useWasm:Q,useWorkerFetch:nt,cMapUrl:A,iccUrl:x,standardFontDataUrl:E,wasmUrl:M}},jt={ownerDocument:gt,pdfBug:et,styleElement:st,loadingParams:{disableAutoFetch:U,enableXfa:At}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Wt=p.messageHandler.sendWithPromise("GetDocRequest",yt,r?[r.buffer]:null);let Jt;if(d)Jt=new vy(d,{disableRange:dt,disableStream:N});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const De=Ga(n)?wy:Ce?Ly:My;Jt=new De({url:n,length:Y,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:dt,disableStream:N})}return Wt.then(De=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const di=new qa(i,De,p.port),Ti=new jy(di,t,Jt,jt,pt,V);t._transport=Ti,di.send("Ready",null)})}).catch(t._capability.reject),t}class Lu{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Lu.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class kp{#t=Promise.withResolvers();#e=[];#i=[];#s=[];#a=[];constructor(t,i,n=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(t){this.#a.push(t)}addProgressListener(t){this.#s.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const n of this.#a)n(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const n of this.#s)n(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#i)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){Bt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Hy{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Et(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Iy{#t=!1;constructor(t,i,n,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=n,this._stats=r?new Yg:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new Op,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}={}){return new Wa({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:n,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Et(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:n,intent:r="display",annotationMode:o=ps.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:b=null,isEditing:y=!1}){this._stats?.time("Overall");const A=this._transport.getRenderingIntent(r,o,b,y),{renderingIntent:w,cacheKey:_}=A;this.#t=!1,d||=this._transport.getOptionalContentConfig(w);let x=this._intentStates.get(_);x||(x=Object.create(null),this._intentStates.set(_,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const E=!!(w&$e.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(A));const O=D=>{x.renderTasks.delete(M),E&&(this.#t=!0),this.#e(),D?(M.capability.reject(D),this._abortOperatorList({intentState:x,reason:D instanceof Error?D:new Error(D)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new zn({callback:O,params:{canvas:i,canvasContext:t,viewport:n,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA});(x.renderTasks||=new Set).add(M);const k=M.task;return Promise.all([x.displayReadyCapability.promise,d]).then(([D,I])=>{if(this.destroyed){O();return}if(this._stats?.time("Rendering"),!(I.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:D,optionalContentConfig:I}),M.operatorListChanged()}).catch(O),k}getOperatorList({intent:t="display",annotationMode:i=ps.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,i,n,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ya.textContent(n));const i=this.streamTextContent(t);return new Promise(function(n,r){function o(){c.read().then(function({value:d,done:f}){if(f){n(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const c=i.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const n of i.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#e();return t&&i&&(this._stats&&=new Yg),i}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const n=this._intentStates.get(i);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let n=0,r=t.length;n<r;n++)i.operatorList.fnArray.push(t.fnArray[n]),i.operatorList.argsArray.push(t.argsArray[n]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const n of i.renderTasks)n.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:n,modifiedIds:r}){const{map:o,transfer:c}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:o,modifiedIds:r},c).getReader(),f=this._intentStates.get(i);f.streamReader=d;const p=()=>{d.read().then(({value:b,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,f),p())},b=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(b);else if(f.opListReadCapability)f.opListReadCapability.reject(b);else throw b}})};p()}_abortOperatorList({intentState:t,reason:i,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(i instanceof xu){let r=By;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new bs(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var ms,hi,qi,Hs,Dl,Is,js,Re,xl,zp,Pp,Va,Hn,Tl;const Gt=class Gt{constructor({name:t=null,port:i=null,verbosity:n=xb()}={}){vi(this,Re);vi(this,ms,Promise.withResolvers());vi(this,hi,null);vi(this,qi,null);vi(this,Hs,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,i){if(Ft(Gt,js).has(i))throw new Error("Cannot use more than one PDFWorker per port.");Ft(Gt,js).set(i,this),Ai(this,Re,zp).call(this,i)}else Ai(this,Re,Pp).call(this)}get promise(){return Ft(this,ms).promise}get port(){return Ft(this,qi)}get messageHandler(){return Ft(this,hi)}destroy(){this.destroyed=!0,Ft(this,Hs)?.terminate(),Pe(this,Hs,null),Ft(Gt,js).delete(Ft(this,qi)),Pe(this,qi,null),Ft(this,hi)?.destroy(),Pe(this,hi,null)}static create(t){const i=Ft(this,js).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new Gt(t)}static get workerSrc(){if(Bn.workerSrc)return Bn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Et(this,"_setupFakeWorkerGlobal",(async()=>Ft(this,Hn,Tl)?Ft(this,Hn,Tl):(await import(this.workerSrc)).WorkerMessageHandler)())}};ms=new WeakMap,hi=new WeakMap,qi=new WeakMap,Hs=new WeakMap,Dl=new WeakMap,Is=new WeakMap,js=new WeakMap,Re=new WeakSet,xl=function(){Ft(this,ms).resolve(),Ft(this,hi).send("configure",{verbosity:this.verbosity})},zp=function(t){Pe(this,qi,t),Pe(this,hi,new qa("main","worker",t)),Ft(this,hi).on("ready",()=>{}),Ai(this,Re,xl).call(this)},Pp=function(){if(Ft(Gt,Is)||Ft(Gt,Hn,Tl)){Ai(this,Re,Va).call(this);return}let{workerSrc:t}=Gt;try{Gt._isSameOrigin(window.location,t)||(t=Gt._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),n=new qa("main","worker",i),r=()=>{o.abort(),n.destroy(),i.terminate(),this.destroyed?Ft(this,ms).reject(new Error("Worker was destroyed")):Ai(this,Re,Va).call(this)},o=new AbortController;i.addEventListener("error",()=>{Ft(this,Hs)||r()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}Pe(this,hi,n),Pe(this,qi,i),Pe(this,Hs,i),Ai(this,Re,xl).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{Ai(this,Re,Va).call(this)}});const c=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};c();return}catch{Ll("The worker has been disabled.")}Ai(this,Re,Va).call(this)},Va=function(){Ft(Gt,Is)||(bt("Setting up fake worker."),Pe(Gt,Is,!0)),Gt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Ft(this,ms).reject(new Error("Worker was destroyed"));return}const i=new Qb;Pe(this,qi,i);const n=`fake${kg(Gt,Dl)._++}`,r=new qa(n+"_worker",n,i);t.setup(r,i),Pe(this,hi,new qa(n,n+"_worker",i)),Ai(this,Re,xl).call(this)}).catch(t=>{Ft(this,ms).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Hn=new WeakSet,Tl=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},vi(Gt,Hn),vi(Gt,Dl,0),vi(Gt,Is,!1),vi(Gt,js,new WeakMap),Ce&&(Pe(Gt,Is,!0),Bn.workerSrc||="./pdf.worker.mjs"),Gt._isSameOrigin=(t,i)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const r=new URL(i,n);return n.origin===r.origin},Gt._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},Gt.fromPort=t=>{if(Bb("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Gt.create(t)};let $a=Gt;class jy{#t=new Map;#e=new Map;#i=new Map;#s=new Map;#a=null;constructor(t,i,n,r,o,c){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new Op,this.fontLoader=new qb({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#n(t,i=null){const n=this.#t.get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,r),r}get annotationStorage(){return Et(this,"annotationStorage",new Ru)}getRenderingIntent(t,i=ps.ENABLE,n=null,r=!1,o=!1){let c=$e.DISPLAY,u=mu;switch(t){case"any":c=$e.ANY;break;case"display":break;case"print":c=$e.PRINT;break;default:bt(`getRenderingIntent - invalid intent: ${t}`)}const d=c&$e.PRINT&&n instanceof Ap?n:this.annotationStorage;switch(i){case ps.DISABLE:c+=$e.ANNOTATIONS_DISABLE;break;case ps.ENABLE:break;case ps.ENABLE_FORMS:c+=$e.ANNOTATIONS_FORMS;break;case ps.ENABLE_STORAGE:c+=$e.ANNOTATIONS_STORAGE,u=d.serializable;break;default:bt(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(c+=$e.IS_EDITING),o&&(c+=$e.OPLIST);const{ids:f,hash:p}=d.modifiedIds,b=[c,u.hash,p];return{renderingIntent:c,cacheKey:b.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#i.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Te.cleanup(),this._networkStream?.cancelAllRequests(new bs("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(n,r)=>{ae(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}ae(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{i.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(n,r)=>{ae(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){r.close();return}ae(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,i._capability.resolve(new Hy(n,this))}),t.on("DocException",n=>{i._capability.reject(Be(n))}),t.on("PasswordRequest",n=>{this.#a=Promise.withResolvers();try{if(!i.onPassword)throw Be(n);const r=o=>{o instanceof Error?this.#a.reject(o):this.#a.resolve({password:o})};i.onPassword(r,n.code)}catch(r){this.#a.reject(r)}return this.#a.promise}),t.on("DataLoaded",n=>{i.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in o){const f=o.error;bt(`Error during font loading: ${f}`),this.commonObjs.resolve(n,f);break}const c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,u=new Vb(o,c);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!u.fontExtraProperties&&u.data&&(u.data=null),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:d}=o;ae(d,"The imageRef must be defined.");for(const f of this.#e.values())for(const[,p]of f.objs)if(p?.ref===d)return p.dataLen?(this.commonObjs.resolve(n,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,o,c])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(n)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||i.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&bt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,n=this.#i.get(i);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#s.set(o.refStr,t);const c=new Iy(i,o,this,this._params.pdfBug);return this.#e.set(i,c),c});return this.#i.set(i,r),r}getPageIndex(t){return bu(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#n("GetFieldObjects")}hasJSActions(){return this.#n("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#n("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#n("GetOptionalContentConfig").then(i=>new yy(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const n=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new my(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Te.cleanup()}}cachedPageNumber(t){if(!bu(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#s.get(i)??null}}class Uy{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class zn{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:n,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:b=!1,pageColors:y=null,enableHWA:A=!1}){this.callback=t,this.params=i,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=b,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Uy(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(zn.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");zn.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:o}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Pn(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),zn.#e.delete(this._canvas),t||=new xu(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),zn.#e.delete(this._canvas),this.callback())))}}const Bp="5.4.54",Fy="295fb3ec4";class ri{#t=null;#e=null;#i;#s=null;#a=!1;#n=!1;#r=null;#l;#u=null;#c=null;static#d=null;static get _keyboardManager(){return Et(this,"_keyboardManager",new Ja([[["Escape","mac+Escape"],ri.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ri.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ri.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ri.prototype._moveToPrevious],[["Home","mac+Home"],ri.prototype._moveToBeginning],[["End","mac+End"],ri.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#n=!1,this.#r=t):this.#n=!0,this.#c=t?._uiManager||i,this.#l=this.#c._eventBus,this.#i=t?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",ri.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#r&&(t.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const i=this.#c._signal;t.addEventListener("click",this.#f.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#i,t.append(n),t}renderMainDropdown(){const t=this.#s=this.#o();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#o(){const t=document.createElement("div"),i=this.#c._signal;t.addEventListener("contextmenu",li,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(t.id=`${this.#r.id}_colorpicker_dropdown`);for(const[n,r]of this.#c.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=n,o.setAttribute("data-l10n-id",ri.#d[n]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.ariaSelected=r===this.#i,o.addEventListener("click",this.#g.bind(this,r),{signal:i}),t.append(o)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#g(t,i){i.stopPropagation(),this.#l.dispatch("switchannotationeditorparams",{source:this,type:Ct.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#f(t);return}const i=t.target.getAttribute("data-color");i&&this.#g(i,t)}_moveToNext(t){if(!this.#p){this.#f(t);return}if(t.target===this.#t){this.#s.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#s?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#f(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#f(t);return}this.#s.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#f(t);return}this.#s.lastChild?.focus()}#m(t){ri._keyboardManager.exec(this,t)}#f(t){if(this.#p){this.hideDropdown();return}if(this.#a=t.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#h.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#t.ariaExpanded="true",this.#s){this.#s.classList.remove("hidden");return}const i=this.#s=this.#o();this.#t.append(i)}#h(t){this.#s?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#p(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#n){if(!this.#p){this.#r?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#s)return;const i=this.#c.highlightColors.values();for(const n of this.#s.children)n.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#s?.remove(),this.#s=null}}class Ka{#t=null;#e=null;#i=null;static#s=null;constructor(t){this.#e=t,this.#i=t._uiManager,Ka.#s||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,colorValue:n}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",Ka.#s[t]),r.addEventListener("input",()=>{this.#i.updateParams(i,r.value)},{signal:this.#i._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function cp(m){return Math.floor(Math.max(0,Math.min(1,m))*255).toString(16).padStart(2,"0")}function Ua(m){return Math.max(0,Math.min(255,255*m))}class up{static CMYK_G([t,i,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ua(t),[t,t,t]}static G_HTML([t]){const i=cp(t);return`#${i}${i}${i}`}static RGB_G([t,i,n]){return["G",.3*t+.59*i+.11*n]}static RGB_rgb(t){return t.map(Ua)}static RGB_HTML(t){return`#${t.map(cp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,n,r]){return[Ua(1-Math.min(1,t+r)),Ua(1-Math.min(1,n+r)),Ua(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,n]){const r=1-t,o=1-i,c=1-n,u=Math.min(r,o,c);return["CMYK",r,o,c,u]}}class Gy{create(t,i,n=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Bt("Abstract method `_createSVG` called.")}}class Rl extends Gy{_createSVG(t){return document.createElementNS(Fi,t)}}class Hp{static setupStorage(t,i,n,r,o){const c=r.getValue(i,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of n.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(i,{value:f})});break}}static setAttributes({html:t,element:i,storage:n=null,intent:r,linkService:o}){const{attributes:c}=i,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,i,n)}static render(t){const i=t.annotationStorage,n=t.linkService,r=t.xfaHtml,o=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:n});const u=o!=="richText",d=t.div;if(d.append(c),t.viewport){const b=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=b}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(r.children.length===0){if(r.value){const b=document.createTextNode(r.value);c.append(b),u&&Ya.shouldBuildText(r.name)&&f.push(b)}return{textDivs:f}}const p=[[r,-1,c]];for(;p.length>0;){const[b,y,A]=p.at(-1);if(y+1===b.children.length){p.pop();continue}const w=b.children[++p.at(-1)[1]];if(w===null)continue;const{name:_}=w;if(_==="#text"){const E=document.createTextNode(w.value);f.push(E),A.append(E);continue}const x=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,_):document.createElement(_);if(A.append(x),w.attributes&&this.setAttributes({html:x,element:w,storage:i,intent:o,linkService:n}),w.children?.length>0)p.push([w,-1,x]);else if(w.value){const E=document.createTextNode(w.value);u&&Ya.shouldBuildText(_)&&f.push(E),x.append(E)}}for(const b of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const qy=9,Fs=new WeakSet,Vy=new Date().getTimezoneOffset()*60*1e3;class hp{static create(t){switch(t.data.annotationType){case se.LINK:return new ku(t);case se.TEXT:return new Xy(t);case se.WIDGET:switch(t.data.fieldType){case"Tx":return new Yy(t);case"Btn":return t.data.radioButton?new Ip(t):t.data.checkBox?new Ky(t):new Qy(t);case"Ch":return new Zy(t);case"Sig":return new $y(t)}return new qs(t);case se.POPUP:return new vu(t);case se.FREETEXT:return new jp(t);case se.LINE:return new Jy(t);case se.SQUARE:return new tv(t);case se.CIRCLE:return new ev(t);case se.POLYLINE:return new Up(t);case se.CARET:return new sv(t);case se.INK:return new zu(t);case se.POLYGON:return new iv(t);case se.HIGHLIGHT:return new Fp(t);case se.UNDERLINE:return new nv(t);case se.SQUIGGLY:return new av(t);case se.STRIKEOUT:return new rv(t);case se.STAMP:return new Gp(t);case se.FILEATTACHMENT:return new lv(t);default:return new Zt(t)}}}class Zt{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:i=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,i&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Zt._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:n}=t;i&&this.#s(i);let r=this.#i?.popup||this.popup;!r&&n?.text&&(this._createPopup(n),r=this.#i.popup),r&&(r.updateEdited(t),n?.deleted&&(r.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#s(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#s(t){const{container:{style:i},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;n?.splice(0,4,...t),i.left=`${100*(t[0]-u)/o}%`,i.top=`${100*(c-t[3]+d)/c}%`,r===0?(i.width=`${100*(t[2]-t[0])/o}%`,i.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",i.id),!(this instanceof qs)&&!(this instanceof ku)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,i.alternativeText&&(o.title=i.alternativeText),i.noRotate&&o.classList.add("norotate"),!i.rect||this instanceof vu){const{rotation:_}=i;return!i.hasOwnCanvas&&_!==0&&this.setRotation(_,o),o}const{width:u,height:d}=this;if(!t&&i.borderStyle.width>0){c.borderWidth=`${i.borderStyle.width}px`;const _=i.borderStyle.horizontalCornerRadius,x=i.borderStyle.verticalCornerRadius;if(_>0||x>0){const O=`calc(${_}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;c.borderRadius=O}else if(this instanceof Ip){const O=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=O}switch(i.borderStyle.style){case Nn.SOLID:c.borderStyle="solid";break;case Nn.DASHED:c.borderStyle="dashed";break;case Nn.BEVELED:bt("Unimplemented border style: beveled");break;case Nn.INSET:bt("Unimplemented border style: inset");break;case Nn.UNDERLINE:c.borderBottomStyle="solid";break}const E=i.borderColor||null;E?(this.#e=!0,c.borderColor=rt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):c.borderWidth=0}const f=rt.normalizeRect([i.rect[0],n.view[3]-i.rect[1]+n.view[1],i.rect[2],n.view[3]-i.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:b,pageX:y,pageY:A}=r.rawDims;c.left=`${100*(f[0]-y)/p}%`,c.top=`${100*(f[1]-A)/b}%`;const{rotation:w}=i;return i.hasOwnCanvas||w===0?(c.width=`${100*u/p}%`,c.height=`${100*d/b}%`):this.setRotation(w,o),o}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),i.style.width=`${100*o/n}%`,i.style.height=`${100*c/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,n,r)=>{const o=r.detail[i],c=o[0],u=o.slice(1);r.target.style[n]=up[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:up[`${c}_rgb`](u)})};return Et(this,"_commonActions",{display:i=>{const{display:n}=i.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:n}=i.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const n=i.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,i){const n=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||n[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const n=this._commonActions;for(const[r,o]of Object.entries(i)){const c=n[r];if(c){const u={detail:{[r]:o},target:t};c(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,n,r,o]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,x,E,O]=t.subarray(2,6);if(r===_&&o===x&&i===E&&n===O)return}const{style:c}=this.container;let u;if(this.#e){const{borderColor:_,borderWidth:x}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const d=r-i,f=o-n,{svgFactory:p}=this,b=p.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0),b.role="none";const y=p.createElement("defs");b.append(y);const A=p.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),y.append(A);for(let _=2,x=t.length;_<x;_+=8){const E=t[_],O=t[_+1],M=t[_+2],k=t[_+3],D=p.createElement("rect"),I=(M-i)/d,j=(o-O)/f,K=(E-M)/d,Z=(O-k)/f;D.setAttribute("x",I),D.setAttribute("y",j),D.setAttribute("width",K),D.setAttribute("height",Z),A.append(D),u?.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${j}" width="${K}" height="${Z}"/>`)}this.#e&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(b),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:i}=this;let n,r;t?(n={str:t.text},r=t.date):(n=i.contentsObj,r=i.modificationDate);const o=this.#i=new vu({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:n,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}render(){Bt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:c,exportValues:u}of r){if(o===-1||c===i)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!Fs.has(f)){bt(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:d,domElement:f})}return n}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==i&&Fs.has(r)&&n.push({id:c,exportValue:o,domElement:r})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class ku extends Zt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#i(n,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,n=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,i,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),n&&(t.title=n),this.#t()}#e(t,i,n="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#i(t,i,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=n.get(r);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){bt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:r,refs:o,include:c}=i,u=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const b of r){const y=this._fieldObjects[b]||[];for(const{id:A}of y)p.add(A)}for(const b of Object.values(this._fieldObjects))for(const y of b)p.has(y.id)===c&&u.push(y)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const d=this.annotationStorage,f=[];for(const p of u){const{id:b}=p;switch(f.push(b),p.type){case"text":{const A=p.defaultValue||"";d.setValue(b,{value:A});break}case"checkbox":case"radiobutton":{const A=p.defaultValue===p.exportValues;d.setValue(b,{value:A});break}case"combobox":case"listbox":{const A=p.defaultValue||"";d.setValue(b,{value:A});break}default:continue}const y=document.querySelector(`[data-element-id="${b}"]`);if(y){if(!Fs.has(y)){bt(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class Xy extends Zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class qs extends Zt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ae.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,n,r,o){n.includes("mouse")?t.addEventListener(n,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{if(n==="blur"){if(!i.focused||!c.relatedTarget)return;i.focused=!1}else if(n==="focus"){if(i.focused)return;i.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}})})}_setEventListeners(t,i,n,r){for(const[o,c]of n)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,o,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":rt.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||qy,o=t.style;let c;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(nu*r))||1,b=f/p;c=Math.min(r,d(b/nu))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,d(f/nu))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=rt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class Yy extends qs{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,n,r){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[i]=n),o.setValue(c.id,{[r]:n})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let o=r.value||"";const c=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Fs.add(n),n.setAttribute("data-element-id",i),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:b}=this.data,y=!!p&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",w=>{t.setValue(i,{value:w.target.value}),this.setPropertyOnSiblings(n,"value",w.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",w=>{const _=this.data.defaultFieldValue??"";n.value=d.userValue=_,d.formattedValue=null});let A=w=>{const{formattedValue:_}=d;_!=null&&(w.target.value=_),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{if(d.focused)return;const{target:x}=_;if(y&&(x.type=p,b&&(x.step=b)),d.userValue){const E=d.userValue;if(y)if(p==="time"){const O=new Date(E),M=[O.getHours(),O.getMinutes(),O.getSeconds()];x.value=M.map(k=>k.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-Vy).toISOString().split(p==="date"?"T":".",1)[0];else x.value=E}d.lastCommittedValue=x.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const x={value(E){d.userValue=E.detail.value??"",y||t.setValue(i,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:O}=E.detail;d.formattedValue=O,O!=null&&E.target!==document.activeElement&&(E.target.value=O);const M={formattedValue:O};y&&(M.value=O),t.setValue(i,M)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:O}=E.detail,{target:M}=E;if(O===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",O);let k=d.userValue;!k||k.length<=O||(k=k.slice(0,O),M.value=d.userValue=k,t.setValue(i,{value:k}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(x,_)}),n.addEventListener("keydown",_=>{d.commitKey=1;let x=-1;if(_.key==="Escape"?x=0:_.key==="Enter"&&!this.data.multiLine?x=2:_.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:E}=_.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:x,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const w=A;A=null,n.addEventListener("blur",_=>{if(!d.focused||!_.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:x}=_;let{value:E}=x;if(y){if(E&&p==="time"){const O=E.split(":").map(M=>parseInt(M,10));E=new Date(2e3,0,1,O[0],O[1],O[2]||0).valueOf(),x.step=""}else E=new Date(E).valueOf();x.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}),w(_)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",_=>{d.lastCommittedValue=null;const{data:x,target:E}=_,{value:O,selectionStart:M,selectionEnd:k}=E;let D=M,I=k;switch(_.inputType){case"deleteWordBackward":{const j=O.substring(0,M).match(/\w*[^\w]*$/);j&&(D-=j[0].length);break}case"deleteWordForward":{const j=O.substring(M).match(/^[^\w]*\w*/);j&&(I+=j[0].length);break}case"deleteContentBackward":M===k&&(D-=1);break;case"deleteContentForward":M===k&&(I+=1);break}_.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:O,change:x||"",willCommit:!1,selStart:D,selEnd:I}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(A&&n.addEventListener("blur",A),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class $y extends qs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Ky extends qs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,n=i.id;let r=t.getValue(n,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Fs.add(o),o.setAttribute("data-element-id",n),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",i.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n)){const p=d&&f.exportValue===i.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue||"Off";c.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Ip extends qs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,n=i.id;let r=t.getValue(n,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(n,{value:r})),r)for(const c of this._getElementsByName(i.fieldName,n))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(Fs.add(o),o.setAttribute("data-element-id",n),o.disabled=i.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=i.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const u=i.defaultFieldValue;c.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const c=i.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const p=c===f.detail.value;for(const b of this._getElementsByName(f.target.name)){const y=p&&b.id===n;b.domElement&&(b.domElement.checked=y),t.setValue(b.id,{value:y})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Qy extends ku{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class Zy extends qs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,n=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");Fs.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const b=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===b});for(const p of this.data.options){const b=document.createElement("option");b.textContent=p.displayValue,b.value=p.exportValue,n.value.includes(p.exportValue)&&(b.setAttribute("selected",!0),o=!1),r.append(b)}let c=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),c=()=>{p.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=p=>{const b=p?"value":"textContent",{options:y,multiple:A}=r;return A?Array.prototype.filter.call(y,w=>w.selected).map(w=>w[b]):y.selectedIndex===-1?null:y[y.selectedIndex][b]};let d=u(!1);const f=p=>{const b=p.target.options;return Array.prototype.map.call(b,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const b={value(y){c?.();const A=y.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const _ of r.options)_.selected=w.has(_.value);t.setValue(i,{value:u(!0)}),d=u(!1)},multipleSelection(y){r.multiple=!0},remove(y){const A=r.options,w=y.detail.remove;A[w].selected=!1,r.remove(w),A.length>0&&Array.prototype.findIndex.call(A,x=>x.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:f(y)}),d=u(!1)},clear(y){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),d=u(!1)},insert(y){const{index:A,displayValue:w,exportValue:_}=y.detail.insert,x=r.children[A],E=document.createElement("option");E.textContent=w,E.value=_,x?x.before(E):r.append(E),t.setValue(i,{value:u(!0),items:f(y)}),d=u(!1)},items(y){const{items:A}=y.detail;for(;r.length!==0;)r.remove(0);for(const w of A){const{displayValue:_,exportValue:x}=w,E=document.createElement("option");E.textContent=_,E.value=x,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:f(y)}),d=u(!1)},indices(y){const A=new Set(y.detail.indices);for(const w of y.target.options)w.selected=A.has(w.index);t.setValue(i,{value:u(!0)}),d=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(b,p)}),r.addEventListener("input",p=>{const b=u(!0),y=u(!1);t.setValue(i,{value:b}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:d,change:y,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class vu extends Zt{constructor(t){const{data:i,elements:n}=t;super(t,{isRenderable:Zt._hasPopupData(i)}),this.elements=n,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=new Wy({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${Eu}${r}`).join(",")),this.container}}class Wy{#t=this.#D.bind(this);#e=this.#O.bind(this);#i=this.#T.bind(this);#s=this.#C.bind(this);#a=null;#n=null;#r=null;#l=null;#u=null;#c=null;#d=null;#o=!1;#g=null;#m=null;#f=null;#h=null;#p=null;#v=null;#b=null;#S=!1;constructor({container:t,color:i,elements:n,titleObj:r,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:f,parentRect:p,open:b}){this.#n=t,this.#v=r,this.#r=c,this.#p=u,this.#c=d,this.#a=i,this.#h=f,this.#d=p,this.#u=n,this.#l=gu.toDateObject(o),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup()),this.#_(),this.#n.hidden=!0,b&&this.#C()}#_(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const i of this.trigger)i.addEventListener("click",this.#s,{signal:t}),i.addEventListener("mouseenter",this.#i,{signal:t}),i.addEventListener("mouseleave",this.#e,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#u)i.container?.addEventListener("keydown",this.#t,{signal:t})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#a){const r=t.style.outlineColor=rt.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#v?.str){const r=document.createElement("span");r.className="title",i.append(r),{dir:r.dir,str:r.textContent}=this.#v}if(t.append(i),this.#l){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#l.valueOf()})),r.dateTime=this.#l.toISOString(),i.append(r)}const n=this.#y;if(n)Hp.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(this.#r);t.append(r)}this.#n.append(t)}get#y(){const t=this.#p,i=this.#r;return t?.str&&(!i?.str||i.str===t.str)&&this.#p.html||null}get#E(){return this.#y?.attributes?.style?.fontSize||0}get#R(){return this.#y?.attributes?.style?.color||null}#w(t){const i=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#R,fontSize:this.#E?`calc(${this.#E}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))i.push({name:"span",value:o,attributes:r});return n}_formatContents({str:t,dir:i}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=i;const r=t.split(/(?:\r\n?|\n)/);for(let o=0,c=r.length;o<c;++o){const u=r[o];n.append(document.createTextNode(u)),o<c-1&&n.append(document.createElement("br"))}return n}#D(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#o)&&this.#C()}updateEdited({rect:t,popup:i,deleted:n}){if(n||i?.deleted){this.remove();return}this.#_(),this.#b||={contentsObj:this.#r,richText:this.#p},t&&(this.#f=null),i&&(this.#p=this.#w(i.text),this.#l=gu.toDateObject(i.date),this.#r=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#b&&({contentsObj:this.#r,richText:this.#p}=this.#b,this.#b=null,this.#g?.remove(),this.#g=null,this.#f=null)}remove(){this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#S=!1,this.#o=!1;for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#M(){if(this.#f!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:n,pageX:r,pageY:o}}}=this.#c;let c=!!this.#d,u=c?this.#d:this.#h;for(const w of this.#u)if(!u||rt.intersect(w.data.rect,u)!==null){u=w.data.rect,c=!0;break}const d=rt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=c?u[2]-u[0]+5:0,b=d[0]+p,y=d[1];this.#f=[100*(b-r)/i,100*(y-o)/n];const{style:A}=this.#n;A.left=`${this.#f[0]}%`,A.top=`${this.#f[1]}%`}#C(){this.#o=!this.#o,this.#o?(this.#T(),this.#n.addEventListener("click",this.#s),this.#n.addEventListener("keydown",this.#t)):(this.#O(),this.#n.removeEventListener("click",this.#s),this.#n.removeEventListener("keydown",this.#t))}#T(){this.#g||this.render(),this.isVisible?this.#o&&this.#n.classList.add("focused"):(this.#M(),this.#n.hidden=!1,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)+1e3)}#O(){this.#n.classList.remove("focused"),!(this.#o||!this.isVisible)&&(this.#n.hidden=!0,this.#n.style.zIndex=parseInt(this.#n.style.zIndex)-1e3)}forceHide(){this.#S=this.isVisible,this.#S&&(this.#n.hidden=!0)}maybeShow(){this.#_(),this.#S&&(this.#g||this.#T(),this.#S=!1,this.#n.hidden=!1)}get isVisible(){return this.#n.hidden===!1}}class jp extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=mt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const n=document.createElement("span");n.textContent=i,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Jy extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:n}=this,r=this.svgFactory.create(i,n,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class tv extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:n}=this,r=this.svgFactory.create(i,n,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",i-o),c.setAttribute("height",n-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ev extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:n}=this,r=this.svgFactory.create(i,n,!0),o=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",i/2),c.setAttribute("cy",n/2),c.setAttribute("rx",i/2-o/2),c.setAttribute("ry",n/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Up extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:n,popupRef:r},width:o,height:c}=this;if(!i)return this.container;const u=this.svgFactory.create(o,c,!0);let d=[];for(let p=0,b=i.length;p<b;p+=2){const y=i[p]-t[0],A=t[3]-i[p+1];d.push(`${y},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class iv extends Up{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sv extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class zu extends Zt{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?mt.HIGHLIGHT:mt.INK}#i(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:c,width:u,height:d}=this.#i(i,t),f=this.svgFactory.create(u,d,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",c);for(let b=0,y=n.length;b<y;b++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",n[b].join(",")),p.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:n,rect:r}=t,o=this.#t;if(i>=0&&o.setAttribute("stroke-width",i||1),n)for(let c=0,u=this.#e.length;c<u;c++)this.#e[c].setAttribute("points",n[c].join(","));if(r){const{transform:c,width:u,height:d}=this.#i(this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Fp extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=mt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class nv extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class av extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class rv extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Gp extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=mt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class lv extends Zt{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let n;i.hasAppearance||i.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:r}=Ae.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Pu{#t=null;#e=null;#i=new Map;#s=null;constructor({div:t,accessibilityManager:i,annotationCanvasMap:n,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:u}){this.div=t,this.#t=i,this.#e=n,this.#s=u||null,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return this.#i.size>0}async#a(t,i,n){const r=t.firstChild||t,o=r.id=`${Eu}${i}`,c=await this.#s?.getAriaAttributes(o);if(c)for(const[u,d]of c)r.setAttribute(u,d);n?n.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:i}=t,n=this.div;Us(n,this.viewport);const r=new Map,o={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Rl,annotationStorage:t.annotationStorage||new Ru,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of i){if(c.noHTML)continue;const u=c.annotationType===se.POPUP;if(u){const p=r.get(c.id);if(!p)continue;o.elements=p}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;o.data=c;const d=hp.create(o);if(!d.isRenderable)continue;if(!u&&c.popupRef){const p=r.get(c.popupRef);p?p.push(d):r.set(c.popupRef,[d])}const f=d.render();c.hidden&&(f.style.visibility="hidden"),await this.#a(f,c.id,o.elements),d._isEditable&&(this.#i.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#n()}async addLinkAnnotations(t,i){const n={data:null,layer:this.div,linkService:i,svgFactory:new Rl,parent:this};for(const r of t){r.borderStyle||=Pu._defaultBorderStyle,n.data=r;const o=hp.create(n);if(!o.isRenderable)continue;const c=o.render();await this.#a(c,r.id,null)}}update({viewport:t}){const i=this.div;this.viewport=t,Us(i,{rotation:t.rotation}),this.#n(),i.hidden=!1}#n(){if(!this.#e)return;const t=this.div;for(const[i,n]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n);const c=this.#i.get(i);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,n),c._hasNoCanvas=!1):c.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}static get _defaultBorderStyle(){return Et(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Nn.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const _l=/\r\n?|\n/g;class oe extends lt{#t;#e="";#i=`${this.id}-editor`;#s=null;#a;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=oe.prototype,i=o=>o.isEmpty(),n=ys.TRANSLATE_SMALL,r=ys.TRANSLATE_BIG;return Et(this,"_keyboardManager",new Ja([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=mt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#t=t.color||oe._defaultColor||lt._defaultLineColor,this.#a=t.fontSize||oe._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,i){lt.initialize(t,i);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Ct.FREETEXT_SIZE:oe._defaultFontSize=i;break;case Ct.FREETEXT_COLOR:oe._defaultColor=i;break}}updateParams(t,i){switch(t){case Ct.FREETEXT_SIZE:this.#n(i);break;case Ct.FREETEXT_COLOR:this.#r(i);break}}static get defaultPropertiesToUpdate(){return[[Ct.FREETEXT_SIZE,oe._defaultFontSize],[Ct.FREETEXT_COLOR,oe._defaultColor||lt._defaultLineColor]]}get propertiesToUpdate(){return[[Ct.FREETEXT_SIZE,this.#a],[Ct.FREETEXT_COLOR,this.#t]]}get toolbarButtons(){return this._colorPicker||=new Ka(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ct.FREETEXT_COLOR}get colorValue(){return this.#t}#n(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#a)*this.parentScale),this.#a=r,this.#u()},n=this.#a;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#r(t){const i=r=>{this.#t=this.editorDiv.style.color=r,this._colorPicker?.update(r)},n=this.#t;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-oe._internalPadding*t,-(oe._internalPadding+this.#a)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#l(){const t=[];this.editorDiv.normalize();let i=null;for(const n of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(oe.#c(n)),i=n);return t.join(`
`)}#u(){const[t,i]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/i):(this.width=n.height/t,this.height=n.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#e,i=this.#e=this.#l().trimEnd();if(t===i)return;const n=r=>{if(this.#e=r,!r){this.remove();return}this.#d(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{n(i)},undo:()=>{n(t)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){oe._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,n.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,p]=this.pageDimensions,[b,y]=this.pageTranslation;let A,w;switch(this.rotation){case 0:A=t+(c[0]-b)/f,w=i+this.height-(c[1]-y)/p;break;case 90:A=t+(c[0]-b)/f,w=i-(c[1]-y)/p,[u,d]=[d,-u];break;case 180:A=t-this.width+(c[0]-b)/f,w=i-(c[1]-y)/p,[u,d]=[-u,-d];break;case 270:A=t+(c[0]-b-this.height*p)/f,w=i+(c[1]-y-this.width*f)/p,[u,d]=[-d,u];break}this.setAt(A*r,w*o,u,d)}else this._moveAfterPaste(t,i);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(_l,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:n}=i;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const r=oe.#g(i.getData("text")||"").replaceAll(_l,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=c,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(p.push(u.nodeValue.slice(d).replaceAll(_l,"")),A!==this.editorDiv){let w=f;for(const _ of this.editorDiv.childNodes){if(_===A){w=p;continue}w.push(oe.#c(_))}}f.push(u.nodeValue.slice(0,d).replaceAll(_l,""))}else if(u===this.editorDiv){let A=f,w=0;for(const _ of this.editorDiv.childNodes)w++===d&&(A=p),A.push(oe.#c(_))}this.#e=`${f.join(`
`)}${r}${p.join(`
`)}`,this.#d();const b=new Range;let y=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const w=A.nodeValue.length;if(y<=w){b.setStart(A,y),b.setEnd(A,y);break}y-=w}o.removeAllRanges(),o.addRange(b)}#d(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const t of this.#e.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#o(){return this.#e.replaceAll(" "," ")}static#g(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(t,i,n){let r=null;if(t instanceof jp){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:f,id:p,popupRef:b,contentsObj:y},textContent:A,textPosition:w,parent:{page:{pageNumber:_}}}=t;if(!A||A.length===0)return null;r=t={annotationType:mt.FREETEXT,color:Array.from(u),fontSize:c,value:A.join(`
`),position:w,pageIndex:_-1,rect:d.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:b,comment:y?.str||null}}const o=await super.deserialize(t,i,n);return o.#a=t.fontSize,o.#t=rt.makeHexColor(...t.color),o.#e=oe.#g(t.value),o._initialData=r,t.comment&&o.setCommentData(t.comment),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=oe._internalPadding*this.parentScale,n=this.getRect(i,i),r=lt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),o={annotationType:mt.FREETEXT,color:r,fontSize:this.#a,value:this.#o(),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.isCopy=!0,o):this.annotationElementId&&!this.#m(o)?null:(o.id=this.annotationElementId,o)}#m(t){const{value:i,fontSize:n,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==n||t.color.some((c,u)=>c!==r[u])||t.pageIndex!==o}renderAnnotationElement(t){const i=super.renderAnnotationElement(t),{style:n}=i;n.fontSize=`calc(${this.#a}px * var(--total-scale-factor))`,n.color=this.#t,i.replaceChildren();for(const c of this.#e.split(`
`)){const u=document.createElement("div");u.append(c?document.createTextNode(c):document.createElement("br")),i.append(u)}const r=oe._internalPadding*this.parentScale,o={rect:this.getRect(r,r)};return o.popup=this.hasEditedComment?this.comment:{text:this.#e},t.updateEdited(o),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class J{static PRECISION=1e-4;toSVGPath(){Bt("Abstract method `toSVGPath` must be implemented.")}get box(){Bt("Abstract getter `box` must be implemented.")}serialize(t,i){Bt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,n,r,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=i+t[u]*r,c[u+1]=n+t[u+1]*o;return c}static _rescaleAndSwap(t,i,n,r,o,c){c||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)c[u]=i+t[u+1]*r,c[u+1]=n+t[u]*o;return c}static _translate(t,i,n,r){r||=new Float32Array(t.length);for(let o=0,c=t.length;o<c;o+=2)r[o]=i+t[o],r[o+1]=n+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,n,r,o){switch(o){case 90:return[1-i/n,t/r];case 180:return[1-t/n,1-i/r];case 270:return[i/n,1-t/r];default:return[t/n,i/r]}}static _normalizePagePoint(t,i,n){switch(n){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,n,r,o,c){return[(t+5*n)/6,(i+5*r)/6,(5*n+o)/6,(5*r+c)/6,(n+o)/2,(r+c)/2]}}class Bs{#t;#e=[];#i;#s;#a=[];#n=new Float32Array(18);#r;#l;#u;#c;#d;#o;#g=[];static#m=8;static#f=2;static#h=Bs.#m+Bs.#f;constructor({x:t,y:i},n,r,o,c,u=0){this.#t=n,this.#o=o*r,this.#s=c,this.#n.set([NaN,NaN,NaN,NaN,t,i],6),this.#i=u,this.#c=Bs.#m*r,this.#u=Bs.#h*r,this.#d=r,this.#g.push(t,i)}isEmpty(){return isNaN(this.#n[8])}#p(){const t=this.#n.subarray(4,6),i=this.#n.subarray(16,18),[n,r,o,c]=this.#t;return[(this.#r+(t[0]-i[0])/2-n)/o,(this.#l+(t[1]-i[1])/2-r)/c,(this.#r+(i[0]-t[0])/2-n)/o,(this.#l+(i[1]-t[1])/2-r)/c]}add({x:t,y:i}){this.#r=t,this.#l=i;const[n,r,o,c]=this.#t;let[u,d,f,p]=this.#n.subarray(8,12);const b=t-f,y=i-p,A=Math.hypot(b,y);if(A<this.#u)return!1;const w=A-this.#c,_=w/A,x=_*b,E=_*y;let O=u,M=d;u=f,d=p,f+=x,p+=E,this.#g?.push(t,i);const k=-E/w,D=x/w,I=k*this.#o,j=D*this.#o;return this.#n.set(this.#n.subarray(2,8),0),this.#n.set([f+I,p+j],4),this.#n.set(this.#n.subarray(14,18),12),this.#n.set([f-I,p-j],16),isNaN(this.#n[6])?(this.#a.length===0&&(this.#n.set([u+I,d+j],2),this.#a.push(NaN,NaN,NaN,NaN,(u+I-n)/o,(d+j-r)/c),this.#n.set([u-I,d-j],14),this.#e.push(NaN,NaN,NaN,NaN,(u-I-n)/o,(d-j-r)/c)),this.#n.set([O,M,u,d,f,p],6),!this.isEmpty()):(this.#n.set([O,M,u,d,f,p],6),Math.abs(Math.atan2(M-d,O-u)-Math.atan2(E,x))<Math.PI/2?([u,d,f,p]=this.#n.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((d+p)/2-r)/c),[u,d,O,M]=this.#n.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((O+u)/2-n)/o,((M+d)/2-r)/c),!0):([O,M,u,d,f,p]=this.#n.subarray(0,6),this.#a.push(((O+5*u)/6-n)/o,((M+5*d)/6-r)/c,((5*u+f)/6-n)/o,((5*d+p)/6-r)/c,((u+f)/2-n)/o,((d+p)/2-r)/c),[f,p,u,d,O,M]=this.#n.subarray(12,18),this.#e.push(((O+5*u)/6-n)/o,((M+5*d)/6-r)/c,((5*u+f)/6-n)/o,((5*d+p)/6-r)/c,((u+f)/2-n)/o,((d+p)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#a,i=this.#e;if(isNaN(this.#n[6])&&!this.isEmpty())return this.#v();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#S(n);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?n.push(`L${i[r+4]} ${i[r+5]}`):n.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#b(n),n.join(" ")}#v(){const[t,i,n,r]=this.#t,[o,c,u,d]=this.#p();return`M${(this.#n[2]-t)/n} ${(this.#n[3]-i)/r} L${(this.#n[4]-t)/n} ${(this.#n[5]-i)/r} L${o} ${c} L${u} ${d} L${(this.#n[16]-t)/n} ${(this.#n[17]-i)/r} L${(this.#n[14]-t)/n} ${(this.#n[15]-i)/r} Z`}#b(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#S(t){const[i,n,r,o]=this.#t,c=this.#n.subarray(4,6),u=this.#n.subarray(16,18),[d,f,p,b]=this.#p();t.push(`L${(c[0]-i)/r} ${(c[1]-n)/o} L${d} ${f} L${p} ${b} L${(u[0]-i)/r} ${(u[1]-n)/o}`)}newFreeDrawOutline(t,i,n,r,o,c){return new qp(t,i,n,r,o,c)}getOutlines(){const t=this.#a,i=this.#e,n=this.#n,[r,o,c,u]=this.#t,d=new Float32Array((this.#g?.length??0)+2);for(let b=0,y=d.length-2;b<y;b+=2)d[b]=(this.#g[b]-r)/c,d[b+1]=(this.#g[b+1]-o)/u;if(d[d.length-2]=(this.#r-r)/c,d[d.length-1]=(this.#l-o)/u,isNaN(n[6])&&!this.isEmpty())return this.#_(d);const f=new Float32Array(this.#a.length+24+this.#e.length);let p=t.length;for(let b=0;b<p;b+=2){if(isNaN(t[b])){f[b]=f[b+1]=NaN;continue}f[b]=t[b],f[b+1]=t[b+1]}p=this.#E(f,p);for(let b=i.length-6;b>=6;b-=6)for(let y=0;y<6;y+=2){if(isNaN(i[b+y])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=i[b+y],f[p+1]=i[b+y+1],p+=2}return this.#y(f,p),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#s)}#_(t){const i=this.#n,[n,r,o,c]=this.#t,[u,d,f,p]=this.#p(),b=new Float32Array(36);return b.set([NaN,NaN,NaN,NaN,(i[2]-n)/o,(i[3]-r)/c,NaN,NaN,NaN,NaN,(i[4]-n)/o,(i[5]-r)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(i[16]-n)/o,(i[17]-r)/c,NaN,NaN,NaN,NaN,(i[14]-n)/o,(i[15]-r)/c],0),this.newFreeDrawOutline(b,t,this.#t,this.#d,this.#i,this.#s)}#y(t,i){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],i),i+=6}#E(t,i){const n=this.#n.subarray(4,6),r=this.#n.subarray(16,18),[o,c,u,d]=this.#t,[f,p,b,y]=this.#p();return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-c)/d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,b,y,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-c)/d],i),i+=24}}class qp extends J{#t;#e=new Float32Array(4);#i;#s;#a;#n;#r;constructor(t,i,n,r,o,c){super(),this.#r=t,this.#a=i,this.#t=n,this.#n=r,this.#i=o,this.#s=c,this.lastPoint=[NaN,NaN],this.#l(c);const[u,d,f,p]=this.#e;for(let b=0,y=t.length;b<y;b+=2)t[b]=(t[b]-u)/f,t[b+1]=(t[b+1]-d)/p;for(let b=0,y=i.length;b<y;b+=2)i[b]=(i[b]-u)/f,i[b+1]=(i[b+1]-d)/p}toSVGPath(){const t=[`M${this.#r[4]} ${this.#r[5]}`];for(let i=6,n=this.#r.length;i<n;i+=6){if(isNaN(this.#r[i])){t.push(`L${this.#r[i+4]} ${this.#r[i+5]}`);continue}t.push(`C${this.#r[i]} ${this.#r[i+1]} ${this.#r[i+2]} ${this.#r[i+3]} ${this.#r[i+4]} ${this.#r[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,n,r],o){const c=n-t,u=r-i;let d,f;switch(o){case 0:d=J._rescale(this.#r,t,r,c,-u),f=J._rescale(this.#a,t,r,c,-u);break;case 90:d=J._rescaleAndSwap(this.#r,t,i,c,u),f=J._rescaleAndSwap(this.#a,t,i,c,u);break;case 180:d=J._rescale(this.#r,n,i,-c,u),f=J._rescale(this.#a,n,i,-c,u);break;case 270:d=J._rescaleAndSwap(this.#r,n,r,-c,-u),f=J._rescaleAndSwap(this.#a,n,r,-c,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#l(t){const i=this.#r;let n=i[4],r=i[5];const o=[n,r,n,r];let c=n,u=r;const d=t?Math.max:Math.min;for(let p=6,b=i.length;p<b;p+=6){const y=i[p+4],A=i[p+5];if(isNaN(i[p]))rt.pointBoundingBox(y,A,o),u<A?(c=y,u=A):u===A&&(c=d(c,y));else{const w=[1/0,1/0,-1/0,-1/0];rt.bezierBoundingBox(n,r,...i.slice(p,p+6),w),rt.rectBoundingBox(...w,o),u<w[3]?(c=w[2],u=w[3]):u===w[3]&&(c=d(c,w[2]))}n=y,r=A}const f=this.#e;f[0]=o[0]-this.#i,f[1]=o[1]-this.#i,f[2]=o[2]-o[0]+2*this.#i,f[3]=o[3]-o[1]+2*this.#i,this.lastPoint=[c,u]}get box(){return this.#e}newOutliner(t,i,n,r,o,c=0){return new Bs(t,i,n,r,o,c)}getNewOutline(t,i){const[n,r,o,c]=this.#e,[u,d,f,p]=this.#t,b=o*f,y=c*p,A=n*f+u,w=r*p+d,_=this.newOutliner({x:this.#a[0]*b+A,y:this.#a[1]*y+w},this.#t,this.#n,t,this.#s,i??this.#i);for(let x=2;x<this.#a.length;x+=2)_.add({x:this.#a[x]*b+A,y:this.#a[x+1]*y+w});return _.getOutlines()}}class Au{#t;#e;#i=[];#s=[];constructor(t,i=0,n=0,r=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:A,y:w,width:_,height:x}of t){const E=Math.floor((A-i)/c)*c,O=Math.ceil((A+_+i)/c)*c,M=Math.floor((w-i)/c)*c,k=Math.ceil((w+x+i)/c)*c,D=[E,M,k,!0],I=[O,M,k,!1];this.#i.push(D,I),rt.rectBoundingBox(E,M,O,k,o)}const u=o[2]-o[0]+2*n,d=o[3]-o[1]+2*n,f=o[0]-n,p=o[1]-n,b=this.#i.at(r?-1:-2),y=[b[0],b[2]];for(const A of this.#i){const[w,_,x]=A;A[0]=(w-f)/u,A[1]=(_-p)/d,A[2]=(x-p)/d}this.#t=new Float32Array([f,p,u,d]),this.#e=y}getOutlines(){this.#i.sort((i,n)=>i[0]-n[0]||i[1]-n[1]||i[2]-n[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#u(i)),this.#r(i)):(this.#l(i),t.push(...this.#u(i)));return this.#a(t)}#a(t){const i=[],n=new Set;for(const c of t){const[u,d,f]=c;i.push([u,d,c],[u,f,c])}i.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=i.length;c<u;c+=2){const d=i[c][2],f=i[c+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const r=[];let o;for(;n.size>0;){const c=n.values().next().value;let[u,d,f,p,b]=c;n.delete(c);let y=u,A=d;for(o=[u,f],r.push(o);;){let w;if(n.has(p))w=p;else if(n.has(b))w=b;else break;n.delete(w),[u,d,f,p,b]=w,y!==u&&(o.push(y,A,u,A===d?d:f),y=u),A=A===d?f:d}o.push(y,A)}return new ov(r,this.#t,this.#e)}#n(t){const i=this.#s;let n=0,r=i.length-1;for(;n<=r;){const o=n+r>>1,c=i[o][0];if(c===t)return o;c<t?n=o+1:r=o-1}return r+1}#r([,t,i]){const n=this.#n(t);this.#s.splice(n,0,[t,i])}#l([,t,i]){const n=this.#n(t);for(let r=n;r<this.#s.length;r++){const[o,c]=this.#s[r];if(o!==t)break;if(o===t&&c===i){this.#s.splice(r,1);return}}for(let r=n-1;r>=0;r--){const[o,c]=this.#s[r];if(o!==t)break;if(o===t&&c===i){this.#s.splice(r,1);return}}}#u(t){const[i,n,r]=t,o=[[i,n,r]],c=this.#n(r);for(let u=0;u<c;u++){const[d,f]=this.#s[u];for(let p=0,b=o.length;p<b;p++){const[,y,A]=o[p];if(!(f<=y||A<=d)){if(y>=d){if(A>f)o[p][1]=f;else{if(b===1)return[];o.splice(p,1),p--,b--}continue}o[p][2]=d,A>f&&o.push([i,f,A])}}}return o}}class ov extends J{#t;#e;constructor(t,i,n){super(),this.#e=t,this.#t=i,this.lastPoint=n}toSVGPath(){const t=[];for(const i of this.#e){let[n,r]=i;t.push(`M${n} ${r}`);for(let o=2;o<i.length;o+=2){const c=i[o],u=i[o+1];c===n?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${c}`),n=c)}t.push("Z")}return t.join(" ")}serialize([t,i,n,r],o){const c=[],u=n-t,d=r-i;for(const f of this.#e){const p=new Array(f.length);for(let b=0;b<f.length;b+=2)p[b]=t+f[b]*u,p[b+1]=r-f[b+1]*d;c.push(p)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Su extends Bs{newFreeDrawOutline(t,i,n,r,o,c){return new cv(t,i,n,r,o,c)}}class cv extends qp{newOutliner(t,i,n,r,o,c=0){return new Su(t,i,n,r,o,c)}}class Qt extends lt{#t=null;#e=0;#i;#s=null;#a=null;#n=null;#r=null;#l=0;#u=null;#c=null;#d=null;#o=!1;#g=null;#m;#f=null;#h="";#p;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=mt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Qt.prototype;return Et(this,"_keyboardManager",new Ja([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Qt._defaultColor,this.#p=t.thickness||Qt._defaultThickness,this.#m=t.opacity||Qt._defaultOpacity,this.#i=t.boxes||null,this.#v=t.methodOfCreation||"",this.#h=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#o=!0,this.#S(t),this.#w()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#r=t.focusNode,this.#l=t.focusOffset,this.#b(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new Au(this.#i,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const i=new Au(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#n=i.getOutlines();const{lastPoint:n}=this.#n;this.#g=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#S({highlightOutlines:t,highlightId:i,clipPathId:n}){this.#c=t;const r=1.5;if(this.#n=t.getNewOutline(this.#p/2+r,.0025),i>=0)this.#d=i,this.#s=n,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:Qt.#D(this.#c.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:Qt.#D(this.#n.box,p),path:{d:this.#n.toSVGPath()}})}const[o,c,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=d;break;case 90:{const[p,b]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*b/p,this.height=d*p/b;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=d;break;case 270:{const[p,b]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*b/p,this.height=d*p/b;break}}const{lastPoint:f}=this.#n;this.#g=[(f[0]-o)/u,(f[1]-c)/d]}static initialize(t,i){lt.initialize(t,i),Qt._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case Ct.HIGHLIGHT_COLOR:Qt._defaultColor=i;break;case Ct.HIGHLIGHT_THICKNESS:Qt._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#g}updateParams(t,i){switch(t){case Ct.HIGHLIGHT_COLOR:this.#_(i);break;case Ct.HIGHLIGHT_THICKNESS:this.#y(i);break}}static get defaultPropertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,Qt._defaultColor],[Ct.HIGHLIGHT_THICKNESS,Qt._defaultThickness]]}get propertiesToUpdate(){return[[Ct.HIGHLIGHT_COLOR,this.color||Qt._defaultColor],[Ct.HIGHLIGHT_THICKNESS,this.#p||Qt._defaultThickness],[Ct.HIGHLIGHT_FREE,this.#o]]}#_(t){const i=(o,c)=>{this.color=o,this.#m=c,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:o,"fill-opacity":c}}),this.#a?.updateColor(o)},n=this.color,r=this.#m;this.addCommands({cmd:i.bind(this,t,Qt._defaultOpacity),undo:i.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#y(t){const i=this.#p,n=r=>{this.#p=r,this.#E(r)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new ri({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#T())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#T())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#R(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#R():t&&(this.#w(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#E(t){if(!this.#o)return;this.#S({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();const[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)}#R(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#s}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#m},rootClass:{highlight:!0,free:this.#o},path:{d:this.#c.toSVGPath()}},!1,!0),this.#f=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#o},bbox:this.#n.box,path:{d:this.#n.toSVGPath()}},this.#o),this.#u&&(this.#u.style.clipPath=this.#s))}static#D([t,i,n,r],o){switch(o){case 90:return[1-i-r,t,r,n];case 180:return[1-t-n,1-i-r,n,r];case 270:return[i,1-t-n,r,n]}return[t,i,n,r]}rotate(t){const{drawLayer:i}=this.parent;let n;this.#o?(t=(t-this.rotation+360)%360,n=Qt.#D(this.#c.box,t)):n=Qt.#D([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),i.updateProperties(this.#f,{bbox:Qt.#D(this.#n.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#h&&(t.setAttribute("aria-label",this.#h),t.setAttribute("role","mark")),this.#o?t.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const i=this.#u=document.createElement("div");t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#s;const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),yp(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#M(t){Qt._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#r,this.#l)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#o||this.#C(!1))}get _mustFixPosition(){return!this.#o}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!t}}))}#T(){return this.#o?this.rotation:0}#O(){if(this.#o)return null;const[t,i]=this.pageDimensions,[n,r]=this.pageTranslation,o=this.#i,c=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:p,height:b}of o){const y=d*t+n,A=(1-f)*i+r;c[u]=c[u+4]=y,c[u+1]=c[u+3]=A,c[u+2]=c[u+6]=y+p*t,c[u+5]=c[u+7]=A-b*i,u+=8}return c}#B(t){return this.#c.serialize(t,this.#T())}static startHighlighting(t,i,{target:n,x:r,y:o}){const{x:c,y:u,width:d,height:f}=n.getBoundingClientRect(),p=new AbortController,b=t.combinedSignal(p),y=A=>{p.abort(),this.#U(t,A)};window.addEventListener("blur",y,{signal:b}),window.addEventListener("pointerup",y,{signal:b}),window.addEventListener("pointerdown",ne,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",li,{signal:b}),n.addEventListener("pointermove",this.#L.bind(this,t),{signal:b}),this._freeHighlight=new Su({x:r,y:o},[c,u,d,f],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#U(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,n){let r=null;if(t instanceof Fp){const{data:{quadPoints:w,rect:_,rotation:x,id:E,color:O,opacity:M,popupRef:k,contentsObj:D},parent:{page:{pageNumber:I}}}=t;r=t={annotationType:mt.HIGHLIGHT,color:Array.from(O),opacity:M,quadPoints:w,boxes:null,pageIndex:I-1,rect:_.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:k,comment:D?.str||null}}else if(t instanceof zu){const{data:{inkLists:w,rect:_,rotation:x,id:E,color:O,borderStyle:{rawWidth:M},popupRef:k,contentsObj:D},parent:{page:{pageNumber:I}}}=t;r=t={annotationType:mt.HIGHLIGHT,color:Array.from(O),thickness:M,inkLists:w,boxes:null,pageIndex:I-1,rect:_.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:k,comment:D?.str||null}}const{color:o,quadPoints:c,inkLists:u,opacity:d}=t,f=await super.deserialize(t,i,n);f.color=rt.makeHexColor(...o),f.#m=d||1,u&&(f.#p=t.thickness),f._initialData=r,t.comment&&f.setCommentData(t.comment);const[p,b]=f.pageDimensions,[y,A]=f.pageTranslation;if(c){const w=f.#i=[];for(let _=0;_<c.length;_+=8)w.push({x:(c[_]-y)/p,y:1-(c[_+1]-A)/b,width:(c[_+2]-c[_])/p,height:(c[_+1]-c[_+5])/b});f.#b(),f.#w(),f.rotate(f.rotation)}else if(u){f.#o=!0;const w=u[0],_={x:w[0]-y,y:b-(w[1]-A)},x=new Su(_,[0,0,p,b],1,f.#p/2,!0,.001);for(let M=0,k=w.length;M<k;M+=2)_.x=w[M]-y,_.y=b-(w[M+1]-A),x.add(_);const{id:E,clipPathId:O}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);f.#S({highlightOutlines:x.getOutlines(),highlightId:E,clipPathId:O}),f.#w(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),n=lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r={annotationType:mt.HIGHLIGHT,color:n,opacity:this.#m,thickness:this.#p,quadPoints:this.#O(),outlines:this.#B(i),pageIndex:this.pageIndex,rect:i,rotation:this.#T(),structTreeParentId:this._structTreeParentId};return this.addComment(r),this.annotationElementId&&!this.#x(r)?null:(r.id=this.annotationElementId,r)}#x(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((n,r)=>n!==i[r])}renderAnnotationElement(t){const i={rect:this.getRect(0,0)};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}static canCreateNewEmptyEditor(){return!1}}class Vp{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,n]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,n)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Bt("Not implemented")}}class ht extends lt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#s=null;static#a=null;static#n=NaN;static#r=null;static#l=null;static#u=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(this.#c(t),this.#g())}#c({drawOutlines:t,drawId:i,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#h(t.box)}#d(t,i){const{id:n}=i.drawLayer.draw(ht._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,i){const n=new Set(Object.keys(t));for(const[r,o]of Object.entries(i))n.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Bt("Not implemented")}static get typesMap(){Bt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,i),this._currentParent&&(ht.#i.updateProperty(n,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)t.push([n,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[n,r]of this.constructor.typesMap)t.push([n,i[r]]);return t}_updateProperty(t,i,n){const r=this._drawingOptions,o=r[i],c=u=>{r.updateProperty(i,u);const d=this.#t.updateProperty(i,u);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this._colorPicker?.update(u)};this.addCommands({cmd:c.bind(this,n),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#f()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#f()),{bbox:this.#p()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#f(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#g(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#g(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#g(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,i,n,r]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[i,1-t,n*(c/o),r*(o/c)];case 180:return[1-t,1-i,n,r];case 270:return[1-i,t,n*(c/o),r*(o/c)];default:return[t,i,n,r]}}#f(){const{x:t,y:i,width:n,height:r,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-i,t,n*(o/c),r*(c/o)];case 180:return[1-t,1-i,n,r];case 270:return[i,1-t,n*(o/c),r*(c/o)];default:return[t,i,n,r]}}#h(t){if([this.x,this.y,this.width,this.height]=this.#m(t),this.div){this.fixAndSetPosition();const[i,n]=this.parentDimensions;this.setDims(this.width*i,this.height*n)}this._onResized()}#p(){const{x:t,y:i,width:n,height:r,rotation:o,parentRotation:c,parentDimensions:[u,d]}=this;switch((o*4+c)/90){case 1:return[1-i-r,t,r,n];case 2:return[1-t-n,1-i-r,n,r];case 3:return[i,1-t-n,r,n];case 4:return[t,i-n*(u/d),r*(d/u),n*(u/d)];case 5:return[1-i,t,n*(u/d),r*(d/u)];case 6:return[1-t-r*(d/u),1-i,r*(d/u),n*(u/d)];case 7:return[i-n*(u/d),1-t-r*(d/u),n*(u/d),r*(d/u)];case 8:return[t-n,i-r,n,r];case 9:return[1-i,t-n,r,n];case 10:return[1-t,1-i,n,r];case 11:return[i-r,1-t,r,n];case 12:return[t-r*(d/u),i,r*(d/u),n*(u/d)];case 13:return[1-i-n*(u/d),t-r*(d/u),n*(u/d),r*(d/u)];case 14:return[1-t,1-i-n*(u/d),r*(d/u),n*(u/d)];case 15:return[i,1-t,n*(u/d),r*(d/u)];default:return[t,i,n,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ht._mergeSVGProperties({bbox:this.#p()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,c]=this.parentDimensions;return this.setDims(this.width*o,this.height*c),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),n}static createDrawerInstance(t,i,n,r,o){Bt("Not implemented")}static startDrawing(t,i,n,r){const{target:o,offsetX:c,offsetY:u,pointerId:d,pointerType:f}=r;if(ht.#r&&ht.#r!==f)return;const{viewport:{rotation:p}}=t,{width:b,height:y}=o.getBoundingClientRect(),A=ht.#s=new AbortController,w=t.combinedSignal(A);if(ht.#n||=d,ht.#r??=f,window.addEventListener("pointerup",_=>{ht.#n===_.pointerId?this._endDraw(_):ht.#l?.delete(_.pointerId)},{signal:w}),window.addEventListener("pointercancel",_=>{ht.#n===_.pointerId?this._currentParent.endDrawingSession():ht.#l?.delete(_.pointerId)},{signal:w}),window.addEventListener("pointerdown",_=>{ht.#r===_.pointerType&&((ht.#l||=new Set).add(_.pointerId),ht.#i.isCancellable()&&(ht.#i.removeLastElement(),ht.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",li,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",_=>{_.timeStamp===ht.#u&&ne(_)},{signal:w}),t.toggleDrawing(),i._editorUndoBar?.hide(),ht.#i){t.drawLayer.updateProperties(this._currentDrawId,ht.#i.startNew(c,u,b,y,p));return}i.updateUIForDefaultProperties(this),ht.#i=this.createDrawerInstance(c,u,b,y,p),ht.#a=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(ht.#a.toSVGProperties(),ht.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ht.#u=-1,!ht.#i)return;const{offsetX:i,offsetY:n,pointerId:r}=t;if(ht.#n===r){if(ht.#l?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ht.#i.add(i,n)),ht.#u=t.timeStamp,ne(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,ht.#i=null,ht.#a=null,ht.#r=null,ht.#u=NaN),ht.#s&&(ht.#s.abort(),ht.#s=null,ht.#n=NaN,ht.#l=null)}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,ht.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=ht.#i,r=this._currentDrawId,o=n.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Ct.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Ct.DRAW_STEP),!ht.#i.isEmpty()){const{pageDimensions:[n,r],scale:o}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ht.#i.getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:ht.#a,mustBeCommitted:!t});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,n,r,o,c){Bt("Not implemented")}static async deserialize(t,i,n){const{rawDims:{pageWidth:r,pageHeight:o,pageX:c,pageY:u}}=i.viewport,d=this.deserializeDraw(c,u,r,o,this._INNER_MARGIN,t),f=await super.deserialize(t,i,n);return f.createDrawingOptions(t),f.#c({drawOutlines:d}),f.#g(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[i,n]=this.pageTranslation,[r,o]=this.pageDimensions;return this.#t.serialize([i,n,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class uv{#t=new Float64Array(6);#e;#i;#s;#a;#n;#r="";#l=0;#u=new er;#c;#d;constructor(t,i,n,r,o,c){this.#c=n,this.#d=r,this.#s=o,this.#a=c,[t,i]=this.#o(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#n=[t,i],this.#i=[{line:u,points:this.#n}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#a=i)}#o(t,i){return J._normalizePoint(t,i,this.#c,this.#d,this.#s)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#n.length<=10}add(t,i){[t,i]=this.#o(t,i);const[n,r,o,c]=this.#t.subarray(2,6),u=t-o,d=i-c;return Math.hypot(this.#c*u,this.#d*d)<=2?null:(this.#n.push(t,i),isNaN(n)?(this.#t.set([o,c,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,r,o,c,t,i],0),this.#e.push(...J.createBezierPoints(n,r,o,c,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const n=this.add(t,i);return n||(this.#n.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,n,r,o){this.#c=n,this.#d=r,this.#s=o,[t,i]=this.#o(t,i);const c=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#n=[t,i];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:c,points:this.#n}),this.#t.set(c,0),this.#l=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#n=t.points,this.#l=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#u.removeLastElement();this.#i.pop(),this.#r="";for(let t=0,i=this.#i.length;t<i;t++){const{line:n,points:r}=this.#i[t];this.#e=n,this.#n=r,this.#l=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const t=J.svgRound(this.#e[4]),i=J.svgRound(this.#e[5]);if(this.#n.length===2)return this.#r=`${this.#r} M ${t} ${i} Z`,this.#r;if(this.#n.length<=6){const r=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,r)} M ${t} ${i}`,this.#l=6}if(this.#n.length===4){const r=J.svgRound(this.#e[10]),o=J.svgRound(this.#e[11]);return this.#r=`${this.#r} L ${r} ${o}`,this.#l=12,this.#r}const n=[];this.#l===0&&(n.push(`M ${t} ${i}`),this.#l=6);for(let r=this.#l,o=this.#e.length;r<o;r+=6){const[c,u,d,f,p,b]=this.#e.slice(r,r+6).map(J.svgRound);n.push(`C${c} ${u} ${d} ${f} ${p} ${b}`)}return this.#r+=n.join(" "),this.#l=this.#e.length,this.#r}getOutlines(t,i,n,r){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#u.build(this.#i,t,i,n,this.#s,this.#a,r),this.#t=null,this.#e=null,this.#i=null,this.#r=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class er extends J{#t;#e=0;#i;#s;#a;#n;#r;#l;#u;build(t,i,n,r,o,c,u){this.#a=i,this.#n=n,this.#r=r,this.#l=o,this.#u=c,this.#i=u??0,this.#s=t,this.#o()}get thickness(){return this.#u}setLastElement(t){return this.#s.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#s.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#s){if(t.push(`M${J.svgRound(i[4])} ${J.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${J.svgRound(i[10])} ${J.svgRound(i[11])}`);continue}for(let n=6,r=i.length;n<r;n+=6){const[o,c,u,d,f,p]=i.subarray(n,n+6).map(J.svgRound);t.push(`C${o} ${c} ${u} ${d} ${f} ${p}`)}}return t.join("")}serialize([t,i,n,r],o){const c=[],u=[],[d,f,p,b]=this.#d();let y,A,w,_,x,E,O,M,k;switch(this.#l){case 0:k=J._rescale,y=t,A=i+r,w=n,_=-r,x=t+d*n,E=i+(1-f-b)*r,O=t+(d+p)*n,M=i+(1-f)*r;break;case 90:k=J._rescaleAndSwap,y=t,A=i,w=n,_=r,x=t+f*n,E=i+d*r,O=t+(f+b)*n,M=i+(d+p)*r;break;case 180:k=J._rescale,y=t+n,A=i,w=-n,_=r,x=t+(1-d-p)*n,E=i+f*r,O=t+(1-d)*n,M=i+(f+b)*r;break;case 270:k=J._rescaleAndSwap,y=t+n,A=i+r,w=-n,_=-r,x=t+(1-f-b)*n,E=i+(1-d-p)*r,O=t+(1-f)*n,M=i+(1-d)*r;break}for(const{line:D,points:I}of this.#s)c.push(k(D,y,A,w,_,o?new Array(D.length):null)),u.push(k(I,y,A,w,_,o?new Array(I.length):null));return{lines:c,points:u,rect:[x,E,O,M]}}static deserialize(t,i,n,r,o,{paths:{lines:c,points:u},rotation:d,thickness:f}){const p=[];let b,y,A,w,_;switch(d){case 0:_=J._rescale,b=-t/n,y=i/r+1,A=1/n,w=-1/r;break;case 90:_=J._rescaleAndSwap,b=-i/r,y=-t/n,A=1/r,w=1/n;break;case 180:_=J._rescale,b=t/n+1,y=-i/r,A=-1/n,w=1/r;break;case 270:_=J._rescaleAndSwap,b=i/r+1,y=t/n+1,A=-1/r,w=-1/n;break}if(!c){c=[];for(const E of u){const O=E.length;if(O===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(O===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const M=new Float32Array(3*(O-2));c.push(M);let[k,D,I,j]=E.subarray(0,4);M.set([NaN,NaN,NaN,NaN,k,D],0);for(let K=4;K<O;K+=2){const Z=E[K],tt=E[K+1];M.set(J.createBezierPoints(k,D,I,j,Z,tt),(K-2)*3),[k,D,I,j]=[I,j,Z,tt]}}}for(let E=0,O=c.length;E<O;E++)p.push({line:_(c[E].map(M=>M??NaN),b,y,A,w),points:_(u[E].map(M=>M??NaN),b,y,A,w)});const x=new this.prototype.constructor;return x.build(p,n,r,1,d,f,o),x}#c(t=this.#u){const i=this.#i+t/2*this.#r;return this.#l%180===0?[i/this.#a,i/this.#n]:[i/this.#n,i/this.#a]}#d(){const[t,i,n,r]=this.#t,[o,c]=this.#c(0);return[t+o,i+c,n-2*o,r-2*c]}#o(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#s){if(r.length<=12){for(let u=4,d=r.length;u<d;u+=6)rt.pointBoundingBox(r[u],r[u+1],t);continue}let o=r[4],c=r[5];for(let u=6,d=r.length;u<d;u+=6){const[f,p,b,y,A,w]=r.subarray(u,u+6);rt.bezierBoundingBox(o,c,f,p,b,y,A,w,t),o=A,c=w}}const[i,n]=this.#c();t[0]=Me(t[0]-i,0,1),t[1]=Me(t[1]-n,0,1),t[2]=Me(t[2]+i,0,1),t[3]=Me(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#g(i):null}#g(t){const[i,n]=this.#c();this.#u=t;const[r,o]=this.#c(),[c,u]=[r-i,o-n],d=this.#t;return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d}updateParentDimensions([t,i],n){const[r,o]=this.#c();this.#a=t,this.#n=i,this.#r=n;const[c,u]=this.#c(),d=c-r,f=u-o,p=this.#t;return p[0]-=d,p[1]-=f,p[2]+=2*d,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(J.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let n=0,r=0,o=0,c=0,u=0,d=0;switch(this.#e){case 90:r=i/t,o=-t/i,u=t;break;case 180:n=-1,c=-1,u=t,d=i;break;case 270:r=-i/t,o=t/i,d=i;break;default:return""}return`matrix(${n} ${r} ${o} ${c} ${J.svgRound(u)} ${J.svgRound(d)})`}getPathResizingSVGProperties([t,i,n,r]){const[o,c]=this.#c(),[u,d,f,p]=this.#t;if(Math.abs(f-o)<=J.PRECISION||Math.abs(p-c)<=J.PRECISION){const _=t+n/2-(u+f/2),x=i+r/2-(d+p/2);return{path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(i)}`,transform:`${this.rotationTransform} translate(${_} ${x})`}}}const b=(n-2*o)/(f-2*o),y=(r-2*c)/(p-2*c),A=f/n,w=p/r;return{path:{"transform-origin":`${J.svgRound(u)} ${J.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${w}) translate(${J.svgRound(o)} ${J.svgRound(c)}) scale(${b} ${y}) translate(${J.svgRound(-o)} ${J.svgRound(-c)})`}}}getPathResizedSVGProperties([t,i,n,r]){const[o,c]=this.#c(),u=this.#t,[d,f,p,b]=u;if(u[0]=t,u[1]=i,u[2]=n,u[3]=r,Math.abs(p-o)<=J.PRECISION||Math.abs(b-c)<=J.PRECISION){const x=t+n/2-(d+p/2),E=i+r/2-(f+b/2);for(const{line:O,points:M}of this.#s)J._translate(O,x,E,O),J._translate(M,x,E,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(n-2*o)/(p-2*o),A=(r-2*c)/(b-2*c),w=-y*(d+o)+t+o,_=-A*(f+c)+i+c;if(y!==1||A!==1||w!==0||_!==0)for(const{line:x,points:E}of this.#s)J._rescale(x,w,_,y,A,x),J._rescale(E,w,_,y,A,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],n){const[r,o]=n,c=this.#t,u=t-c[0],d=i-c[1];if(this.#a===r&&this.#n===o)for(const{line:f,points:p}of this.#s)J._translate(f,u,d,f),J._translate(p,u,d,p);else{const f=this.#a/r,p=this.#n/o;this.#a=r,this.#n=o;for(const{line:b,points:y}of this.#s)J._rescale(b,u,d,f,p,b),J._rescale(y,u,d,f,p,y);c[2]*=f,c[3]*=p}return c[0]=t,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(t)} ${J.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(t[0])} ${J.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Hl extends Vp{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:lt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new Hl(this._viewParameters);return t.updateAll(this),t}}class Bu extends ht{static _type="ink";static _editorType=mt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){lt.initialize(t,i),this._defaultDrawingOptions=new Hl(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return Et(this,"typesMap",new Map([[Ct.INK_THICKNESS,"stroke-width"],[Ct.INK_COLOR,"stroke"],[Ct.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,n,r,o){return new uv(t,i,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,n,r,o,c){return er.deserialize(t,i,n,r,o,c)}static async deserialize(t,i,n){let r=null;if(t instanceof zu){const{data:{inkLists:c,rect:u,rotation:d,id:f,color:p,opacity:b,borderStyle:{rawWidth:y},popupRef:A,contentsObj:w},parent:{page:{pageNumber:_}}}=t;r=t={annotationType:mt.INK,color:Array.from(p),thickness:y,opacity:b,paths:{points:c},boxes:null,pageIndex:_-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,comment:w?.str||null}}const o=await super.deserialize(t,i,n);return o._initialData=r,t.comment&&o.setCommentData(t.comment),o}get toolbarButtons(){return this._colorPicker||=new Ka(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ct.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:n}=this;i.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:n}){this._drawingOptions=Bu.getDefaultDrawingOptions({stroke:rt.makeHexColor(...t),"stroke-width":i,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:n,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":c,"stroke-width":u}}=this,d={annotationType:mt.INK,color:lt._colorManager.convert(o),opacity:c,thickness:u,paths:{lines:i,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!this.#t(d)?null:(d.id=this.annotationElementId,d)}#t(t){const{color:i,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==i[u])||t.thickness!==n||t.opacity!==r||t.pageIndex!==o}renderAnnotationElement(t){const{points:i,rect:n}=this.serializeDraw(!1),r={rect:n,thickness:this._drawingOptions["stroke-width"],points:i};return this.hasEditedComment&&(r.popup=this.comment),t.updateEdited(r),null}}class _u extends er{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const wl=8,Fa=3;class Ln{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,n,r){return n-=t,r-=i,n===0?r>0?0:4:n===1?r+6:2-r}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#s(t,i,n,r,o,c,u){const d=this.#e(n,r,o,c);for(let f=0;f<8;f++){const p=(-f+d-u+16)%8,b=this.#i[2*p],y=this.#i[2*p+1];if(t[(n+b)*i+(r+y)]!==0)return p}return-1}static#a(t,i,n,r,o,c,u){const d=this.#e(n,r,o,c);for(let f=0;f<8;f++){const p=(f+d+u+16)%8,b=this.#i[2*p],y=this.#i[2*p+1];if(t[(n+b)*i+(r+y)]!==0)return p}return-1}static#n(t,i,n,r){const o=t.length,c=new Int32Array(o);for(let p=0;p<o;p++)c[p]=t[p]<=r?1:0;for(let p=1;p<n-1;p++)c[p*i]=c[p*i+i-1]=0;for(let p=0;p<i;p++)c[p]=c[i*n-1-p]=0;let u=1,d;const f=[];for(let p=1;p<n-1;p++){d=1;for(let b=1;b<i-1;b++){const y=p*i+b,A=c[y];if(A===0)continue;let w=p,_=b;if(A===1&&c[y-1]===0)u+=1,_-=1;else if(A>=1&&c[y+1]===0)u+=1,_+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const x=[b,p],E=_===b+1,O={isHole:E,points:x,id:u,parent:0};f.push(O);let M;for(const W of f)if(W.id===d){M=W;break}M?M.isHole?O.parent=E?M.parent:d:O.parent=E?d:M.parent:O.parent=E?d:0;const k=this.#s(c,i,p,b,w,_,0);if(k===-1){c[y]=-u,c[y]!==1&&(d=Math.abs(c[y]));continue}let D=this.#i[2*k],I=this.#i[2*k+1];const j=p+D,K=b+I;w=j,_=K;let Z=p,tt=b;for(;;){const W=this.#a(c,i,Z,tt,w,_,1);D=this.#i[2*W],I=this.#i[2*W+1];const ot=Z+D,At=tt+I;x.push(At,ot);const gt=Z*i+tt;if(c[gt+1]===0?c[gt]=-u:c[gt]===1&&(c[gt]=u),ot===p&&At===b&&Z===j&&tt===K){c[y]!==1&&(d=Math.abs(c[y]));break}else w=Z,_=tt,Z=ot,tt=At}}}return f}static#r(t,i,n,r){if(n-i<=4){for(let j=i;j<n-2;j+=2)r.push(t[j],t[j+1]);return}const o=t[i],c=t[i+1],u=t[n-4]-o,d=t[n-3]-c,f=Math.hypot(u,d),p=u/f,b=d/f,y=p*c-b*o,A=d/u,w=1/f,_=Math.atan(A),x=Math.cos(_),E=Math.sin(_),O=w*(Math.abs(x)+Math.abs(E)),M=w*(1-O+O**2),k=Math.max(Math.atan(Math.abs(E+x)*M),Math.atan(Math.abs(E-x)*M));let D=0,I=i;for(let j=i+2;j<n-2;j+=2){const K=Math.abs(y-p*t[j+1]+b*t[j]);K>D&&(I=j,D=K)}D>(f*k)**2?(this.#r(t,i,I+2,r),this.#r(t,I,n,r)):r.push(o,c)}static#l(t){const i=[],n=t.length;return this.#r(t,0,n,i),i.push(t[n-2],t[n-1]),i.length<=4?null:i}static#u(t,i,n,r,o,c){const u=new Float32Array(c**2),d=-2*r**2,f=c>>1;for(let _=0;_<c;_++){const x=(_-f)**2;for(let E=0;E<c;E++)u[_*c+E]=Math.exp((x+(E-f)**2)/d)}const p=new Float32Array(256),b=-2*o**2;for(let _=0;_<256;_++)p[_]=Math.exp(_**2/b);const y=t.length,A=new Uint8Array(y),w=new Uint32Array(256);for(let _=0;_<n;_++)for(let x=0;x<i;x++){const E=_*i+x,O=t[E];let M=0,k=0;for(let I=0;I<c;I++){const j=_+I-f;if(!(j<0||j>=n))for(let K=0;K<c;K++){const Z=x+K-f;if(Z<0||Z>=i)continue;const tt=t[j*i+Z],W=u[I*c+K]*p[Math.abs(tt-O)];M+=tt*W,k+=W}}const D=A[E]=Math.round(M/k);w[D]++}return[A,w]}static#c(t){const i=new Uint32Array(256);for(const n of t)i[n]++;return i}static#d(t){const i=t.length,n=new Uint8ClampedArray(i>>2);let r=-1/0,o=1/0;for(let u=0,d=n.length;u<d;u++){const f=n[u]=t[u<<2];r=Math.max(r,f),o=Math.min(o,f)}const c=255/(r-o);for(let u=0,d=n.length;u<d;u++)n[u]=(n[u]-o)*c;return n}static#o(t){let i,n=-1/0,r=-1/0;const o=t.findIndex(d=>d!==0);let c=o,u=o;for(i=o;i<256;i++){const d=t[i];d>n&&(i-c>r&&(r=i-c,u=i-1),n=d,c=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#g(t){const i=t,{width:n,height:r}=t,{maxDim:o}=this.#t;let c=n,u=r;if(n>o||r>o){let y=n,A=r,w=Math.log2(Math.max(n,r)/o);const _=Math.floor(w);w=w===_?_-1:_;for(let E=0;E<w;E++){c=Math.ceil(y/2),u=Math.ceil(A/2);const O=new OffscreenCanvas(c,u);O.getContext("2d").drawImage(t,0,0,y,A,0,0,c,u),y=c,A=u,t!==i&&t.close(),t=O.transferToImageBitmap()}const x=Math.min(o/c,o/u);c=Math.round(c*x),u=Math.round(u*x)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const p=f.getImageData(0,0,c,u).data;return[this.#d(p),c,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:n,fontWeight:r},o,c,u,d){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const b=200,y=p.font=`${n} ${r} ${b}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:_,actualBoundingBoxDescent:x,fontBoundingBoxAscent:E,fontBoundingBoxDescent:O,width:M}=p.measureText(t),k=1.5,D=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,M)*k),I=Math.ceil(Math.max(Math.abs(_)+Math.abs(x)||b,Math.abs(E)+Math.abs(O)||b)*k);f=new OffscreenCanvas(D,I),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,D,I),p.fillStyle="black",p.fillText(t,D*(k-1)/2,I*(3-k)/2);const j=this.#d(p.getImageData(0,0,D,I).data),K=this.#c(j),Z=this.#o(K),tt=this.#n(j,D,I,Z);return this.processDrawnLines({lines:{curves:tt,width:D,height:I},pageWidth:o,pageHeight:c,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,i,n,r,o){const[c,u,d]=this.#g(t),[f,p]=this.#u(c,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),b=this.#o(p),y=this.#n(f,u,d,b);return this.processDrawnLines({lines:{curves:y,width:u,height:d},pageWidth:i,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:n,rotation:r,innerMargin:o,mustSmooth:c,areContours:u}){r%180!==0&&([i,n]=[n,i]);const{curves:d,width:f,height:p}=t,b=t.thickness??0,y=[],A=Math.min(i/f,n/p),w=A/i,_=A/n,x=[];for(const{points:O}of d){const M=c?this.#l(O):O;if(!M)continue;x.push(M);const k=M.length,D=new Float32Array(k),I=new Float32Array(3*(k===2?2:k-2));if(y.push({line:I,points:D}),k===2){D[0]=M[0]*w,D[1]=M[1]*_,I.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[j,K,Z,tt]=M;j*=w,K*=_,Z*=w,tt*=_,D.set([j,K,Z,tt],0),I.set([NaN,NaN,NaN,NaN,j,K],0);for(let W=4;W<k;W+=2){const ot=D[W]=M[W]*w,At=D[W+1]=M[W+1]*_;I.set(J.createBezierPoints(j,K,Z,tt,ot,At),(W-2)*3),[j,K,Z,tt]=[Z,tt,ot,At]}}if(y.length===0)return null;const E=u?new _u:new er;return E.build(y,i,n,1,r,u?0:b,o),{outline:E,newCurves:x,areContours:u,thickness:b,width:f,height:p}}static async compressSignature({outlines:t,areContours:i,thickness:n,width:r,height:o}){let c=1/0,u=-1/0,d=0;for(const M of t){d+=M.length;for(let k=2,D=M.length;k<D;k++){const I=M[k]-M[k-2];c=Math.min(c,I),u=Math.max(u,I)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,b=wl+Fa*p,y=new Uint32Array(b);let A=0;y[A++]=b*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*f.BYTES_PER_ELEMENT,y[A++]=0,y[A++]=r,y[A++]=o,y[A++]=i?0:1,y[A++]=Math.max(0,Math.floor(n??0)),y[A++]=p,y[A++]=f.BYTES_PER_ELEMENT;for(const M of t)y[A++]=M.length-2,y[A++]=M[0],y[A++]=M[1];const w=new CompressionStream("deflate-raw"),_=w.writable.getWriter();await _.ready,_.write(y);const x=f.prototype.constructor;for(const M of t){const k=new x(M.length-2);for(let D=2,I=M.length;D<I;D++)k[D-2]=M[D]-M[D-2];_.write(k)}_.close();const E=await new Response(w.readable).arrayBuffer(),O=new Uint8Array(E);return bp(O)}static async decompressSignature(t){try{const i=kb(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),o=r.getWriter();await o.ready,o.write(i).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const M of n)c||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),c.set(M,u),u+=M.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=d[2],b=d[3],y=d[4]===0,A=d[5],w=d[6],_=d[7],x=[],E=(wl+Fa*w)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(_){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(c.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(c.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(c.buffer,E);break}u=0;for(let M=0;M<w;M++){const k=d[Fa*M+wl],D=new Float32Array(k+2);x.push(D);for(let I=0;I<Fa-1;I++)D[I]=d[Fa*M+wl+I+1];for(let I=0;I<k;I++)D[I+2]=D[I]+O[u++]}return{areContours:y,thickness:A,outlines:x,width:p,height:b}}catch(i){return bt(`decompressSignature: ${i}`),null}}}class Hu extends Vp{constructor(){super(),super.updateProperties({fill:lt._defaultLineColor,"stroke-width":0})}clone(){const t=new Hu;return t.updateAll(this),t}}class Iu extends Hl{constructor(t){super(t),super.updateProperties({stroke:lt._defaultLineColor,"stroke-width":1})}clone(){const t=new Iu(this._viewParameters);return t.updateAll(this),t}}class wi extends ht{#t=!1;#e=null;#i=null;#s=null;static _type="signature";static _editorType=mt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){lt.initialize(t,i),this._defaultDrawingOptions=new Hu,this._defaultDrawnSignatureOptions=new Iu(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return Et(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:r,mustSmooth:o,areContours:c,description:u,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:p,pageHeight:b},rotation:y}=this.parent.viewport,A=Ln.processDrawnLines({lines:r,pageWidth:p,pageHeight:b,rotation:y,innerMargin:wi._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(A,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#s=t,this.addEditToolbar()}getUuid(){return this.#s}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:n,width:r,height:o}=this.#i,c=Math.max(r,o),u=Ln.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:n,width:r,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,n,r){const{x:o,y:c}=this,{outline:u}=this.#i=t;this.#t=u instanceof _u,this.description=n;let d;this.#t?d=wi.getDefaultDrawingOptions():(d=wi._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[f,p]=this.parentDimensions,[,b]=this.pageDimensions;let y=i/b;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(f*this.width,p*this.height),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:n},rotation:r}=this.parent.viewport;return Ln.process(t,i,n,r,wi._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return Ln.extractContoursFromText(t,i,n,r,o,wi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:n},rotation:r}=this.parent.viewport;return Ln.processDrawnLines({lines:t,pageWidth:i,pageHeight:n,rotation:r,innerMargin:wi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=wi.getDefaultDrawingOptions():(this._drawingOptions=wi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:n,rect:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,c={annotationType:mt.SIGNATURE,isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(c),t?(c.paths={lines:i,points:n},c.uuid=this.#s,c.isCopy=!0):c.lines=i,this.#e&&(c.accessibilityData={type:"Figure",alt:this.#e}),c}static deserializeDraw(t,i,n,r,o,c){return c.areContours?_u.deserialize(t,i,n,r,o,c):er.deserialize(t,i,n,r,o,c)}static async deserialize(t,i,n){const r=await super.deserialize(t,i,n);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#s=t.uuid,r}}class hv extends lt{#t=null;#e=null;#i=null;#s=null;#a=null;#n="";#r=null;#l=!1;#u=null;#c=!1;#d=!1;static _type="stamp";static _editorType=mt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#s=t.bitmapUrl,this.#a=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){lt.initialize(t,i)}static isHandlingMimeForPasting(t){return pu.includes(t)}static paste(t,i){i.pasteEditor({mode:mt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#o(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#c=t.isSvg),t.file&&(this.#n=t.file.name),this.#f()}#g(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await n.guess({name:"altText",request:{data:r,width:o,height:c,channels:r.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),i&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#o(n,!0)).finally(()=>this.#g());return}if(this.#s){const n=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(n).then(r=>this.#o(r)).finally(()=>this.#g());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(n).then(r=>this.#o(r)).finally(()=>this.#g());return}const t=document.createElement("input");t.type="file",t.accept=pu.join(",");const i=this._uiManager._signal;this.#i=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#o(r)}n()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:i})}).finally(()=>this.#g()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#r===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#s||this.#a||this.#e||this.#l)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#l||(this.#t?this.#f():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,r&&(this.#t=r),this.#l=!1,this.#f())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const t=200;this.#u=setTimeout(()=>{this.#u=null,this.#p()},t)}#f(){const{div:t}=this;let{width:i,height:n}=this.#t;const[r,o]=this.pageDimensions,c=.75;if(this.width)i=this.width*r,n=this.height*o;else if(i>c*r||n>c*o){const p=Math.min(c*r/i,c*o/n);i*=p,n*=p}const[u,d]=this.parentDimensions;this.setDims(i*u/r,n*d/o),this._uiManager.enableWaiting(!1);const f=this.#r=document.createElement("canvas");f.setAttribute("role","img"),this.addContainer(f),this.width=i/r,this.height=n/o,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#n&&this.div.setAttribute("aria-description",this.#n),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,n=!1){t||(t=224);const{width:r,height:o}=this.#t,c=new xi;let u=this.#t,d=r,f=o,p=null;if(i){if(r>i||o>i){const I=Math.min(i/r,i/o);d=Math.floor(r*I),f=Math.floor(o*I)}p=document.createElement("canvas");const y=p.width=Math.ceil(d*c.sx),A=p.height=Math.ceil(f*c.sy);this.#c||(u=this.#h(y,A));const w=p.getContext("2d");w.filter=this._uiManager.hcmFilter;let _="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(_="#8f8f9d",x="#42414d");const E=15,O=E*c.sx,M=E*c.sy,k=new OffscreenCanvas(O*2,M*2),D=k.getContext("2d");D.fillStyle=_,D.fillRect(0,0,O*2,M*2),D.fillStyle=x,D.fillRect(0,0,O,M),D.fillRect(O,M,O,M),w.fillStyle=w.createPattern(k,"repeat"),w.fillRect(0,0,y,A),w.drawImage(u,0,0,u.width,u.height,0,0,y,A)}let b=null;if(n){let y,A;if(c.symmetric&&u.width<t&&u.height<t)y=u.width,A=u.height;else if(u=this.#t,r>t||o>t){const x=Math.min(t/r,t/o);y=Math.floor(r*x),A=Math.floor(o*x),this.#c||(u=this.#h(y,A))}const _=new OffscreenCanvas(y,A).getContext("2d",{willReadFrequently:!0});_.drawImage(u,0,0,u.width,u.height,0,0,y,A),b={width:y,height:A,data:_.getImageData(0,0,y,A).data}}return{canvas:p,width:d,height:f,imageData:b}}#h(t,i){const{width:n,height:r}=this.#t;let o=n,c=r,u=this.#t;for(;o>2*t||c>2*i;){const d=o,f=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const p=new OffscreenCanvas(o,c);p.getContext("2d").drawImage(u,0,0,d,f,0,0,o,c),u=p.transferToImageBitmap()}return u}#p(){const[t,i]=this.parentDimensions,{width:n,height:r}=this,o=new xi,c=Math.ceil(n*t*o.sx),u=Math.ceil(r*i*o.sy),d=this.#r;if(!d||d.width===c&&d.height===u)return;d.width=c,d.height=u;const f=this.#c?this.#t:this.#h(c,u),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#v(t){if(t){if(this.#c){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#c){const[i,n]=this.pageDimensions,r=Math.round(this.width*i*In.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*In.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,o);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,o),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,n){let r=null,o=!1;if(t instanceof Gp){const{data:{rect:_,rotation:x,id:E,structParent:O,popupRef:M,contentsObj:k},container:D,parent:{page:{pageNumber:I}},canvas:j}=t;let K,Z;j?(delete t.canvas,{id:K,bitmap:Z}=n.imageManager.getFromCanvas(D.id,j),j.remove()):(o=!0,t._hasNoCanvas=!0);const tt=(await i._structTree.getAriaAttributes(`${Eu}${E}`))?.get("aria-label")||"";r=t={annotationType:mt.STAMP,bitmapId:K,bitmap:Z,pageIndex:I-1,rect:_.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:tt},isSvg:!1,structParent:O,popupRef:M,comment:k?.str||null}}const c=await super.deserialize(t,i,n),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:p,isSvg:b,accessibilityData:y}=t;o?(n.addMissingCanvas(t.id,c),c.#l=!0):p&&n.imageManager.isValidId(p)?(c.#e=p,d&&(c.#t=d)):c.#s=f,c.#c=b;const[A,w]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/w,y&&(c.altTextData=y),c._initialData=r,t.comment&&c.setCommentData(t.comment),c.#d=!!r,c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:mt.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(n),t)return n.bitmapUrl=this.#v(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#b(n);if(u.isSame)return null;u.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,i===null)return n;i.stamps||=new Map;const c=this.#c?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:c,serialized:n}),n.bitmap=this.#v(!1);else if(this.#c){const u=i.stamps.get(this.#e);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#v(!1))}return n}#b(t){const{pageIndex:i,accessibilityData:{altText:n}}=this._initialData,r=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}}renderAnnotationElement(t){const i={rect:this.getRect(0,0)};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}}class Gi{#t;#e=!1;#i=null;#s=null;#a=null;#n=new Map;#r=!1;#l=!1;#u=!1;#c=null;#d=null;#o=null;#g=null;#m=null;#f=-1;#h;static _initialized=!1;static#p=new Map([oe,Bu,hv,Qt,wi].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:n,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:d,viewport:f,l10n:p}){const b=[...Gi.#p.values()];if(!Gi._initialized){Gi._initialized=!0;for(const y of b)y.initialize(p,t)}t.registerEditorTypes(b),this.#h=t,this.pageIndex=i,this.div=n,this.#t=o,this.#i=c,this.viewport=f,this.#o=d,this.drawLayer=u,this._structTree=r,this.#h.addLayer(this)}get isEmpty(){return this.#n.size===0}get isInvisible(){return this.isEmpty&&this.#h.getMode()===mt.NONE}updateToolbar(t){this.#h.updateToolbar(t)}updateMode(t=this.#h.getMode()){switch(this.#y(),t){case mt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case mt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const n of Gi.#p.values())i.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){return t===this.#o?.div}setEditingState(t){this.#h.setEditingState(t)}addCommands(t){this.#h.addCommands(t)}cleanUndoStack(t){this.#h.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#m?.abort(),this.#m=null;const t=new Set;for(const n of this.#n.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#h.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!this.#i){this.#u=!1;return}const i=this.#i.getEditableAnnotations();for(const n of i){if(n.hide(),this.#h.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}this.#u=!1}disable(){if(this.#l=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#o&&!this.#m){this.#m=new AbortController;const r=this.#h.combinedSignal(this.#m);this.#o.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:d,timeStamp:f}=o,p=this.#f;if(f-p>500){this.#f=f;return}this.#f=-1;const{classList:b}=this.div;b.toggle("getElements",!0);const y=document.elementsFromPoint(u,d);if(b.toggle("getElements",!1),!this.div.contains(y[0]))return;let A;const w=new RegExp(`^${dp}[0-9]+$`);for(const x of y)if(w.test(x.id)){A=x.id;break}if(!A)return;const _=this.#n.get(A);_?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),_.dblclick())},{signal:r,capture:!0})}const t=new Map,i=new Map;for(const r of this.#n.values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else i.set(r.annotationElementId,r);this.getEditableAnnotation(r.annotationElementId)?.show(),r.remove()}if(this.#i){const r=this.#i.getEditableAnnotations();for(const o of r){const{id:c}=o.data;if(this.#h.isDeletedAnnotationElement(c)){o.updateEdited({deleted:!0});continue}let u=i.get(c);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=t.get(c),u&&(this.#h.addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of Gi.#p.values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#l=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#h.getActive()!==t&&this.#h.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#o?.div&&!this.#g){this.#g=new AbortController;const t=this.#h.combinedSignal(this.#g);this.#o.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#o.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#o?.div&&this.#g&&(this.#g.abort(),this.#g=null,this.#o.div.classList.remove("highlighting"))}#v(t){this.#h.unselectAll();const{target:i}=t;if(i===this.#o.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#o.div.contains(i)){const{isMac:n}=Ae.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#h.showAllEditors("highlight",!0,!0),this.#o.div.classList.add("free"),this.toggleDrawing(),Qt.startHighlighting(this,this.#h.direction==="ltr",{target:this.#o.div,x:t.x,y:t.y}),this.#o.div.addEventListener("pointerup",()=>{this.#o.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#h._signal}),t.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const t=this.#h.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#s?.abort(),this.#s=null}attach(t){this.#n.set(t.id,t);const{annotationElementId:i}=t;i&&this.#h.isDeletedAnnotationElement(i)&&this.#h.removeDeletedAnnotationElement(t)}detach(t){this.#n.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#l&&t.annotationElementId&&this.#h.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#h.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#h.addDeletedAnnotationElement(t.annotationElementId),lt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#h.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#u),this.#h.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#a&&(t._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#h._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:i,undo:n,mustExec:!1})}getNextId(){return this.#h.getId()}get#b(){return Gi.#p.get(this.#h.getMode())}combinedSignal(t){return this.#h.combinedSignal(t)}#S(t){const i=this.#b;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#h.updateMode(t.mode);const{offsetX:n,offsetY:r}=this.#_(),o=this.getNextId(),c=this.#S({parent:this,id:o,x:n,y:r,uiManager:this.#h,isCentered:!0,...i});c&&this.add(c)}async deserialize(t){return await Gi.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#h)||null}createAndAddNewEditor(t,i,n={}){const r=this.getNextId(),o=this.#S({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#h,isCentered:i,...n});return o&&this.add(o),o}#_(){const{x:t,y:i,width:n,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,t),c=Math.max(0,i),u=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,i+r),f=(o+u)/2-t,p=(c+d)/2-i,[b,y]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:b,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#_(),!0,t)}setSelected(t){this.#h.setSelected(t)}toggleSelected(t){this.#h.toggleSelected(t)}unselect(t){this.#h.unselect(t)}pointerup(t){const{isMac:i}=Ae.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#r||(this.#r=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#h.getMode();if(n===mt.STAMP||n===mt.SIGNATURE){this.#h.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#h.getMode()===mt.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:i}=Ae.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#r=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const n=this.#h.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#c){this.#b.startDrawing(this,this.#h,!1,t);return}this.#h.setCurrentDrawingSession(this),this.#c=new AbortController;const i=this.#h.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#h,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#c?(this.#h.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,i,n){const r=this.#h.findParent(i,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#h.getActive()?.parent===this&&(this.#h.commitOrRemove(),this.#h.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const t of this.#n.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#n.clear(),this.#h.removeLayer(this)}#y(){for(const t of this.#n.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Us(this.div,t);for(const i of this.#h.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#h.commitOrRemove(),this.#y();const i=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Us(this.div,{rotation:n}),i!==n)for(const r of this.#n.values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#h.viewParameters.realScale}}class ye{#t=null;#e=new Map;#i=new Map;static#s=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return Et(this,"_svgFactory",new Rl)}static#a(t,[i,n,r,o]){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*i}%`,c.width=`${100*r}%`,c.height=`${100*o}%`}#n(){const t=ye._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#r(t,i){const n=ye._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${i}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const o=ye._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${i}`),o.classList.add("clip"),r}#l(t,i){for(const[n,r]of Object.entries(i))r===null?t.removeAttribute(n):t.setAttribute(n,r)}draw(t,i=!1,n=!1){const r=ye.#s++,o=this.#n(),c=ye._svgFactory.createElement("defs");o.append(c);const u=ye._svgFactory.createElement("path");c.append(u);const d=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#i.set(r,u);const f=n?this.#r(c,d):null,p=ye._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(r,o),{id:r,clipPathId:`url(#${f})`}}drawOutline(t,i){const n=ye.#s++,r=this.#n(),o=ye._svgFactory.createElement("defs");r.append(o);const c=ye._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${n}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(i){const b=ye._svgFactory.createElement("mask");o.append(b),d=`mask_p${this.pageIndex}_${n}`,b.setAttribute("id",d),b.setAttribute("maskUnits","objectBoundingBox");const y=ye._svgFactory.createElement("rect");b.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const A=ye._svgFactory.createElement("use");b.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=ye._svgFactory.createElement("use");r.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const p=f.cloneNode();return r.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(n,r),n}finalizeDraw(t,i){this.#i.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:n,bbox:r,rootClass:o,path:c}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(n&&this.#l(u,n),r&&ye.#a(u,r),o){const{classList:d}=u;for(const[f,p]of Object.entries(o))d.toggle(f,p)}if(c){const f=u.firstChild.firstChild;this.#l(f,c)}}}updateParent(t,i){if(i===this)return;const n=this.#e.get(t);n&&(i.#t.append(n),this.#e.delete(t),i.#e.set(t,n))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Au};globalThis.pdfjsLib={AbortException:bs,AnnotationEditorLayer:Gi,AnnotationEditorParamsType:Ct,AnnotationEditorType:mt,AnnotationEditorUIManager:ys,AnnotationLayer:Pu,AnnotationMode:ps,AnnotationType:se,build:Fy,ColorPicker:ri,createValidAbsoluteUrl:fp,DOMSVGFactory:Rl,DrawLayer:ye,FeatureTest:Ae,fetchData:Za,getDocument:Lp,getFilenameFromUrl:zb,getPdfFilenameFromUrl:Pb,getRGB:zl,getUuid:mp,getXfaPageViewport:Hb,GlobalWorkerOptions:Bn,ImageKind:El,InvalidPDFException:fu,isDataScheme:kl,isPdfFile:Tu,isValidExplicitDest:Kb,MathClamp:Me,noContextMenu:li,normalizeUnicode:Ob,OPS:Cl,OutputScale:xi,PasswordResponses:wb,PDFDataRangeTransport:kp,PDFDateString:gu,PDFWorker:$a,PermissionFlag:_b,PixelsPerInch:In,RenderingCancelledException:xu,ResponseException:Ml,setLayerDimensions:Us,shadow:Et,SignatureExtractor:Ln,stopEvent:ne,SupportedImageMimeTypes:pu,TextLayer:Te,TouchManager:Pl,updateUrlHash:gp,Util:rt,VerbosityLevel:Nl,version:Bp,XfaLayer:Hp};Bn.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${Bp}/pdf.worker.min.js`;const dv=()=>{const[m,t]=be.useState(""),[i,n]=be.useState(""),[r,o]=be.useState(""),[c,u]=be.useState(""),[d,f]=be.useState(""),[p,b]=be.useState(""),[y,A]=be.useState(null),[w,_]=be.useState("manual"),[x,E]=be.useState(""),[O,M]=be.useState(""),[k,D]=be.useState(!1),[I,j]=be.useState(""),[K,Z]=be.useState(!1),[tt,W]=be.useState(!1),[ot,At]=be.useState(!1),[gt,dt]=be.useState(""),N="AIzaSyC0HbONDZt_jeveRJiNeI_gq-mftoLBTg4",U="f17f8292f3744621a92bb83dd9f8921d9715873253d",et=async $=>{if(At(!0),dt(""),!$){dt("Please select a file to upload."),At(!1);return}try{const nt=$.type;let st="";if(nt==="text/plain")st=await $.text();else if(nt==="application/pdf"){const pt=await $.arrayBuffer(),yt=await Lp({data:pt}).promise,jt=yt.numPages;for(let Wt=1;Wt<=jt;Wt++){const di=(await(await yt.getPage(Wt)).getTextContent()).items.map(Ti=>Ti.str).join(" ");st+=di+" "}}else{dt("Unsupported file type. Please upload a PDF or plain text file."),At(!1);return}console.log(st.trim()),b(st.trim())}catch(nt){console.error("Resume processing error:",nt),dt("Failed to process the resume file. Please try a different file or paste the text manually.")}finally{At(!1)}},St=$=>{const nt=$.target.files[0];nt&&(A(nt),b(""),et(nt))},C=async()=>{if(!O.trim()){dt("Please enter a valid job URL");return}W(!0),dt("");try{const $=`https://api.scrape.do/?token=${encodeURIComponent(U)}&url=${encodeURIComponent(O)}`,nt=await fetch($,{method:"GET",headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"}});if(!nt.ok)throw nt.status===401?new Error("Invalid API token. Please check your scrape.do token."):nt.status===403?new Error("Access denied. Please check your scrape.do subscription."):nt.status===429?new Error("Rate limit exceeded. Please try again later."):new Error(`Failed to fetch job page: ${nt.status} ${nt.statusText}`);const st=await nt.text(),yt=new DOMParser().parseFromString(st,"text/html");let jt="",Wt="",Jt="";const De=[".description__text",".jobs-description-content__text",".jobs-description__container",".jobsearch-jobDescriptionText","#jobDescriptionText",".jobsearch-JobComponent-description",".jobDescriptionContent",'[data-test="jobDescription"]','[data-test-id="job-description"]',".job-description",".job-description-container",".job_description",'[data-testid="job-description"]','[data-test="job-description"]',".job-details",".job-content",".description",'[class*="description"]','[class*="job-details"]',".posting-description",".job-posting-description",".job-summary",".position-description",'main [role="main"]',"main","article",".content"];for(const fi of De){const fe=yt.querySelector(fi);if(fe){const Lt=fe.textContent||fe.innerText||"";if(Lt.length>100){jt=Lt;break}}}const di=[".jobs-details-top-card__company-url",".job-details-jobs-unified-top-card__company-name",".jobsearch-InlineCompanyRating",'[data-testid="inlineHeader-companyName"]','[data-test="employer-name"]',".company-name",'[class*="company"]',"h1 + div","title"];for(const fi of di){const fe=yt.querySelector(fi);if(fe){const Lt=(fe.textContent||fe.innerText||"").trim();if(Lt&&!Lt.toLowerCase().includes("job")&&Lt.length<100){Wt=Lt;break}}}const Ti=[".jobs-details-top-card__job-title",'[data-testid="jobTitle"]',".jobsearch-JobInfoHeader-title","h1",".job-title",'[class*="title"]','[data-test="job-title"]'];for(const fi of Ti){const fe=yt.querySelector(fi);if(fe){const Lt=(fe.textContent||fe.innerText||"").trim();if(Lt&&Lt.length<200){Jt=Lt;break}}}if(jt&&(jt=jt.replace(/\s+/g," ").replace(/\n\s*\n/g,`
`).trim()),jt&&jt.length>100)E(jt),!r&&Wt&&o(Wt),!c&&Jt&&u(Jt),dt("");else{const fi=yt.querySelector("title"),fe=fi?fi.textContent:"";if(fe){if(!r){const Lt=fe.match(/at\s+([^|,-]+)/i);Lt&&o(Lt[1].trim())}if(!c){const Lt=fe.match(/^([^|,-]+)/);Lt&&u(Lt[1].trim())}}dt("Could not extract detailed job description. Please paste manually.")}}catch($){console.error("Scraping error:",$),dt(`Failed to scrape job details: ${$.message}`)}finally{W(!1)}},V=$=>{D($),$!==k&&(E(""),M(""),dt(""))},Q=$=>{_($),$!==w&&(b(""),A(null),dt(""))},Y=async()=>{j(""),dt(""),Z(!0);const nt={contents:[{role:"user",parts:[{text:`
      You are a career advisor. Draft a professional, concise, and engaging LinkedIn message from ${m} (currently working at ${i}) to ${d} at ${r} for the ${c} position. The message should be polite, personalized, and directly reference how the candidate's experience and skills from their resume align with the requirements of the job description. Address the recruiter by name and mention the specific company name and role in the message. Do not make up any information. If you cannot find a direct match, write a general but polite message.

      Candidate Name: ${m}
      Current Company: ${i}
      Target Company: ${r}
      Role/Position: ${c}
      Recruiter Name: ${d}
      
      Candidate's Resume:
      ${p}

      Job Description:
      ${x}

      Draft the LinkedIn message below. The message should be ready to copy and paste and should start with a proper greeting to the recruiter.
    `}]}]},st=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${N}`;let pt=0;const yt=5;let jt=1e3;for(;pt<yt;)try{const Wt=await fetch(st,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(nt)});if(!Wt.ok){if(Wt.status===429){pt++,console.warn(`Retry attempt ${pt}/${yt}. Retrying in ${jt}ms...`),await new Promise(De=>setTimeout(De,jt)),jt*=2;continue}throw new Error(`API error: ${Wt.statusText}`)}const Jt=await Wt.json();if(Jt.candidates&&Jt.candidates.length>0&&Jt.candidates[0].content&&Jt.candidates[0].content.parts&&Jt.candidates[0].content.parts.length>0){const De=Jt.candidates[0].content.parts[0].text;j(De)}else dt("Could not generate a message. Please try again.");break}catch(Wt){dt(`An error occurred: ${Wt.message}`);break}pt===yt&&dt("Too many requests. Please try again later."),Z(!1)};return F.jsx(F.Fragment,{children:F.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-blue-900 dark:to-purple-900 flex flex-col items-center p-4 md:p-12 font-sans relative overflow-y-auto",children:[F.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[F.jsx("div",{className:"absolute -top-20 -right-20 w-96 h-96 bg-gradient-to-br from-blue-500/30 to-purple-500/30 rounded-full blur-2xl animate-bounce",style:{animationDuration:"3s"}}),F.jsx("div",{className:"absolute -bottom-20 -left-20 w-80 h-80 bg-gradient-to-br from-purple-500/40 to-pink-500/40 rounded-full blur-xl animate-bounce",style:{animationDelay:"1s",animationDuration:"4s"}}),F.jsx("div",{className:"absolute top-20 right-20 w-64 h-64 bg-gradient-to-br from-indigo-500/35 to-cyan-500/35 rounded-full blur-xl animate-bounce",style:{animationDelay:"2s",animationDuration:"5s"}}),F.jsx("div",{className:"absolute top-1/3 left-1/4 w-40 h-40 bg-gradient-to-br from-yellow-400/25 to-orange-400/25 rounded-full blur-lg animate-pulse",style:{animationDelay:"1.5s"}}),F.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-48 h-48 bg-gradient-to-br from-emerald-400/30 to-teal-400/30 rounded-full blur-xl animate-pulse",style:{animationDelay:"3s"}})]}),F.jsxs("div",{className:"bg-white/80 dark:bg-gray-800/90 backdrop-blur-xl shadow-2xl rounded-3xl p-6 md:p-10 max-w-5xl w-full border border-white/10 dark:border-gray-700/20 hover:shadow-3xl hover:bg-white/85 dark:hover:bg-gray-800/95 transition-all duration-500 relative z-10 my-8",children:[F.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-2xl p-5 mb-6 text-white text-center relative overflow-hidden",children:[F.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-2xl"}),F.jsx("div",{className:"relative z-10",children:F.jsxs("div",{className:"flex items-center justify-center",children:[F.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl mr-3 shadow-lg",children:F.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),F.jsxs("div",{children:[F.jsx("h1",{className:"text-3xl font-bold text-white leading-tight",children:"LinkedIn Message Drafter"}),F.jsx("p",{className:"text-white/90 text-2xl mt-2 font-medium",children:"✨ AI-powered professional messages that get responses"})]})]})})]}),F.jsxs("div",{className:"mb-6 p-5 bg-gray-50/50 dark:bg-gray-700/20 rounded-2xl border border-gray-100/60 dark:border-gray-500/15 hover:bg-gray-50/70 dark:hover:bg-gray-700/30 transition-all duration-300",children:[F.jsxs("div",{className:"flex items-center mb-4",children:[F.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-lg mr-3 shadow-md",children:F.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),F.jsxs("div",{children:[F.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Your Information"}),F.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tell us about yourself"})]})]}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[F.jsxs("div",{children:[F.jsx("label",{htmlFor:"user-name-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Your Name"}),F.jsx("input",{id:"user-name-input",type:"text",className:"w-full p-4 rounded-xl border border-gray-200/60 dark:border-gray-500/40 dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm",value:m,onChange:$=>t($.target.value),placeholder:"e.g., John Smith"})]}),F.jsxs("div",{children:[F.jsx("label",{htmlFor:"current-company-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Company"}),F.jsx("input",{id:"current-company-input",type:"text",className:"w-full p-4 rounded-xl border border-gray-200/60 dark:border-gray-500/40 dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm",value:i,onChange:$=>n($.target.value),placeholder:"e.g., Apple, Amazon, Startup Inc..."})]})]})]}),F.jsxs("div",{className:"mb-6 p-5 bg-gray-50/50 dark:bg-gray-700/20 rounded-2xl border border-gray-100/60 dark:border-gray-500/15 hover:bg-gray-50/70 dark:hover:bg-gray-700/30 transition-all duration-300",children:[F.jsxs("div",{className:"flex items-center mb-4",children:[F.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg mr-3 shadow-md",children:F.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),F.jsxs("div",{children:[F.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Target Opportunity"}),F.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Details about your dream job"})]})]}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[F.jsxs("div",{children:[F.jsx("label",{htmlFor:"company-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Company"}),F.jsx("input",{id:"company-input",type:"text",className:"w-full p-4 rounded-xl border border-gray-200/60 dark:border-gray-500/40 dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm",value:r,onChange:$=>o($.target.value),placeholder:"e.g., Google, Microsoft..."})]}),F.jsxs("div",{children:[F.jsx("label",{htmlFor:"role-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role/Position"}),F.jsx("input",{id:"role-input",type:"text",className:"w-full p-4 rounded-xl border border-gray-200/60 dark:border-gray-500/40 dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm",value:c,onChange:$=>u($.target.value),placeholder:"e.g., Software Engineer..."})]}),F.jsxs("div",{children:[F.jsx("label",{htmlFor:"recruiter-name-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Recruiter's Name"}),F.jsx("input",{id:"recruiter-name-input",type:"text",className:"w-full p-4 rounded-xl border border-gray-200/60 dark:border-gray-500/40 dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm",value:d,onChange:$=>f($.target.value),placeholder:"e.g., Sarah Johnson"})]})]})]}),F.jsxs("div",{className:"mb-6 p-5 bg-gray-50/50 dark:bg-gray-700/20 rounded-2xl border border-gray-100/60 dark:border-gray-500/15 hover:bg-gray-50/70 dark:hover:bg-gray-700/30 transition-all duration-300",children:[F.jsxs("div",{className:"flex items-center mb-4",children:[F.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg mr-3 shadow-md",children:F.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),F.jsxs("div",{children:[F.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Content & Requirements"}),F.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your resume and job details"})]})]}),F.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Your Resume"}),F.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[F.jsxs("label",{className:"flex items-center p-3 rounded-lg border border-gray-100 dark:border-gray-600/30 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:[F.jsx("input",{type:"radio",name:"resumeInputMethod",checked:w==="manual",onChange:()=>Q("manual"),className:"mr-3 text-blue-600"}),F.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Paste Resume Text"})]}),F.jsxs("label",{className:"flex items-center p-3 rounded-lg border border-gray-100 dark:border-gray-600/30 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:[F.jsx("input",{type:"radio",name:"resumeInputMethod",checked:w==="upload",onChange:()=>Q("upload"),className:"mr-3 text-blue-600"}),F.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Upload Resume File"})]})]}),w==="manual"?F.jsx("textarea",{id:"resume-input",className:"w-full p-4 rounded-xl border border-gray-200/60 dark:border-gray-500/40 dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm resize-none",rows:"10",value:p,onChange:$=>b($.target.value),placeholder:"Paste your resume text here..."}):F.jsx("div",{className:"flex flex-col items-center justify-center w-full h-40 bg-gray-100 dark:bg-gray-700 rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-500 cursor-pointer hover:border-blue-500 transition-colors duration-200",children:F.jsx("label",{htmlFor:"file-upload",className:"flex flex-col items-center justify-center w-full h-full text-center text-gray-500 dark:text-gray-400",children:ot?F.jsxs(F.Fragment,{children:[F.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),F.jsx("span",{className:"mt-2 text-sm",children:"Processing resume..."})]}):F.jsxs(F.Fragment,{children:[F.jsx("svg",{className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),F.jsx("span",{className:"text-sm font-medium",children:y?`File Selected: ${y.name}`:"Click to upload a resume file"}),F.jsx("span",{className:"text-xs mt-1",children:"(PDF or TXT)"}),F.jsx("input",{id:"file-upload",type:"file",accept:".pdf,.txt",className:"hidden",onChange:St})]})})})]}),F.jsxs("div",{children:[F.jsxs("div",{className:"mb-6 p-4 bg-white/60 dark:bg-gray-600/20 rounded-xl border border-gray-100/50 dark:border-gray-600/20",children:[F.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:"Job Information Method"}),F.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[F.jsxs("label",{className:"flex items-center p-3 rounded-lg border border-gray-100 dark:border-gray-600/30 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:[F.jsx("input",{type:"radio",name:"jobInputMethod",checked:!k,onChange:()=>V(!1),className:"mr-3 text-blue-600"}),F.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Manual Input"})]}),F.jsxs("label",{className:"flex items-center p-3 rounded-lg border border-gray-100 dark:border-gray-600/30 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:[F.jsx("input",{type:"radio",name:"jobInputMethod",checked:k,onChange:()=>V(!0),className:"mr-3 text-blue-600"}),F.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Job URL"})]})]})]}),k?F.jsxs("div",{className:"space-y-4",children:[F.jsxs("div",{children:[F.jsx("label",{htmlFor:"job-url-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Job URL"}),F.jsx("input",{id:"job-url-input",type:"url",className:"w-full p-4 rounded-xl border border-gray-200/60 dark:border-gray-500/40 dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm",value:O,onChange:$=>M($.target.value),placeholder:"https://jobs.linkedin.com/... or https://indeed.com/..."}),F.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Supports LinkedIn, Indeed, Glassdoor, and most major job sites"})]}),F.jsx("button",{type:"button",onClick:C,disabled:tt||!O.trim(),className:"w-full bg-green-600 text-white font-semibold py-4 px-6 rounded-xl shadow-lg hover:bg-green-700 transition-all duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed transform hover:scale-[1.01]",children:tt?"Extracting Job Details...":"Extract Job Details"}),x&&F.jsxs("div",{children:[F.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Extracted Job Description (You can edit this)"}),F.jsx("textarea",{className:"w-full p-4 rounded-xl border border-gray-200/60 dark:border-gray-500/40 dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm resize-none",rows:"8",value:x,onChange:$=>E($.target.value),placeholder:"Extracted job description will appear here..."})]})]}):F.jsxs("div",{children:[F.jsx("label",{htmlFor:"job-description-input",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Job Description"}),F.jsx("textarea",{id:"job-description-input",className:"w-full p-4 rounded-xl border border-gray-200/60 dark:border-gray-500/40 dark:bg-gray-700 dark:text-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 shadow-sm resize-none",rows:"10",value:x,onChange:$=>E($.target.value),placeholder:"Paste the job description here..."})]})]})]})]}),F.jsx("div",{className:"mt-8 mb-8",children:F.jsx("button",{onClick:Y,disabled:K||tt||ot||!m||!i||!r||!c||!d||!p||!x,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-5 px-8 rounded-2xl shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 disabled:from-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transform hover:scale-[1.02] disabled:transform-none",children:K?"Drafting...":tt?"Extracting Job Details...":ot?"Processing Resume...":"✨ Draft Personalized LinkedIn Message"})}),F.jsxs("div",{className:"space-y-6",children:[gt&&F.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200/60 dark:border-red-700/30 text-red-700 dark:text-red-200 p-6 rounded-2xl shadow-lg text-center",children:[F.jsxs("div",{className:"flex items-center justify-center mb-2",children:[F.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.864-.833-2.634 0L4.17 14.5c-.77.833.192 2.5 1.732 2.5z"})}),F.jsx("span",{className:"font-semibold",children:"Error"})]}),gt]}),I&&F.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200/60 dark:border-green-700/30 p-8 rounded-3xl shadow-2xl transition-all duration-300",children:[F.jsxs("div",{className:"flex items-center mb-4",children:[F.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-green-500 rounded-xl mr-4",children:F.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),F.jsxs("div",{children:[F.jsx("h2",{className:"text-2xl font-bold text-green-800 dark:text-green-200",children:"🎉 Your LinkedIn Message is Ready!"}),F.jsx("p",{className:"text-green-600 dark:text-green-300 text-sm",children:"Copy and use this personalized message"})]})]}),F.jsxs("div",{className:"relative bg-white/80 dark:bg-gray-800/80 p-6 rounded-2xl border border-green-100/40 dark:border-green-600/20",children:[F.jsx("pre",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200 font-sans leading-relaxed text-base",children:I}),F.jsx("button",{onClick:()=>navigator.clipboard.writeText(I),className:"absolute top-4 right-4 bg-green-500 hover:bg-green-600 text-white p-2 rounded-lg shadow-lg transition-all duration-200 hover:scale-105",title:"Copy to clipboard",children:F.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:F.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]})]})]})})};Sb.createRoot(document.getElementById("root")).render(F.jsx(be.StrictMode,{children:F.jsx(dv,{})}));
